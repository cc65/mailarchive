<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Solution for Variable-arg</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Solution for Variable-argument-list Problem">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Solution for Variable-argument-list Problem</h1>
<!-- received="Thu Nov 30 00:04:39 2000" -->
<!-- isoreceived="20001129230439" -->
<!-- sent="Thu, 30 Nov 2000 00:04:45 +0100" -->
<!-- isosent="20001129230445" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Solution for Variable-argument-list Problem" -->
<!-- id="20001130000445.A9696@trixie.musoftware.de" -->
<!-- inreplyto="007e01c05a54$3ab58060$9fd93ad0@palace" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Solution%20for%20Variable-argument-list%20Problem"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2000-11-30 00:04:45
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0188.html">Todd Vierling: "Re: [cc65] lcc port to the c64"</a>
<li><strong>Previous message:</strong> <a href="0186.html">Greg King: "[cc65] Solution for Variable-argument-list Problem"</a>
<li><strong>In reply to:</strong> <a href="0186.html">Greg King: "[cc65] Solution for Variable-argument-list Problem"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="../2000-12/0196.html">Greg King: "Re: [cc65] Solution for Variable-argument-list Problem"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Wed, Nov 29, 2000 at 05:32:12PM -0500, Greg King wrote:
&gt; The library's &quot;enter&quot; subroutine can compute that length.  It gets the size
&gt; of the entire argument-list from the caller.  Cc65 can give, to &quot;enter,&quot;
&gt; the size of the fixxed part of that list.  The subroutine can subtract one
&gt; size from the other, and put the difference on the stack.  After that, the
&gt; compiler can include code to add it to offsets whenever cc65 wants a named
&gt; argument.

Yes that's a good idea. It is not even needed to change the enter subroutine,
since it does already store the size of all arguments into a stack location so
the correct number of parameters can be dropped on function exit. When
generating code, the compiler can account for the know size of fixed
parameters.

Doing this would mean that access to the &quot;fixed&quot; parameters is slower than
usual, since the stack offset has to be calculated for the access. On the
other side, it would be transparent for the programmer, and the non-standard
va_fix macro is no longer needed.

I don't think this will go into the next release, since there is not enough
time left to implement and test it, but I will have a look at it once the new
release is out.

Thanks for your support!

Regards


	Uz


--
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Solution%20for%20Variable-argument-list%20Problem">uz_at_musoftware.de</a>


</pre>
<hr noshade>
<ul>
<li>application/pgp-signature attachment: <a href="../att-0187/01-part">stored</a>
</ul>
<!-- attachment="01-part" -->
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Solution%20for%20Variable-argument-list%20Problem">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0188.html">Todd Vierling: "Re: [cc65] lcc port to the c64"</a>
<li><strong>Previous message:</strong> <a href="0186.html">Greg King: "[cc65] Solution for Variable-argument-list Problem"</a>
<li><strong>In reply to:</strong> <a href="0186.html">Greg King: "[cc65] Solution for Variable-argument-list Problem"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="../2000-12/0196.html">Greg King: "Re: [cc65] Solution for Variable-argument-list Problem"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:37 CET</em>
</em>
</small>
</body>
</html>
