<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] bug?</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] bug?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] bug?</h1>
<!-- received="Sat Dec  9 13:48:46 2000" -->
<!-- isoreceived="20001209124846" -->
<!-- sent="Sat, 9 Dec 2000 13:48:49 +0100" -->
<!-- isosent="20001209124849" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] bug?" -->
<!-- id="20001209134849.B23480@trixie.musoftware.de" -->
<!-- inreplyto="3A3181D7.90DC5DD@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20bug?"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2000-12-09 13:48:49
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<li><strong>Previous message:</strong> <a href="0205.html">Groepaz: "[cc65] bug?"</a>
<li><strong>In reply to:</strong> <a href="0205.html">Groepaz: "[cc65] bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<li><strong>Reply:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Sat, Dec 09, 2000 at 01:50:31AM +0100, Groepaz wrote:
&gt; lda (foo)+bar,y
&gt;
&gt; would incorrectly give an 'illegal adressmode' error, were

Yes, this is a known problem, and there may even be a comment in the docs
about it. The parser works with one token lookahead, so the decision about the
addressing mode is made by the first token of the operand.

There are other assemblers that use brackets instead of parenthesis to avoid
this problem. Another way would be to use more lookahead tokens. I don't like
any of these solutions, so I just ignored the problem:-) I don't think there
is an urgent need to fix this, since the problem happens very rarely (you are
the first one complaining:-), and there is an easy workaround. Anyway, I will
put it on the todo list, maybe I find a third and cleaner solution.

&gt; #define AREA(x) =COUNT;COUNT+=x;
[...]
&gt; so far i couldnt reproduce this behaviour in ca65, and it looks to me like
&gt; allowing multiple lines in c-style macros would be the way to go ;)

The syntax itself may be reproduced with &quot;old fashioned&quot; macros and some V2.6
features:

	.macro	AREA	Arg

	  	.if .not .match (.left (1, Arg), ()
	  	.error &quot;Argument needs parens&quot;
	  	.endif

	  	...
	.endmacro

The bigger problem is that you are not allowed to modify constants, which
means that COUNT+=x will not work. So, even having line terminators as part of
a C style macro does not help here.

Maybe you can tell me somewhat more detailed what the author of the code is
trying to do, so I can decide if there is a way to do this with ca65, or (if
there is no such way, and the feature seems reasonable), I can add something
to make it work.

Regards
	  

	Uz


--
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20bug?">uz_at_musoftware.de</a>


</pre>
<hr noshade>
<ul>
<li>application/pgp-signature attachment: <a href="../att-0206/01-part">stored</a>
</ul>
<!-- attachment="01-part" -->
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20bug?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<li><strong>Previous message:</strong> <a href="0205.html">Groepaz: "[cc65] bug?"</a>
<li><strong>In reply to:</strong> <a href="0205.html">Groepaz: "[cc65] bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<li><strong>Reply:</strong> <a href="0207.html">Groepaz: "Re: [cc65] bug?"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:37 CET</em>
</em>
</small>
</body>
</html>
