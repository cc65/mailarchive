<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65]Asm in CC65</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65]Asm in CC65">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65]Asm in CC65</h1>
<!-- received="Sun Jan  7 22:18:31 2001" -->
<!-- isoreceived="20010107211831" -->
<!-- sent="Sun, 7 Jan 2001 22:18:37 +0100" -->
<!-- isosent="20010107211837" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65]Asm in CC65" -->
<!-- id="20010107221837.A22542@trixie.musoftware.de" -->
<!-- inreplyto="20010107.161349.15646.5.tbsilvey@juno.com" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]Asm%20in%20CC65"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2001-01-07 22:18:37
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<li><strong>Previous message:</strong> <a href="0335.html">troy silvey: "[cc65]Asm in CC65"</a>
<li><strong>In reply to:</strong> <a href="0335.html">troy silvey: "[cc65]Asm in CC65"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<li><strong>Reply:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Sun, Jan 07, 2001 at 04:13:49PM -0500, troy silvey wrote:
&gt; Can you explain this to me with an example maybe.

No problem. To insert CLI and SEI instructions in your code you may, for
example, use the following macros:

	#define CLI()	__asm__ (&quot;\tcli&quot;);
	#define SEI()	__asm__ (&quot;\tsei&quot;);

To protect the increment of a variable (maybe because it's a word variable
that's also accessed by an interrupt handler), using these macros:

	SEI();
	++counter;
	CLI();

Some of the header files do contain macros that expand to inline assembler,
you may want to have a look at them. Examples are:

	6502.h
	ctype.h

Using inline assembler may give problems with the optimizer, so please follow
these rules:

  * Always use a separate assembler module if possible. This avoids all
    problems but the assembler code may not be inlined.

  * Be careful not to write to any zero page locations used by the compiler.

  * Be sure to use the same syntax as generated by the compiler. Use lower
    case, with a tab before the mnemonic and a tab between mnemonic and
    operand. Prefer hexadecimal notation for immidiate operands.

The asm syntax will probably change for the next release, because the current
syntax is not flexible enough. Apart from that, the input should get preparsed
by the compiler to adjust it to the format expected by the backend.

Regards


	Uz


--
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]Asm%20in%20CC65">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]Asm%20in%20CC65">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<li><strong>Previous message:</strong> <a href="0335.html">troy silvey: "[cc65]Asm in CC65"</a>
<li><strong>In reply to:</strong> <a href="0335.html">troy silvey: "[cc65]Asm in CC65"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<li><strong>Reply:</strong> <a href="0337.html">troy silvey: "Re: [cc65]Asm in CC65"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:38 CET</em>
</em>
</small>
</body>
</html>
