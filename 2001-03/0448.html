<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Detecting first free byte</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Detecting first free byte of RAM?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Detecting first free byte of RAM?</h1>
<!-- received="Sun Mar 18 23:53:03 2001" -->
<!-- isoreceived="20010318225303" -->
<!-- sent="Sun, 18 Mar 2001 23:53:09 +0100" -->
<!-- isosent="20010318225309" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Detecting first free byte of RAM?" -->
<!-- id="20010318235309.B1777@trixie.musoftware.de" -->
<!-- inreplyto="01031819254501.02386@s8n" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Detecting%20first%20free%20byte%20of%20RAM?"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2001-03-18 23:53:09
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0449.html">Mike McCarty: "Re: [cc65] c64 question"</a>
<li><strong>Previous message:</strong> <a href="0447.html">BlackJack/Civitas: "Re: [cc65] Detecting first free byte of RAM?"</a>
<li><strong>In reply to:</strong> <a href="0447.html">BlackJack/Civitas: "Re: [cc65] Detecting first free byte of RAM?"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Sun, Mar 18, 2001 at 07:25:45PM +0100, BlackJack/Civitas wrote:
&gt; All except the official malloc() method (and maybe using _horg/_hend) may
&gt; result in problems with the C-stack.

To be more exact: That is not a problem with my answer, but with the original
question:-)

Jim didn't ask how to determine the size of the free memory block, so I
assumed that he wasn't going to use a really large blocks of memory.

To add the needed information: The program code and data lives in low memory,
the C stack lives in high memory ($D000 for a standard C64 setup) and grows
downwards(!). The free space is located between both areas. If you're using
this free space, you have to be careful, since the size of the C stack is not
fixed, so you may overwrite it (or the growing C stack may overwrite your
data).

The 6502 does not have hardware memory protection, and cc65 does not generate
any code to check for stack overflows. This means that there is always a risk
that the stack grows into the heap. So even using malloc() and free() does not
protect you from getting stack problems. On the other side, the default stack
size is 2K which should suffice for even large programs.

A long time ago, I had plans to add an option to generate stack checking code
(the subroutine that does this has been part of the library for a long time,
it's just that it is not called by the generated code). As usual, I don't
remember, why I didn't finish it:-)

Regards


	Uz


--
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Detecting%20first%20free%20byte%20of%20RAM?">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Detecting%20first%20free%20byte%20of%20RAM?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0449.html">Mike McCarty: "Re: [cc65] c64 question"</a>
<li><strong>Previous message:</strong> <a href="0447.html">BlackJack/Civitas: "Re: [cc65] Detecting first free byte of RAM?"</a>
<li><strong>In reply to:</strong> <a href="0447.html">BlackJack/Civitas: "Re: [cc65] Detecting first free byte of RAM?"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:39 CET</em>
</em>
</small>
</body>
</html>
