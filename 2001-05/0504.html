<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: [cc65] structure bug?</title>
<meta name="Author" content="Mark Keates (markk_at_dendrite.co.uk)">
<meta name="Subject" content="[cc65] structure bug?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>[cc65] structure bug?</h1>
<!-- received="Thu May 24 12:34:59 2001" -->
<!-- isoreceived="20010524103459" -->
<!-- sent="Thu, 24 May 2001 06:28:41 -0400" -->
<!-- isosent="20010524102841" -->
<!-- name="Mark Keates" -->
<!-- email="markk_at_dendrite.co.uk" -->
<!-- subject="[cc65] structure bug?" -->
<!-- id="1D2B2C77C9CF964EB1331ABEB51562E10271CB@ukntsvr2.uk.drte.com" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Mark Keates (<a href="mailto:markk_at_dendrite.co.uk?Subject=Re:%20[cc65]%20structure%20bug?"><em>markk_at_dendrite.co.uk</em></a>)<br>
<strong>Date:</strong> 2001-05-24 12:28:41
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Previous message:</strong> <a href="0503.html">groepaz: "Re[4]: [cc65] Debug info question"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Reply:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Maybe reply:</strong> <a href="0506.html">Mark Keates: "RE: [cc65] structure bug?"</a>
<li><strong>Maybe reply:</strong> <a href="0507.html">shubel, paul: "RE: [cc65] structure bug?"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Have a look at this code at the end of this post.

If I compile it to assembler then I get 'my_z' as:

_my_z:
        .word   $0001
        .word   _my_x+0
        .word   _my_y+0

If I change the addresses in 'my_z' as follows:

struct z my_z = {
	1, my_x-2, my_y-2
};

It produces:

_my_z:
        .word   $0001
        .word   $FFF8
        .word   $FFF4

Is this a bug?

Thanks,

Mark

-- snip --

struct x 
{
	int a;
	int b;
};

struct y
{
	int r;
	int s;
	int t;
};

struct z
{
	int i;
	struct x *j;
	struct y *k;
};

struct x my_x[2] = {
	{ 1, 1 },
	{ 2, 2 }
};

struct y my_y[3] = {
	{ 9, 9, 9 },
	{ 8, 8, 8 },
	{ 7, 7, 7 }
};

struct z my_z = {
	1,my_x,	my_y
};

int main(void)
{
	int i;
	i = my_z.i;
}

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20structure%20bug?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Previous message:</strong> <a href="0503.html">groepaz: "Re[4]: [cc65] Debug info question"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Reply:</strong> <a href="0505.html">Ullrich von Bassewitz: "Re: [cc65] structure bug?"</a>
<li><strong>Maybe reply:</strong> <a href="0506.html">Mark Keates: "RE: [cc65] structure bug?"</a>
<li><strong>Maybe reply:</strong> <a href="0507.html">shubel, paul: "RE: [cc65] structure bug?"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:40 CET</em>
</em>
</small>
</body>
</html>
