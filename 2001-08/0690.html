<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Problems with file I/O (s</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Problems with file I/O (second try)">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Problems with file I/O (second try)</h1>
<!-- received="Fri Aug 24 11:56:15 2001" -->
<!-- isoreceived="20010824095615" -->
<!-- sent="Fri, 24 Aug 2001 11:56:18 +0200" -->
<!-- isosent="20010824095618" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Problems with file I/O (second try)" -->
<!-- id="20010824115618.B9780@trixie.musoftware.de" -->
<!-- inreplyto="000701c12c07$1280aae0$0100a8c0@a800" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Problems%20with%20file%20I/O%20(second%20try)"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2001-08-24 11:56:18
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0691.html">Marc 'BlackJack' Rintsch: "Re: [cc65] Probleme mit File-IO ( die 2te )"</a>
<li><strong>Previous message:</strong> <a href="0689.html">udo klasmeier: "[cc65] Probleme mit File-IO ( die 2te )"</a>
<li><strong>In reply to:</strong> <a href="0689.html">udo klasmeier: "[cc65] Probleme mit File-IO ( die 2te )"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0691.html">Marc 'BlackJack' Rintsch: "Re: [cc65] Probleme mit File-IO ( die 2te )"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Thu, Aug 23, 2001 at 09:09:06PM +0200, udo klasmeier wrote:
&gt; i still have problems with file-io, although i think i followed the rules.
&gt; here is a a small piece of code.

What is wrong with this code? It is quite difficult to help, if you don't tell

    ... what you expect your code to do,

    ... what the code does instead,

    ... and why you think this behaviour is not correct.

I'm no CBM file i/o guru, but maybe you have to read the error message from
the drive if the scratch is not successful? But the code seems to work ok for
me using VICE and this program:

	#include &lt;stdio.h&gt;
	#include &lt;stdlib.h&gt;
	#include &lt;conio.h&gt;
	#include &lt;cbm.h&gt;

	int OpenOutput (const char* fn, int fnr)
	{
	    char cmd[64];
	    int rc;
	    sprintf (cmd, &quot;s:%s&quot;, fn);
	    rc = cbm_open(15, 8, 15, cmd);
	    cprintf (&quot;Scratch: %d\r\n&quot;, rc);
	    cbm_close (15);
	    sprintf (cmd, &quot;%s,s,w&quot;, fn);
	    rc = cbm_open (fnr, 8, fnr, cmd);
	    cprintf (&quot;Open: %d\r\n&quot;, rc);
	}

	int main (void)
	{
	    OpenOutput (&quot;fasel&quot;, 2);
	    return EXIT_SUCCESS;
	}

Regards


        Uz


--
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Problems%20with%20file%20I/O%20(second%20try)">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Problems%20with%20file%20I/O%20(second%20try)">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0691.html">Marc 'BlackJack' Rintsch: "Re: [cc65] Probleme mit File-IO ( die 2te )"</a>
<li><strong>Previous message:</strong> <a href="0689.html">udo klasmeier: "[cc65] Probleme mit File-IO ( die 2te )"</a>
<li><strong>In reply to:</strong> <a href="0689.html">udo klasmeier: "[cc65] Probleme mit File-IO ( die 2te )"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0691.html">Marc 'BlackJack' Rintsch: "Re: [cc65] Probleme mit File-IO ( die 2te )"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:41 CET</em>
</em>
</small>
</body>
</html>
