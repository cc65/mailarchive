<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Interrupts and break</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Interrupts and break">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Interrupts and break</h1>
<!-- received="Sun Sep 30 20:13:09 2001" -->
<!-- isoreceived="20010930181309" -->
<!-- sent="Sun, 30 Sep 2001 20:13:15 +0200" -->
<!-- isosent="20010930181315" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Interrupts and break" -->
<!-- id="20010930201315.C6345@trixie.musoftware.de" -->
<!-- inreplyto="200109301801.UAA01270@color.sics.se" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Interrupts%20and%20break"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2001-09-30 20:13:15
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="../2001-10/0767.html">Daniel Berntsson: "Re: [cc65] Interrupts and break"</a>
<li><strong>Previous message:</strong> <a href="0765.html">Adam Dunkels: "Re: [cc65] Interrupts and break"</a>
<li><strong>In reply to:</strong> <a href="0765.html">Adam Dunkels: "Re: [cc65] Interrupts and break"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0764.html">Ullrich von Bassewitz: "Re: [cc65] Interrupts and break"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Sun, Sep 30, 2001 at 08:01:23PM +0200, Adam Dunkels wrote:
&gt; &gt;From the code it seems as if it is some 30 bytes that needs to be
&gt; swapped/saved. When switching from normal to interrupt context, it should be
&gt; possible to avoid swapping the contents of the stack (which would be needed
&gt; for multiple threads).

You don't need to save the contents of the stack, but switching the stack
itself is needed. This is because the routines that manipulate the stack
pointer are not reentrant (they work on 8 bits per insn while the stack
pointer is a 16 bit value). It would be possible to make these manipulations
interrupt safe by disabling/enabling interrupts, but this would impose a
penalty on all programs, not just those that have an interrupt handler written
in C, so I've decided against it.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Interrupts%20and%20break">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Interrupts%20and%20break">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="../2001-10/0767.html">Daniel Berntsson: "Re: [cc65] Interrupts and break"</a>
<li><strong>Previous message:</strong> <a href="0765.html">Adam Dunkels: "Re: [cc65] Interrupts and break"</a>
<li><strong>In reply to:</strong> <a href="0765.html">Adam Dunkels: "Re: [cc65] Interrupts and break"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0764.html">Ullrich von Bassewitz: "Re: [cc65] Interrupts and break"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2001-12-14 22:05:42 CET</em>
</em>
</small>
</body>
</html>
