<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: [cc65] possible bug?</title>
<meta name="Author" content="groepaz (groepaz_at_gmx.net)">
<meta name="Subject" content="[cc65] possible bug?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>[cc65] possible bug?</h1>
<!-- received="Sat Feb 23 16:25:41 2002" -->
<!-- isoreceived="20020223152541" -->
<!-- sent="Sat, 23 Feb 2002 16:25:23 +0100" -->
<!-- isosent="20020223152523" -->
<!-- name="groepaz" -->
<!-- email="groepaz_at_gmx.net" -->
<!-- subject="[cc65] possible bug?" -->
<!-- id="1383991387.20020223162523@gmx.net" -->
<!-- inreplyto="000e01c1bc58$7a63f680$d8f2fea9@palace" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> groepaz (<a href="mailto:groepaz_at_gmx.net?Subject=Re:%20[cc65]%20possible%20bug?"><em>groepaz_at_gmx.net</em></a>)<br>
<strong>Date:</strong> 2002-02-23 16:25:23
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1144.html">Greg King: "Re: Re[2]: [cc65] Character set translation"</a>
<li><strong>In reply to:</strong> <a href="1144.html">Greg King: "Re: Re[2]: [cc65] Character set translation"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1147.html">Ullrich von Bassewitz: "Re: [cc65] possible bug?"</a>
<li><strong>Next in thread:</strong> <a href="1142.html">Ullrich von Bassewitz: "Re: [cc65] Character set translation"</a>
<li><strong>Reply:</strong> <a href="1147.html">Ullrich von Bassewitz: "Re: [cc65] possible bug?"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
ok i _think_ this is a bug connected to assignment operator and/or
casting.... automatic sign-extension broken?!

; asm routine:

signedsin:  .byte $80,...

_SINUS:
            tax
            lda signedsin,x
            ; func returns &quot;char&quot; so we silently forget about
            ; putting 0 to X....
            rts

// c-code:
            
signed char SINUS(signed char a);

void main(){
signed char a;
int b;
            a=SINUS(0);
            printf(&quot;%04x\n&quot;,a);    // prints &quot;0080&quot;, ok
            b=(int)SINUS(0);
            printf(&quot;%04x\n&quot;,b);    // prints &quot;0080&quot;, error
                                   // should be &quot;ff80&quot;

}

in other words, if a (asm-) function that is declared &quot;signed char&quot; is
called and the value casted to an int, shouldnt the COMPILER generate
necessary code to do the required sign-extension? (it works ok ofcoz
if i add that myself to the asm routine, but i really dont like the
idea to cram code here and there that in most cases isnt used anyway)

-- 
Best regards,
 groepaz                            mailto:<a href="mailto:groepaz_at_gmx.net?Subject=Re:%20[cc65]%20possible%20bug?">groepaz_at_gmx.net</a>


----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20possible%20bug?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1144.html">Greg King: "Re: Re[2]: [cc65] Character set translation"</a>
<li><strong>In reply to:</strong> <a href="1144.html">Greg King: "Re: Re[2]: [cc65] Character set translation"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1147.html">Ullrich von Bassewitz: "Re: [cc65] possible bug?"</a>
<li><strong>Next in thread:</strong> <a href="1142.html">Ullrich von Bassewitz: "Re: [cc65] Character set translation"</a>
<li><strong>Reply:</strong> <a href="1147.html">Ullrich von Bassewitz: "Re: [cc65] possible bug?"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-02-23 16:25:52 CET</em>
</em>
</small>
</body>
</html>
