<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] possible bug?</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] possible bug?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] possible bug?</h1>
<!-- received="Sun Feb 24 20:05:58 2002" -->
<!-- isoreceived="20020224190558" -->
<!-- sent="Sun, 24 Feb 2002 20:06:03 +0100" -->
<!-- isosent="20020224190603" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] possible bug?" -->
<!-- id="20020224200603.B16412@trixie.musoftware.de" -->
<!-- inreplyto="1383991387.20020223162523@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20possible%20bug?"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-02-24 20:06:03
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1146.html">Big Boy Toddy: "[cc65] authorization"</a>
<li><strong>In reply to:</strong> <a href="1145.html">groepaz: "[cc65] possible bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1142.html">Ullrich von Bassewitz: "Re: [cc65] Character set translation"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Good evening and sorry for the delay, I've been out of town.

On Sat, Feb 23, 2002 at 04:25:23PM +0100, groepaz wrote:
&gt; in other words, if a (asm-) function that is declared &quot;signed char&quot; is
&gt; called and the value casted to an int, shouldnt the COMPILER generate
&gt; necessary code to do the required sign-extension?

The compiler expects the default promotions to be applied when the value is
loaded into the primary register. This means that an assembler function
returning a character must always return a widened value in a/x.

The reason for this is simple: There are no operators defined on characters.
The C standard defines that the following expression will be evaluated using
integer types yielding a correct result (20000):

	unsigned char a = 100;
	unsigned char b = 200;
	int c = a * b;

As usual, the &quot;as if&quot; rule does also hold, so the compiler is free to evaluate
an expression using smaller types, provided that this does not change the
result of the expression. cc65 does this in some, but not all cases.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20possible%20bug?">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20possible%20bug?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1146.html">Big Boy Toddy: "[cc65] authorization"</a>
<li><strong>In reply to:</strong> <a href="1145.html">groepaz: "[cc65] possible bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1142.html">Ullrich von Bassewitz: "Re: [cc65] Character set translation"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-02-24 20:06:12 CET</em>
</em>
</small>
</body>
</html>
