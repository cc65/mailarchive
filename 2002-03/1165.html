<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] bug?</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] bug?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] bug?</h1>
<!-- received="Fri Mar 15 14:56:35 2002" -->
<!-- isoreceived="20020315135635" -->
<!-- sent="Fri, 15 Mar 2002 14:56:39 +0100" -->
<!-- isosent="20020315135639" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] bug?" -->
<!-- id="20020315145639.A22009@trixie.musoftware.de" -->
<!-- inreplyto="17211447446.20020315141426@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20bug?"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-03-15 14:56:39
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1164.html">groepaz: "[cc65] bug?"</a>
<li><strong>In reply to:</strong> <a href="1164.html">groepaz: "[cc65] bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1166.html">groepaz: "Re[2]: [cc65] bug?"</a>
<li><strong>Reply:</strong> <a href="1166.html">groepaz: "Re[2]: [cc65] bug?"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Fri, Mar 15, 2002 at 02:14:26PM +0100, groepaz wrote:
&gt; when i took some code originally made with cc65 and compiled it using
&gt; gcc, it started behaving strange, and i could track down the error to
&gt; a line
&gt;
&gt;        y2=((y1*c))-((z1*s))&gt;&gt;8;  (notice the _wrong_ braces, this
&gt;                                   worked like intended in cc65!!!)
&gt;
&gt; which should correctly look like
&gt;
&gt;        y2=((y1*c)-(z1*s))&gt;&gt;8;
&gt;
&gt; ....so, the fact that it worked before implies that there maybe a bug
&gt; with the expression evaluation in cc65? any ideas?

The C standard says that the binary minus operator has a higher precedence
than the shift operator, so both expressions must evaluate identical, which in
turn means that cc65 is doing the right thing. I cannot really believe that
gcc has a problem in this area, because this is quite a basic thing, and gcc
has a lot more users than cc65 (so the chance of a bug being detected is much
higher than with cc65).

Maybe something else is wrong with your code? Two ideas that come to mind:

  * Signedness problems: If any one of the variables used in the expression is
    actually a character, your code may behave strange on some platforms for
    values &gt; 127, because characters may be signed data types. As a rule of
    thumb, you should always specify your characters as &quot;signed&quot; or
    &quot;unsigned&quot;, if you use them as small numbers and not as actual characters.

  * Range problems: cc65 has 16 bit ints. So if your code relies on the fact
    that anything greater than 16 bit is silently dropped, it may not work
    well on most platforms supported by gcc, because on these platforms, ints
    are often 32 bits.

Regards


   	Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20bug?">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20bug?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1164.html">groepaz: "[cc65] bug?"</a>
<li><strong>In reply to:</strong> <a href="1164.html">groepaz: "[cc65] bug?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1166.html">groepaz: "Re[2]: [cc65] bug?"</a>
<li><strong>Reply:</strong> <a href="1166.html">groepaz: "Re[2]: [cc65] bug?"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-03-15 14:56:41 CET</em>
</em>
</small>
</body>
</html>
