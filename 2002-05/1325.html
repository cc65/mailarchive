<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Atari File I/O again</title>
<meta name="Author" content="Shawn Jefferson (sjefferson_at_sd62.bc.ca)">
<meta name="Subject" content="Re: [cc65] Atari File I/O again">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Atari File I/O again</h1>
<!-- received="Thu May 16 17:08:17 2002" -->
<!-- isoreceived="20020516150817" -->
<!-- sent="Thu, 16 May 2002 08:07:52 -0700" -->
<!-- isosent="20020516150752" -->
<!-- name="Shawn Jefferson" -->
<!-- email="sjefferson_at_sd62.bc.ca" -->
<!-- subject="Re: [cc65] Atari File I/O again" -->
<!-- id="sce368f1.085@gwmail.sd62.bc.ca" -->
<!-- inreplyto="[cc65] Atari File I/O again" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Shawn Jefferson (<a href="mailto:sjefferson_at_sd62.bc.ca?Subject=Re:%20[cc65]%20Atari%20File%20I/O%20again"><em>sjefferson_at_sd62.bc.ca</em></a>)<br>
<strong>Date:</strong> 2002-05-16 17:07:52
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1324.html">Christian Groessler: "Re: [cc65] Atari File I/O again"</a>
<li><strong>Maybe in reply to:</strong> <a href="1313.html">Shawn Jefferson: "[cc65] Atari File I/O again"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
&gt;Hi,
&gt;
&gt;On 05/14/2002 12:36:57 PM MST &quot;Shawn Jefferson&quot; wrote:
&gt;&gt;
&gt;&gt;However, the program doesn't signal FEOF ever, and the the program
&gt;&gt;just keeps reading from the file past the end until the emulator
&gt;&gt;locks up or I hit RESET.
&gt;&gt;
&gt;&gt;I took a look into the source, and I don't fully understand it, but
&gt;&gt;shouldn't read.s in the atari library be setting a flag for EOF in
&gt;&gt;the file pointer structure somehow, instead of just BEQing to done?
&gt;
&gt;The read function returns the # of bytes read, so should 0 in EOF
&gt;case. 
&gt;I don't know right now whether ICBLL and ICBLH are updated by the CIO
&gt;function. If they are not then the bug is in the read function here.

Sorry Chris, further testing shows that it does return EOF just fine... it's just that AtariDOS and SpartaDOS deal with files and the various filemodes differently.

I did send you a message with my ATR of Sparta and the test program... I guess you didn't get it, I will send it again.



----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Atari%20File%20I/O%20again">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1324.html">Christian Groessler: "Re: [cc65] Atari File I/O again"</a>
<li><strong>Maybe in reply to:</strong> <a href="1313.html">Shawn Jefferson: "[cc65] Atari File I/O again"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-05-16 17:08:30 CEST</em>
</em>
</small>
</body>
</html>
