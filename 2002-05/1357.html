<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] statics in zero page</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] statics in zero page">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] statics in zero page</h1>
<!-- received="Tue May 21 15:27:06 2002" -->
<!-- isoreceived="20020521132706" -->
<!-- sent="Tue, 21 May 2002 15:27:09 +0200" -->
<!-- isosent="20020521132709" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] statics in zero page" -->
<!-- id="20020521152709.B17705@trixie.musoftware.de" -->
<!-- inreplyto="10DF6DB2771A934086EF4B4DD03AD76F0AB46D@pacemail.pace.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20statics%20in%20zero%20page"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-05-21 15:27:09
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1356.html">Ullrich von Bassewitz: "Re: [cc65] statics in zero page"</a>
<li><strong>In reply to:</strong> <a href="1350.html">Christian Krüger: "[cc65] statics in zero page"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1358.html">groepaz: "Re[2]: [cc65] statics in zero page"</a>
<li><strong>Reply:</strong> <a href="1358.html">groepaz: "Re[2]: [cc65] statics in zero page"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Tue, May 21, 2002 at 01:03:42PM +0200, Christian Krüger wrote:
&gt; Now, where I managed to build a little test project for the
&gt; Lynx under cc65, I like to ask if there is a feature
&gt; which allows to place static variables into zero page
&gt; for quicker access?

I've decided against adding this for a couple of reasons:

  1. Most systems supported have very limited zeropage space. Adding zero page
     variables would be highly non portable, because one system has X bytes of
     zp space available, and the other one has Y bytes instead.

  2. Only the linker can decide how much zero page space is available and if
     the program uses more zero page space than available. Wouldn't you hate
     a library that uses all of your precious zero page space?

  3. Since cc65 (this is also true for the Lynx version) has no concept of
     real zero page registers, it will only use the zero page variables as
     storage, not as registers. This means, that it won't use something like

        lda     (zp),y

     with a zero page variable. All you gain is one cycle per access when
     storing and loading.

IMHO, there are a lot of better and more portable chances to squeeze a cycle
out of your code than using one byte of 30 or 40 bytes of the total available
zero page space.

&gt; Is there anything similar in cc65 2.8 like 'interrupt' in the
&gt; Lynx-Adaption?

No. As far as I remember, the Lynx cc65 had race problems in the code
generated by the &quot;interrupt&quot; keyword, at least this was true at one time,
don't know if it has been fixed. I do usually suggest to write interrupt
handlers in assembler, because the overhead involved for an interrupt handler
in C is quite large (all registers have to be saved, all zero page variables
have to be saved and a separate stack is needed). Writing the wrapper in C
will at least make the overhead visible instead of hiding it.

There have been discussions about this some time ago (may be it's already in
the mailing list archive). If anyone wants to spend some work on it, I would
prefer a library solution over an additional compiler keyword.

&gt; (<a href="http://www.geocities.com/SiliconValley/Byte/4242/lynx/cc65notes.html">http://www.geocities.com/SiliconValley/Byte/4242/lynx/cc65notes.html</a>
&gt; for details and other cool features...)

I had long discussions with Bastian42 a few years ago. BTW: Does anybody know
what happened to him? The Lynx cc65 has not been updated for quite some time
now...

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20statics%20in%20zero%20page">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20statics%20in%20zero%20page">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1356.html">Ullrich von Bassewitz: "Re: [cc65] statics in zero page"</a>
<li><strong>In reply to:</strong> <a href="1350.html">Christian Krüger: "[cc65] statics in zero page"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1358.html">groepaz: "Re[2]: [cc65] statics in zero page"</a>
<li><strong>Reply:</strong> <a href="1358.html">groepaz: "Re[2]: [cc65] statics in zero page"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-05-21 15:27:19 CEST</em>
</em>
</small>
</body>
</html>
