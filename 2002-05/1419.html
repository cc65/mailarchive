<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: Re[2]: [cc65] C64 high res color</title>
<meta name="Author" content="Stephan Lesch (slesch_at_studcs.uni-sb.de)">
<meta name="Subject" content="Re: Re[2]: [cc65] C64 high res color RAM">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: Re[2]: [cc65] C64 high res color RAM</h1>
<!-- received="Tue May 28 22:55:26 2002" -->
<!-- isoreceived="20020528205526" -->
<!-- sent="Tue, 28 May 2002 22:55:30 +0200 (CEST)" -->
<!-- isosent="20020528205530" -->
<!-- name="Stephan Lesch" -->
<!-- email="slesch_at_studcs.uni-sb.de" -->
<!-- subject="Re: Re[2]: [cc65] C64 high res color RAM" -->
<!-- id="200205282055.g4SKtUq96892@xcip2.studcs.uni-sb.de" -->
<!-- inreplyto="371428652.20020528223321@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Stephan Lesch (<a href="mailto:slesch_at_studcs.uni-sb.de?Subject=Re:%20Re[2]:%20[cc65]%20C64%20high%20res%20color%20RAM"><em>slesch_at_studcs.uni-sb.de</em></a>)<br>
<strong>Date:</strong> 2002-05-28 22:55:30
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1418.html">groepaz: "Re[3]: [cc65] C64 high res color RAM"</a>
<li><strong>In reply to:</strong> <a href="1417.html">groepaz: "Re[2]: [cc65] C64 high res color RAM"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi Groepaz,

&gt; uhmz not so easy to explain i guess.... the point is, that it will
&gt; crash before the interupt routine is even started (ie, one or two
&gt; cycles after the interupt occurs). that is, when the vic tries to
&gt; update flags in eg $d019, and the i/o is banked out something weird
&gt; happens...maybe the vic writes to its own registers simelar to the cpu
&gt; would? i have no idea really :=P

Naaah... unless I'm totally mistaken, the VIC accesses its registers 
internally. And the theory about the working of the VIC says that the flag in
d019 gets set when the current raster line in d012/11 equals the latched 
one, and an interrupt is raised if d019&amp;&amp;d01a !=0.

&gt; but try it :o) _maybe_ that weird behaviour requires other
&gt; circumstances than just banked out i/o aswell.... it occured to me
&gt; while coding demos that is, never actually bothered doing a simple
&gt; test like this: (maybe you do? ;=)))

Ok, I'll try that :)
Hm, if you do it as down below, without banking in the IO in the interrupt
routine, you'll shoot the routine instead of resetting the VIC's irq flag .
well, the one below isn't long enough to get shot:)

&gt;        *=$d000
&gt; 
&gt; irq:
&gt;        pha
&gt;        lda $01
&gt;        pha
&gt; 
&gt;        ; do stuff
&gt;        inc $d020
&gt;        
&gt;        lda $d019    ; inc $d019 aint scpu-safe
&gt;        sta $d019
&gt;        
&gt;        pla
&gt;        sta $01
&gt;        pla
&gt;        rti
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20Re[2]:%20[cc65]%20C64%20high%20res%20color%20RAM">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1418.html">groepaz: "Re[3]: [cc65] C64 high res color RAM"</a>
<li><strong>In reply to:</strong> <a href="1417.html">groepaz: "Re[2]: [cc65] C64 high res color RAM"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-05-28 22:55:30 CEST</em>
</em>
</small>
</body>
</html>
