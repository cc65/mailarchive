<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] k&amp;r c</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] k&amp;r c">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] k&amp;r c</h1>
<!-- received="Mon Jun 10 15:25:40 2002" -->
<!-- isoreceived="20020610132540" -->
<!-- sent="Mon, 10 Jun 2002 15:25:43 +0200" -->
<!-- isosent="20020610132543" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] k&amp;r c" -->
<!-- id="20020610152543.B10075@trixie.musoftware.de" -->
<!-- inreplyto="877klb9p6d.fsf@panther.aladdin.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20k&amp;r%20c"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-06-10 15:25:43
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1431.html">Christian Groessler: "RE: [cc65] k&amp;r c"</a>
<li><strong>In reply to:</strong> <a href="1429.html">Christian Groessler: "[cc65] k&amp;r c"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1439.html">Ullrich von Bassewitz: "Re: [cc65] k&amp;r c"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

Sorry for the late answer, I have been busy and out of town for a few days.

On Fri, Jun 07, 2002 at 03:46:50PM +0200, Christian Groessler wrote:
[return from k&amp;r function]

&gt; I recently tried to compile a k&amp;r c program with cc65 and found some
&gt; inconstistent behaviour.

&gt; Consider the following code
&gt;
&gt; ---------
&gt; bla(s)
&gt;      int s;
&gt; {
&gt;      if (s == 0)
&gt;          return;
&gt; }
&gt; ---------
&gt;
&gt; cc65 refuses to compile it, I get
&gt;
&gt; t.c(7): Error: Function `bla' must return a value
&gt;
&gt; If I replace the &quot;return;&quot; with &quot;return 0;&quot; it gets compiled.
&gt;

&gt; So my question, why is this an error and not a warning only?

Not returning anything from a function that returns something is definitely an
error - at least for new style (ANSI) functions. You are right however, for
K&amp;R functions, this should be relaxed, since there is no &quot;void&quot; type in K&amp;R,
so it is not possible to declare a function that returns nothing.

&gt; And, if it should be an error, why is it no error when I simply drop
&gt; out of the function without a return?

It is still an error (called &quot;undefined behaviour&quot; in the standard), but it is
not flagged by cc65, because the execution flow tracking done by cc65 is not
good enough to get all cases right. cc65 would flag quite some false
positives, so I've removed the error message in this case. Please note that
&quot;undefined behaviour&quot; does not need a diagnostic, so even if the treatment is
quite suboptimal, at least it's standard compliant:-)

Regards


	Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20k&amp;r%20c">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20k&amp;r%20c">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1431.html">Christian Groessler: "RE: [cc65] k&amp;r c"</a>
<li><strong>In reply to:</strong> <a href="1429.html">Christian Groessler: "[cc65] k&amp;r c"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1439.html">Ullrich von Bassewitz: "Re: [cc65] k&amp;r c"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-06-10 15:27:12 CEST</em>
</em>
</small>
</body>
</html>
