<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re[2]: [cc65] Bug Hunting Odysee</title>
<meta name="Author" content="groepaz (groepaz_at_gmx.net)">
<meta name="Subject" content="Re[2]: [cc65] Bug Hunting Odysee">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re[2]: [cc65] Bug Hunting Odysee</h1>
<!-- received="Wed Jul 17 01:02:39 2002" -->
<!-- isoreceived="20020716230239" -->
<!-- sent="Wed, 17 Jul 2002 01:02:29 +0200" -->
<!-- isosent="20020716230229" -->
<!-- name="groepaz" -->
<!-- email="groepaz_at_gmx.net" -->
<!-- subject="Re[2]: [cc65] Bug Hunting Odysee" -->
<!-- id="852980045.20020717010229@gmx.net" -->
<!-- inreplyto="20020716224419.GA10488@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> groepaz (<a href="mailto:groepaz_at_gmx.net?Subject=Re[2]:%20[cc65]%20Bug%20Hunting%20Odysee"><em>groepaz_at_gmx.net</em></a>)<br>
<strong>Date:</strong> 2002-07-17 01:02:29
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1491.html">Ullrich von Bassewitz: "Re: [cc65] Bug Hunting Odysee"</a>
<li><strong>In reply to:</strong> <a href="1491.html">Ullrich von Bassewitz: "Re: [cc65] Bug Hunting Odysee"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1490.html">groepaz: "Re[2]: [cc65] Bug Hunting Odysee"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hello Ullrich,

Wednesday, July 17, 2002, 12:44:19 AM, you wrote:

UvB&gt; What if two align commands may not be combined because they are contrary to
UvB&gt; each other like this:

UvB&gt; module1.s:
UvB&gt; --------------------
UvB&gt; Label1: .align  2
UvB&gt;         .byte   0
UvB&gt; --------------------

UvB&gt; module2.s:
UvB&gt; --------------------
UvB&gt; Label2: .align  2
UvB&gt;         .byte   0
UvB&gt; --------------------

UvB&gt; If both are bound together by the linker, either Label1 or Label2 is on an odd
UvB&gt; address if the assembler does not insert any alignment bytes. Assuming that
UvB&gt; the program starts at an even address does not help does, and moving the code
UvB&gt; at runtime does not help either.

if starts on even adress:

label1:   .byte 0
          .byte fill
label2:   .byte 0

if starts on odd adress:

          .byte fill
label1:   .byte 0
          .byte fill
label2:   .byte 0

&gt;&gt; Maybe I missed the point of the problem, or left out some thoughts.

UvB&gt; It is not really a problem, I was just hoping that groepaz complaint about
UvB&gt; .align meant that he had a better solution than the current one. It is of
UvB&gt; course possible to use .align if the program itself starts at an address
UvB&gt; aligned to align-value, and the linker will even warn you if this condition is
UvB&gt; not satisfied. However, code on the C64 starts at $801, so the prerequisites
UvB&gt; for using .align are not there.

well sorry, i still dont get it :=P from my understanding, when i
write .align &lt;something&gt; somewhere in my code, the linker should be
able to put the symbol at a properly aligned adress (no matter where
the binary starts, that argument is funny really :=P as if you couldnt
calculate offsets from an odd adress :=)). it is ofcoz another
question how the linker solves that task, but its for sure no real
problem to implement. gcc's linker does it by simply inserting
padding-bytes for eg (and keeps wasted memory low by certain options
for sorting symbols). however in a 6510 environment there wont be to
many cases where you'd use .align in a way like that anyway, so wasted
memory shouldnt be much of an issue. much less than occasional bugs
caused by wrong alignment atleast ;=P

and however, the original cause for my complaint is a _classic_ case
where you'd use the .align feature of an assembler. really, if its not
useable for this (or only under limitations) its not quite useful at
all IMHO.

-- 
Best regards,
 groepaz                            mailto:<a href="mailto:groepaz_at_gmx.net?Subject=Re[2]:%20[cc65]%20Bug%20Hunting%20Odysee">groepaz_at_gmx.net</a>


----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re[2]:%20[cc65]%20Bug%20Hunting%20Odysee">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1491.html">Ullrich von Bassewitz: "Re: [cc65] Bug Hunting Odysee"</a>
<li><strong>In reply to:</strong> <a href="1491.html">Ullrich von Bassewitz: "Re: [cc65] Bug Hunting Odysee"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1490.html">groepaz: "Re[2]: [cc65] Bug Hunting Odysee"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-07-17 01:02:46 CEST</em>
</em>
</small>
</body>
</html>
