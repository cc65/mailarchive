<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Bank Switching</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Bank Switching">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Bank Switching</h1>
<!-- received="Sat Sep 21 00:27:07 2002" -->
<!-- isoreceived="20020920222707" -->
<!-- sent="Sat, 21 Sep 2002 00:27:14 +0200" -->
<!-- isosent="20020920222714" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Bank Switching" -->
<!-- id="20020920222714.GE17327@trixie.musoftware.de" -->
<!-- inreplyto="sd8af420.005@gwmail.sd62.bc.ca" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Bank%20Switching"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-09-21 00:27:14
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1574.html">Ullrich von Bassewitz: "Re: [cc65] Bank Switching"</a>
<li><strong>In reply to:</strong> <a href="1571.html">Shawn Jefferson: "Re: [cc65] Bank Switching"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1573.html">Shawn Jefferson: "Re: [cc65] Bank Switching"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Fri, Sep 20, 2002 at 10:10:13AM -0700, Shawn Jefferson wrote:
&gt; Ok, two problems: one the linker complains about the type = empty, saying
&gt; that &quot;a type is expected&quot;, changed it to rw.

&quot;type = empty&quot; is only allowed for segments. It is used to discard a segment
and avoid having the linker output a warning. There is no need to use it for a
memory area.

&gt; Second, the executable does not
&gt; work when compiled with this config file.  The only executables I've been able
&gt; to use have been with a plain vanilla config file.

This is probably because the &quot;BANK&quot; memory area is empty. Are you loading the
resulting output file with the standard commands of the operating system? If
so, you have a problem. The layout of your output file looks like this:

1.      +------------+
        |   Header   |
        +------------+ &lt;- $2000
        |    RAM1    |
        +------------+ &lt;- $2000 + length of RAM1
        |    RAM2    |
        +------------+

Since BANK is empty (there are no segments written to this memory area), no
output is generated for this memory area. What you have to do is to use the
&quot;fill = yes&quot; attribute for the RAM1 and BANK segments to make sure the output
file looks like this:

2.      +------------+
        |   Header   |
        +------------+ &lt;- $2000
        |    RAM1    |
        +- - - - - - + &lt;- $2000 + length of RAM1
        |   Unused   |
        +------------+ &lt;- $4000
        |    BANK    |
        |  (Unused)  |
        +------------+ &lt;- $8000
        |    RAM2    |
        +------------+

You can then load the resulting binary. It will overwrite the memory in BANK
with useless garbage, but should work otherwise.

If you don't want to overwrite the memory in BANK, you will have to use a
custom solution that loads both RAM areas in separate steps. However, this is
not a cc65 problem but one of your environment.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Bank%20Switching">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Bank%20Switching">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1574.html">Ullrich von Bassewitz: "Re: [cc65] Bank Switching"</a>
<li><strong>In reply to:</strong> <a href="1571.html">Shawn Jefferson: "Re: [cc65] Bank Switching"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1573.html">Shawn Jefferson: "Re: [cc65] Bank Switching"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-09-21 00:27:13 CEST</em>
</em>
</small>
</body>
</html>
