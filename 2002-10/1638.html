<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Atari DIO</title>
<meta name="Author" content="Christian Groessler (cpg_at_aladdin.de)">
<meta name="Subject" content="Re: [cc65] Atari DIO">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Atari DIO</h1>
<!-- received="Thu Oct 24 17:45:19 2002" -->
<!-- isoreceived="20021024154519" -->
<!-- sent="Thu, 24 Oct 2002 17:45:20 +0200" -->
<!-- isosent="20021024154520" -->
<!-- name="Christian Groessler" -->
<!-- email="cpg_at_aladdin.de" -->
<!-- subject="Re: [cc65] Atari DIO" -->
<!-- id="200210241545.RAA25421@panther.aladdin.de" -->
<!-- inreplyto="[cc65] Atari DIO" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Christian Groessler (<a href="mailto:cpg_at_aladdin.de?Subject=Re:%20[cc65]%20Atari%20DIO"><em>cpg_at_aladdin.de</em></a>)<br>
<strong>Date:</strong> 2002-10-24 17:45:20
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1637.html">Ullrich von Bassewitz: "Re: [cc65] (stupid ?) newbie question"</a>
<li><strong>Maybe in reply to:</strong> <a href="1627.html">Shawn Jefferson: "[cc65] Atari DIO"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1648.html">Shawn Jefferson: "Re: [cc65] Atari DIO"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi,

On 10/23/2002 10:18:04 AM MST &quot;Shawn Jefferson&quot; wrote:
&gt;
&gt;I have some questions about the Atari dio routines:
&gt;
&gt;1. What is the syntax for calling dio_open?  The docs say that you
&gt;use 0 for drive 1, and so on.  I want to open drive 6 for read and
&gt;drive 7 for write.
&gt;
&gt;2. Trying to open these drives gives me _oserror = 130, nonexistant
&gt;device.  Am I running into a problem of the library only being able
&gt;to access 4 drives hard-coded into it?  This is using Sparta where I
&gt;can have 8-9 drives available at once (16 if you use SpartaDos X
&gt;IIRC.)

Yes, 4 drives are hardcoded, since memory is reserved statically for
each one.
It's easy to change if you recompile the library, adjust this line

ATARIDEFS = -DNUMDRVS=4 -DUCASE_FILENAME=1

in libsrc/atari/Makefile. NUMDRVS is the # of supported disk drives.
I can build you a version with higher NUMDRVS if you want...

&gt;
&gt;3. Christian, would you be willing to fix the code around sector
&gt;size, so that it is not hardcoded at 128, but rather we could change
&gt;it ourselves?  Knowing the sector size in my application is not a
&gt;problem, so if I could set it manually that would be great!  I'm not
&gt;worried about autodetecting it.

Such a function would be a hack only, since you anyway cannot change
the sector size. So I won't add it to the cc65 lib.
As workaround I can provide you a small assembler function which you
can call to set the sector size by hand, but for the official lib I'd
like to have a way to autodetect it.

I have a xf551 which supports 256 byte sectors. Does anyone of the
atarians on this list know how to detect the disk format of an
inserted disk? Preferably not with SpartaDOS calls but with SIO
commands...

Btw, why do you think &quot;Knowing the sector size in my application is
not a problem?&quot; It depends on which disk the user inserted...

regards,
chris

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Atari%20DIO">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1637.html">Ullrich von Bassewitz: "Re: [cc65] (stupid ?) newbie question"</a>
<li><strong>Maybe in reply to:</strong> <a href="1627.html">Shawn Jefferson: "[cc65] Atari DIO"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1648.html">Shawn Jefferson: "Re: [cc65] Atari DIO"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-10-24 17:45:35 CEST</em>
</em>
</small>
</body>
</html>
