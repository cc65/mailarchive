<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Atari DIO</title>
<meta name="Author" content="Christian Groessler (cpg_at_aladdin.de)">
<meta name="Subject" content="Re: [cc65] Atari DIO">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Atari DIO</h1>
<!-- received="Mon Oct 28 23:58:05 2002" -->
<!-- isoreceived="20021028225805" -->
<!-- sent="28 Oct 2002 23:57:31 +0100" -->
<!-- isosent="20021028225731" -->
<!-- name="Christian Groessler" -->
<!-- email="cpg_at_aladdin.de" -->
<!-- subject="Re: [cc65] Atari DIO" -->
<!-- id="877kg2uq78.fsf@power.cnet.aladdin.de" -->
<!-- inreplyto="[cc65] Atari DIO" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Christian Groessler (<a href="mailto:cpg_at_aladdin.de?Subject=Re:%20[cc65]%20Atari%20DIO"><em>cpg_at_aladdin.de</em></a>)<br>
<strong>Date:</strong> 2002-10-28 23:57:31
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1665.html">Christian Groessler: "Re: [cc65] Atari sector size detection"</a>
<li><strong>Maybe in reply to:</strong> <a href="1627.html">Shawn Jefferson: "[cc65] Atari DIO"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1668.html">Ullrich von Bassewitz: "Re: [cc65] Atari DIO"</a>
<li><strong>Next in thread:</strong> <a href="1667.html">Shawn Jefferson: "Re: [cc65] Atari DIO"</a>
<li><strong>Reply:</strong> <a href="1668.html">Ullrich von Bassewitz: "Re: [cc65] Atari DIO"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi,

On 10/28/2002 12:02:22 PM PST &quot;Shawn Jefferson&quot; wrote:
&gt;
&gt;&gt;&gt;&gt; Christian Groessler &lt;<a href="mailto:cpg_at_aladdin.de?Subject=Re:%20[cc65]%20Atari%20DIO">cpg_at_aladdin.de</a>&gt; 10/24/02 08:45AM &gt;&gt;&gt;
&gt;
&gt;&gt;&gt;3. Christian, would you be willing to fix the code around sector
&gt;&gt;&gt;size, so that it is not hardcoded at 128, but rather we could change
&gt;&gt;&gt;it ourselves?  Knowing the sector size in my application is not a
&gt;&gt;&gt;problem, so if I could set it manually that would be great!  I'm not
&gt;&gt;&gt;worried about autodetecting it.
&gt;&gt;
&gt;&gt;Such a function would be a hack only, since you anyway cannot change
&gt;&gt;the sector size. So I won't add it to the cc65 lib.
&gt;&gt;As workaround I can provide you a small assembler function which you
&gt;&gt;can call to set the sector size by hand, but for the official lib I'd
&gt;&gt;like to have a way to autodetect it.
&gt;
&gt;Hi Chris,
&gt;
&gt;Couldn't I just write into the sectsizetab * 4 * drive number?  That
&gt;would be easy enough.  Is there some way to reference the sectsizetab
&gt;from my source code?

This would be what my &quot;small assembler function&quot; would have done. You
cannot do it since the sectsizetab variable is invisible to C (no
starting '_').


&gt;I still think it would be nice to not have to build a separate
&gt;library for supporting system with more than 4 drives.  It would be
&gt;nice if there was some way to assign the memory for this dynamically.
&gt;Is there some reason that you couldn't alloc memory in dio_open for
&gt;each handle, and then free it in dio_close?  I guess that would
&gt;equate to less memory, but a little more overhead.

I think the code needed to access the sectsizetab indirectly would
increase (and complicate) the code quite a bit. So I like to stay with
the compile time define.
One year ago an empty Atari program was already the biggest of all
ports. (Maybe some other port catched up in the meantime?) So I set it
to 4 drives.

Is recompiling really such a problem?
If yes, what do you Atari users on the list think is a good default
value? I think 16 is the maximum possible SIO-wise, it would consume
64 bytes :-(

&gt;
&gt;&gt;Btw, why do you think &quot;Knowing the sector size in my application is
&gt;&gt;not a problem?&quot; It depends on which disk the user inserted...
&gt;
&gt;I answered this previously, but thought I would mention it again in
&gt;case you missed it.  I will always know the sector size in my
&gt;application since it is contained in the partition table.

How is your hard disk connected? I don't have a hd on my Atari
(yet?).

regards,
chris

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Atari%20DIO">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1665.html">Christian Groessler: "Re: [cc65] Atari sector size detection"</a>
<li><strong>Maybe in reply to:</strong> <a href="1627.html">Shawn Jefferson: "[cc65] Atari DIO"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1668.html">Ullrich von Bassewitz: "Re: [cc65] Atari DIO"</a>
<li><strong>Next in thread:</strong> <a href="1667.html">Shawn Jefferson: "Re: [cc65] Atari DIO"</a>
<li><strong>Reply:</strong> <a href="1668.html">Ullrich von Bassewitz: "Re: [cc65] Atari DIO"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-10-28 23:58:08 CET</em>
</em>
</small>
</body>
</html>
