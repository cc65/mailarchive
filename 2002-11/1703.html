<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] File I/O on C64</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] File I/O on C64">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] File I/O on C64</h1>
<!-- received="Wed Nov 13 22:56:21 2002" -->
<!-- isoreceived="20021113215621" -->
<!-- sent="Wed, 13 Nov 2002 22:56:19 +0100" -->
<!-- isosent="20021113215619" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] File I/O on C64" -->
<!-- id="20021113215619.GC18279@trixie.musoftware.de" -->
<!-- inreplyto="004701c28b55$36e7d800$6500a8c0@briandvwzriudd" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20File%20I/O%20on%20C64"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-11-13 22:56:19
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1702.html">Ullrich von Bassewitz: "Re: [cc65] supercpu.c"</a>
<li><strong>In reply to:</strong> <a href="1699.html">Brian Bagnall: "Re: [cc65] File I/O on C64"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1705.html">Spiro Trikaliotis: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1705.html">Spiro Trikaliotis: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1708.html">Brian Bagnall: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1731.html">groepaz: "Re[2]: [cc65] File I/O on C64"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Wed, Nov 13, 2002 at 02:42:42PM -0600, Brian Bagnall wrote:
&gt; I'm pretty new to C but since Marc already supplied the necessary functions
&gt; in cbm.h then it should be as easy as making a wrapper only. I kind of
&gt; wonder if there are technical reasons why Marc didn't implement stdio
&gt; himself.

While I wouldn't say it is really complex, it is definitely more work than
just adding a wrapper. Possible problems are:

  * You cannot use the handles of the CBM kernal, so you have to use an
    additional translation between kernal handles and C handles.

  * The behaviour specified by the C standard and the implementation of file
    I/O in the commodore drives are sometimes highly incompatible. For
    example, it is impossible to open a file for reading and writing.

  * You need to talk to the device over the command channel to find out about
    disk errors.

&gt; I looked at fctrl.h and it looks like only about 6 functions need to be
&gt; defined. Two of them can't be defined (mkdir, rmdir), since the 1541 has no
&gt; ability to make directories. How should it deal with this problem?

The easiest way would be not to implement these functions. Programs using them
would not link successfully (which is better to have an executable that is not
working correctly).

&gt; Also, there were 1571 drives, and even hard drives released for the c64. Is
&gt; there a strategy to program this so it would not close the door on people
&gt; using other types of drives?

When using standard kernal calls, supporting the 1571 or even CMD hardware
should not be a problem.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20File%20I/O%20on%20C64">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20File%20I/O%20on%20C64">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1702.html">Ullrich von Bassewitz: "Re: [cc65] supercpu.c"</a>
<li><strong>In reply to:</strong> <a href="1699.html">Brian Bagnall: "Re: [cc65] File I/O on C64"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1705.html">Spiro Trikaliotis: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1705.html">Spiro Trikaliotis: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1708.html">Brian Bagnall: "Re: [cc65] File I/O on C64"</a>
<li><strong>Reply:</strong> <a href="1731.html">groepaz: "Re[2]: [cc65] File I/O on C64"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-11-13 22:56:24 CET</em>
</em>
</small>
</body>
</html>
