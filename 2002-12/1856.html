<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Debug Information in Obje</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Debug Information in Objectfiles">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Debug Information in Objectfiles</h1>
<!-- received="Tue Dec  3 12:08:22 2002" -->
<!-- isoreceived="20021203110822" -->
<!-- sent="Tue, 3 Dec 2002 12:08:21 +0100" -->
<!-- isosent="20021203110821" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Debug Information in Objectfiles" -->
<!-- id="20021203110821.GB20854@trixie.musoftware.de" -->
<!-- inreplyto="200212030839.33856.groepaz@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Debug%20Information%20in%20Objectfiles"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-12-03 12:08:21
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1855.html">MagerValp: "Re: [cc65] Koala picture viewer"</a>
<li><strong>In reply to:</strong> <a href="1854.html">Groepaz: "[cc65] Debug Information in Objectfiles"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1875.html">Groepaz: "Re: [cc65] Debug Information in Objectfiles"</a>
<li><strong>Next in thread:</strong> <a href="1855.html">MagerValp: "Re: [cc65] Koala picture viewer"</a>
<li><strong>Reply:</strong> <a href="1875.html">Groepaz: "Re: [cc65] Debug Information in Objectfiles"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Tue, Dec 03, 2002 at 08:39:33AM +0100, Groepaz wrote:
&gt; I was wondering if (and if yes, where :)) there is documentation available
&gt; about the object-file-format used by cc65, specifically about the type of
&gt; debug information used.... (i've just added vice-style labelfiles to my
&gt; debugger and 'real' debuginfo would be the next logical step kinda :o))

There is no documentation available for the object file format used. I do not
even manage to keep up with the standard compiler docs:-) However, it should
not be necessary to access the object files, since all information that is
available in the object files should be collected by the linker and output in
a special debug file. The debug file is currently somewhat incomplete. For
one, it does not include labels that are in the label file. This will get
fixed. Another problem is that the debug file does not contain information
about local symbols. This information is not available in the object file,
since for one, the assembler is not able to handle this information, second,
the compiler does not generate it, and third, it is rather difficult to keep
this information current over the optimizer passes, because the generated code
does not use a base pointer, so the stack offset of locals may change with
every instruction. Because all this is unfinished and not really well tested,
the option for the linker to generate this debug file is undocumented.

        --dbgfile name

is what it needs to get such a debug file.

Being able to step through the C source and watching the values of global
symbols would be tremendously useful, and implementing this is possible using
the currently available information. I would suggest that you generate such a
debug file and have a look at it. It's straight ASCII, and currently it
contains just two types of information:

        file    &quot;crt0.s&quot;, 2532, 1038165106

This means that crt0.s is a source file which had 2532 bytes when translated,
and a time stamp of 1038165106 (unix mtime). The additional information can be
used to display a warning in the debugger when the source code available to
the debugger differs from what was available when the object file was
generated.

        line    &quot;em_load.c&quot;, 58, 00140B-00142F

This means that the code range starting at 140B (hex) up to and including 142F
(hex) was generated by line 58 of em_load.c. Note that there may be more than
one entry for the same line of source code. An example would be for loops, for
which the compiler generates code on loop entry and exit.

There will be some more line types when more information is added, but the
style will always be the same: The first token on a line is a keyword that
specifies the type of information that follows.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Debug%20Information%20in%20Objectfiles">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Debug%20Information%20in%20Objectfiles">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1855.html">MagerValp: "Re: [cc65] Koala picture viewer"</a>
<li><strong>In reply to:</strong> <a href="1854.html">Groepaz: "[cc65] Debug Information in Objectfiles"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="1875.html">Groepaz: "Re: [cc65] Debug Information in Objectfiles"</a>
<li><strong>Next in thread:</strong> <a href="1855.html">MagerValp: "Re: [cc65] Koala picture viewer"</a>
<li><strong>Reply:</strong> <a href="1875.html">Groepaz: "Re: [cc65] Debug Information in Objectfiles"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-12-03 12:09:34 CET</em>
</em>
</small>
</body>
</html>
