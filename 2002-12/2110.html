<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Type conversions</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Type conversions">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Type conversions</h1>
<!-- received="Fri Dec 20 00:33:26 2002" -->
<!-- isoreceived="20021219233326" -->
<!-- sent="Fri, 20 Dec 2002 00:33:25 +0100" -->
<!-- isosent="20021219233325" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Type conversions" -->
<!-- id="20021219233325.GB29490@trixie.musoftware.de" -->
<!-- inreplyto="se01a71c.022@gwmail.sd62.bc.ca" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Type%20conversions"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2002-12-20 00:33:25
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2109.html">Ullrich von Bassewitz: "Re: [cc65] 80 column support on the C128"</a>
<li><strong>In reply to:</strong> <a href="2107.html">Shawn Jefferson: "[cc65] Type conversions"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2119.html">shubel, paul: "RE: [cc65] Type conversions"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Thu, Dec 19, 2002 at 11:01:31AM -0800, Shawn Jefferson wrote:
&gt; How do type conversions work in cc65?  What are the rules that the compiler
&gt; follows when evaluating lines such as:
[...]

You examples would be evaluated using long arithmetic. cc65 follows the ISO
standard. If you find a place where this is not true, it's a problem with the
compiler.

As a general rule: Before doing any arithmetics, characters are always
converted to ints. If one operand of an expression is a long, the other is
also converted to long. If both operands are ints, and the result does not fit
into an int, it will overflow. So the following does not work:

        int a = 10000, b = 10000;
        int c = a * b;

To make it work, you will have to cast one of the operands (or both) to long,
so that the expression is evaluated with long arithmetic.

&gt; I've found that I've had to put (long) in a few places to get things working
&gt; correctly with 2.9.0.  Is it good practice to always do this, or let the
&gt; compiler decide for you?
 
It's good practice to do it in the places where it is needed:-) Seriously: I
think the best way would be to understand which rules are applied
automatically applied by the compiler.

&gt; With gcc, type conversions always seemed to be
&gt; pretty transparent (to me.)

gcc on x86 has 32 bit ints and 32 bit longs. This means that you can mix the
two freely without any different code being generated. The example above
(which doesn't work with cc65) would work using gcc. However, it is still non
portable, because the standard guarantees only 16 bits for ints, and there are
a lot of other compilers out there, that have 16 bit ints. This is especially
true if the target platform is small.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Type%20conversions">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Type%20conversions">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2109.html">Ullrich von Bassewitz: "Re: [cc65] 80 column support on the C128"</a>
<li><strong>In reply to:</strong> <a href="2107.html">Shawn Jefferson: "[cc65] Type conversions"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2119.html">shubel, paul: "RE: [cc65] Type conversions"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2002-12-20 00:33:31 CET</em>
</em>
</small>
</body>
</html>
