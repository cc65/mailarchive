<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] LUnix</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] LUnix">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] LUnix</h1>
<!-- received="Sun Jan  5 22:20:10 2003" -->
<!-- isoreceived="20030105212010" -->
<!-- sent="Sun, 5 Jan 2003 22:20:09 +0100" -->
<!-- isosent="20030105212009" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] LUnix" -->
<!-- id="20030105212009.GB5169@trixie.musoftware.de" -->
<!-- inreplyto="004201c2b4fc$7d76ef60$e92d2c42@palace" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20LUnix"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-01-05 22:20:09
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2218.html">Greg King: "Re: [cc65] LUnix"</a>
<li><strong>In reply to:</strong> <a href="2218.html">Greg King: "Re: [cc65] LUnix"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Sun, Jan 05, 2003 at 03:52:13PM -0500, Greg King wrote:
&gt; &gt; Uuhhm... I have to admit that I don't know that currently. The whole o65
&gt; &gt; generation is rather complex and there were several versions of the linker
&gt; &gt; that got parts of it wrong. A quick look into the linker sources suggests that
&gt; &gt; the value from the memory area is taken for the zpbase field in the header and
&gt; &gt; that addresses are relative to the memory area. This would mean that the
&gt; &gt; addresses are just &quot;offset_in_zp_segment&quot; and the loader must relocate them.
&gt;
&gt; Ouch!  If that's the way that it is supposed to work, then I've been exploiting
&gt; a bug, all this time. :-/  It has been $80+offset, and relocation wasn't needed.

This is correct and it's not a bug. While the base of the memory area is
written into zpbase, the o65 specs say that the values in the segments are the
actual values of the location to which the segment is assembled. So anything I
said in the above paragraph was correct with the exception of the last
sentence: Addresses are always &quot;segment-base+offset-in-segment&quot;.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20LUnix">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20LUnix">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2218.html">Greg King: "Re: [cc65] LUnix"</a>
<li><strong>In reply to:</strong> <a href="2218.html">Greg King: "Re: [cc65] LUnix"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-01-05 22:20:15 CET</em>
</em>
</small>
</body>
</html>
