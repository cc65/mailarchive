<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] const/volatile</title>
<meta name="Author" content="Spiro Trikaliotis (Trik-news_at_gmx.de)">
<meta name="Subject" content="Re: [cc65] const/volatile">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] const/volatile</h1>
<!-- received="Mon Jan 20 11:18:20 2003" -->
<!-- isoreceived="20030120101820" -->
<!-- sent="Mon, 20 Jan 2003 10:06:53 +0100" -->
<!-- isosent="20030120090653" -->
<!-- name="Spiro Trikaliotis" -->
<!-- email="Trik-news_at_gmx.de" -->
<!-- subject="Re: [cc65] const/volatile" -->
<!-- id="046b01c2c06d$525585e0$6642cad4@cs.unimagdeburg.de" -->
<!-- inreplyto="20030119112421.GC4477@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Spiro Trikaliotis (<a href="mailto:Trik-news_at_gmx.de?Subject=Re:%20[cc65]%20const/volatile"><em>Trik-news_at_gmx.de</em></a>)<br>
<strong>Date:</strong> 2003-01-20 10:06:53
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2324.html">Ullrich von Bassewitz: "Re: [cc65] register vars"</a>
<li><strong>In reply to:</strong> <a href="2317.html">Ullrich von Bassewitz: "Re: [cc65] const/volatile"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2326.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2326.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2343.html">Ullrich von Bassewitz: "Re: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2347.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hello Uz,

you wrote on Sunday, January 19, 2003 12:24 PM:

&gt; So if I need it, but don't fetch it again, how do I get the value? Values
&gt; don't come from nowhere, so I would have to remember the value somewhere. And
&gt; since the 6502 doesn't have many registers, there is no place, where a value
&gt; can be remembered effectively. Which in turn means that the optimization does
&gt; not work on the 6502 architecture. For other machines, it may be possible to
&gt; keep values in registers as long as possible, but the 6502 needs any register
&gt; it has for actual arithmetics and memory access.

Hm, looking at the example of Christian:

unsigned char x = 10;
func1(x); // actual no need to save and restore
func2(x); // accu and x (reuse)

wouldn't it be possible to make it as follows, if x were declared as
const unsigned char x = 10;

this could be made to

   GET(x)
   PUSH()     ; pushes X on stack
   PUSH()     ; pushes X again on stack
   CALL FUNC1
   CALL FUNC2

This would allow not to get x again, which would be a benefit, won't it?
Unfortunately, I don't know how much work it would be to integrate some 
logic like this.

BTW: What does the standard say about aliasing?

I think of something like

void func( const unsigned, unsigned * );

unsigned x = 1;
unsigned *px = &amp;x;

func( x, &amp;x )

Although x is a const parameter, it might be changed by func. Is a compiler
allowed treat x as unchanged? One should remember that this case is obvious,
but you can construct cases of wanted complexity where this use is not as
obvious as here.

Just curious,
   Spiro.
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20const/volatile">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2324.html">Ullrich von Bassewitz: "Re: [cc65] register vars"</a>
<li><strong>In reply to:</strong> <a href="2317.html">Ullrich von Bassewitz: "Re: [cc65] const/volatile"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2326.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2326.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2343.html">Ullrich von Bassewitz: "Re: [cc65] const/volatile"</a>
<li><strong>Reply:</strong> <a href="2347.html">shubel, paul: "RE: [cc65] const/volatile"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-01-20 11:18:37 CET</em>
</em>
</small>
</body>
</html>
