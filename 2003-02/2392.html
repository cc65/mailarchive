<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: [cc65] My personal pointer hell, nee</title>
<meta name="Author" content="Carsten Strotmann (cas_at_strotmann.de)">
<meta name="Subject" content="[cc65] My personal pointer hell, need some help please">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>[cc65] My personal pointer hell, need some help please</h1>
<!-- received="Sun Feb  2 21:09:35 2003" -->
<!-- isoreceived="20030202200935" -->
<!-- sent="Sun, 2 Feb 2003 21:13:38 +0100" -->
<!-- isosent="20030202201338" -->
<!-- name="Carsten Strotmann" -->
<!-- email="cas_at_strotmann.de" -->
<!-- subject="[cc65] My personal pointer hell, need some help please" -->
<!-- id="200302022113.38733.cas@strotmann.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Carsten Strotmann (<a href="mailto:cas_at_strotmann.de?Subject=Re:%20[cc65]%20My%20personal%20pointer%20hell,%20need%20some%20help%20please"><em>cas_at_strotmann.de</em></a>)<br>
<strong>Date:</strong> 2003-02-02 21:13:38
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2391.html">Ullrich von Bassewitz: "[cc65] Game idea"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2393.html">Ullrich von Bassewitz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<li><strong>Reply:</strong> <a href="2393.html">Ullrich von Bassewitz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<li><strong>Reply:</strong> <a href="2395.html">Groepaz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hello,

I'm writing on my next cc65 beginners tutorial issue for ABBUC Magazin.
It's about low-level programming with cc65. I started with an easy example, 
the ATARI Rainbow.

This is the program in pseudocode

while (nokey)
{
  wsync = colpf2 = rtclok + vcount
}

wsync is a byte at 0xD40A  (wait for horizontal sync)
colpf is a byte at 0xD018 ( color of playfield 2)
rtclok is a byte at 0x12 (part of internal clock, incremented every screen 
refresh)
vcount is a byte at 0xD40B ( current scanline )

This is my programm, to my knowledge, valid C code (but I'm not an expert)


----------------------

#include &lt;atari.h&gt;
#include &lt;stdio.h&gt;

typedef unsigned char byte;
typedef unsigned word;

int main(void)
{
    *(byte*) 0x2FC  = 0xFF; // clear keybuffer
    while (*(byte*) 0x2FC == 0xFF) // while no key pressed
    {
        *(byte*) 0xD40A = *(byte*) 0xD018 = (*(byte*) 0x12) + (*(byte*) \ 
	 0xD40B); // change bg-color every scanline
    }
    getchar();
    return(0);
}
----------------------

On compile with cc65 2.9.0 I get 

rainbow.c(46): Internal compiler error:
oursp != savsp (-2 != 0)
Line:  }
cl65: Subprocess `cc65' aborted by signal 6

Can anyone see what is wrong?
Or is this a compiler problem?

Best regards

Carsten
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20My%20personal%20pointer%20hell,%20need%20some%20help%20please">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2391.html">Ullrich von Bassewitz: "[cc65] Game idea"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2393.html">Ullrich von Bassewitz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<li><strong>Reply:</strong> <a href="2393.html">Ullrich von Bassewitz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<li><strong>Reply:</strong> <a href="2395.html">Groepaz: "Re: [cc65] My personal pointer hell, need some help please"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-02-02 21:11:19 CET</em>
</em>
</small>
</body>
</html>
