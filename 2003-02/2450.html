<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] parameter and assembly pr</title>
<meta name="Author" content="Greg King (gngking_at_erols.com)">
<meta name="Subject" content="Re: [cc65] parameter and assembly precedures">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] parameter and assembly precedures</h1>
<!-- received="Thu Feb 13 10:24:54 2003" -->
<!-- isoreceived="20030213092454" -->
<!-- sent="Wed, 12 Feb 2003 20:47:21 -0500" -->
<!-- isosent="20030213014721" -->
<!-- name="Greg King" -->
<!-- email="gngking_at_erols.com" -->
<!-- subject="Re: [cc65] parameter and assembly precedures" -->
<!-- id="000b01c2d342$08b86640$86292c42@palace" -->
<!-- inreplyto="[cc65] parameter and assembly precedures" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Greg King (<a href="mailto:gngking_at_erols.com?Subject=Re:%20[cc65]%20parameter%20and%20assembly%20precedures"><em>gngking_at_erols.com</em></a>)<br>
<strong>Date:</strong> 2003-02-13 02:47:21
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2449.html">Greg King: "Re: [cc65] Another wish: Unsized Arrays in Structures"</a>
<li><strong>Maybe in reply to:</strong> <a href="2421.html">3843416: "[cc65] parameter and assembly precedures"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
-----Original Message-----
From: stefan
Date: Saturday, February 08, 2003, 09:39 PM
&gt;
&gt; &gt; .import        incsp3, decsp3
&gt; &gt;
&gt; &gt; (Why do you need decsp3?)
&gt;
&gt; I thought I need both inc and decsp, because sp must have the same value
&gt; like on entrance of the procedure.
&gt; I need a decsp2 at the beginning, cause I don't have negative indices,
&gt; and I must do a incsp2 at the end.

Both the hardware-stack and cc65's software-stack are &quot;backwards&quot; from the
way that we think of stacks!  When they grow, their stack-pointers move down
in memory; when they shrink, their pointers move up.  Data that was pushed
onto a stack later is stored at lower addresses than is data that was pushed
earlier.  &quot;sp&quot; points to the lowest address that currently is used by the
software-stack.  You always will use positive indices to reach values that
are on the stack.  Also, functions must remove their arguments from the
stack before they return.

Therefore, you must remove that &quot;jsr decsp3&quot; from your code.  Store the .A
register into var3.  Load a zero into the .Y index-register before getting
var2.  And, increment .Y before getting var1.

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20parameter%20and%20assembly%20precedures">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2449.html">Greg King: "Re: [cc65] Another wish: Unsized Arrays in Structures"</a>
<li><strong>Maybe in reply to:</strong> <a href="2421.html">3843416: "[cc65] parameter and assembly precedures"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-02-13 10:26:14 CET</em>
</em>
</small>
</body>
</html>
