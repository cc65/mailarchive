<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Lynx target</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Lynx target">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Lynx target</h1>
<!-- received="Thu Feb 20 22:13:20 2003" -->
<!-- isoreceived="20030220211320" -->
<!-- sent="Thu, 20 Feb 2003 22:13:17 +0100" -->
<!-- isosent="20030220211317" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Lynx target" -->
<!-- id="20030220211317.GB28810@trixie.musoftware.de" -->
<!-- inreplyto="se5354de.058@gwmail.sd62.bc.ca" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Lynx%20target"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-02-20 22:13:17
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2479.html">Piotr Fusik: "RE: [cc65] Machines with switchable clock"</a>
<li><strong>In reply to:</strong> <a href="2470.html">Shawn Jefferson: "Re: [cc65] Lynx target"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2506.html">Shawn Jefferson: "Re: [cc65] Lynx target"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Wed, Feb 19, 2003 at 09:56:24AM -0800, Shawn Jefferson wrote:
&gt; You are a genius, Ullrich, to make this compiler so easy to use.  I've
&gt; managed to write a crt0.s and config file using Bastian Schick's runtime code
&gt; and the atari crt0.s as templates.  I've converted a couple of the lynx
&gt; library modules and I can get a program running in Handy!  Whoohoo!  I just
&gt; compiled the whole runtime directory with -t none --cpu 65C02 and everything
&gt; looks to be working.

There may be problems with some runtime functions. The compiler has knowledge
about the register usage of most runtime (not C) functions, and register usage
may be different for a few functions when compiled for the 65C02. If you're
experiencing difficulties, look out for this.

&gt; A question: is it better to use the popa, popax routines rather than
&gt; manipulate the stack yourself?  I notice that the lynx routines do a lot of
&gt; this work themselves... I've been converting them to popa, popax since it is
&gt; easier for me to understand what is going on then (cleaner code.)

First rule when interfacing with assembly functions: Use __fastcall__ whenever
possible. This will pass the rightmost parameter in registers instead over the
stack. In the assembly function it is often simpler to use popa/popax, but the
overhead associated with the function call is also larger. So if you're
hunting for cycles you should access the stack directly and use incsp() later
if the alternative is two or more calls to popa/popax. You can also replace
two calls to popa by one call to popax (the high byte is then in the X
register).

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Lynx%20target">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Lynx%20target">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2479.html">Piotr Fusik: "RE: [cc65] Machines with switchable clock"</a>
<li><strong>In reply to:</strong> <a href="2470.html">Shawn Jefferson: "Re: [cc65] Lynx target"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2506.html">Shawn Jefferson: "Re: [cc65] Lynx target"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-02-20 22:13:39 CET</em>
</em>
</small>
</body>
</html>
