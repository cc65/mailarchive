<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Atmos target</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Atmos target">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Atmos target</h1>
<!-- received="Wed Feb 26 23:55:23 2003" -->
<!-- isoreceived="20030226225523" -->
<!-- sent="Wed, 26 Feb 2003 23:55:11 +0100" -->
<!-- isosent="20030226225511" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Atmos target" -->
<!-- id="20030226225511.GA30636@trixie.musoftware.de" -->
<!-- inreplyto="200302262340.44867.jede@oric.org" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Atmos%20target"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-02-26 23:55:11
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2532.html">Groepaz: "Re: [cc65] Atmos target"</a>
<li><strong>In reply to:</strong> <a href="2530.html">Debrune Jérôme: "[cc65] Atmos target"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Wed, Feb 26, 2003 at 11:40:44PM +0100, Debrune Jérôme wrote:
&gt; It compile but program crashes (In 2.8.0 it was OK) crt0.s in 2.9.0 should be
&gt; ok. But, the code is executed craply by Atmos... I can't find the problem ...
&gt;
&gt; Is there some major changes in 2.9.0 in crt0.s or atmos.inc (ld65) which could
&gt; break atmos target ?

The following changes have been applied to the original version:

  1. The zeropage variables have been moved to a separate file which is linked
     to the application.

  2. Additional STARTUP and LOWCODE segments have been introduced in the linker
     config, and the code from crt0.s has been placed into the STARTUP segment.

With the exception that 1. fixes a bug that has been in the zeropage
allocations for most platforms, both changes should be transparent and the
generated code should be identical to the original version. The bug was that
one zeropage variable was declared to have two bytes while four were actually
needed. As a result, new programs need two bytes more zeropage memory.
However, the zeropage space allocated in the linker config was correct, so
these two bytes were allocated but unused before.

Since there are no Atmos libraries that come with cc65, I do assume that
you're using some other code to generate working programs. There's also a
chance that this other code has problems with the changed segments and/or
zeropage alignment.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Atmos%20target">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Atmos%20target">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2532.html">Groepaz: "Re: [cc65] Atmos target"</a>
<li><strong>In reply to:</strong> <a href="2530.html">Debrune Jérôme: "[cc65] Atmos target"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-02-26 23:55:26 CET</em>
</em>
</small>
</body>
</html>
