<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] IEEE vs nonstandard floats</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] IEEE vs nonstandard floats">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] IEEE vs nonstandard floats</h1>
<!-- received="Mon Mar 10 00:09:47 2003" -->
<!-- isoreceived="20030309230947" -->
<!-- sent="Mon, 10 Mar 2003 00:09:42 +0100" -->
<!-- isosent="20030309230942" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] IEEE vs nonstandard floats" -->
<!-- id="20030309230942.GB26174@trixie.musoftware.de" -->
<!-- inreplyto="12df01c2e685$4a54b760$6902a8c0@magnesium" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20IEEE%20vs%20nonstandard%20floats"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-03-10 00:09:42
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2672.html">Ullrich von Bassewitz: "Re: [cc65] Possible bug:  All labels but first are added to .s file using inline assy"</a>
<li><strong>In reply to:</strong> <a href="2666.html">David Holz: "[cc65] IEEE vs nonstandard floats"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2675.html">David Holz: "Re: [cc65] IEEE vs nonstandard floats"</a>
<li><strong>Reply:</strong> <a href="2675.html">David Holz: "Re: [cc65] IEEE vs nonstandard floats"</a>
<li><strong>Reply:</strong> <a href="2678.html">Tim Schürmann: "Re: [cc65] IEEE vs nonstandard floats"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Sun, Mar 09, 2003 at 01:46:07PM -0800, David Holz wrote:
&gt; What would cc65 gain by having IEEE standard FP notation as opposed to a
&gt; custom one that ran faster on the 6502?

If you can prove in advance that a specific custom format is significantly
faster than the IEEE format, I'm open for this suggestion. But I have to admit
that I doubt this is the case.

A floating point number consists of two parts: Mantissa and exponent. The
existing formats (yes, also the one used by Commodore) differ only in the
representation of these two parts in the binary representation of the floating
point number. The floating point routines need to work on both parts
separately, so most of the difference is in separating the two components and
joining them after the computation part is done.

Maybe you can tell which concrete properties of the IEEE 32 bit format will
lead to a slow implementation, so we can discuss the possible impact and
alternatives.

&gt; The only one that I could think of
&gt; would be read/write compatibility with files that export floating point in
&gt; binary files which isn't that common.

Here's another one: The standard specifies explicitly how the different
situations should be handled, so it is easy to diagnose if there are problems
with the implementation, and a user knows exactly what he can expect.

&gt; NaN and infinite also don't show up in Posix C programs without tossing a
&gt; SIGFPE signal do they?  If not, they don't need to be handled with special
&gt; code which can tighten up the FP library and make it easier to implement.

The C standard does not require fp math functions to raise a signal on an
error condition. But it requires that the a math function returns an
implementation defined value, so these error conditions have to be detected
and handled in some way. I don't think that raising a signal is a good idea
(my comment suggesting this was a joke) but the few bytes saved by not calling
raise() are definitely not the reason for it.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20IEEE%20vs%20nonstandard%20floats">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20IEEE%20vs%20nonstandard%20floats">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2672.html">Ullrich von Bassewitz: "Re: [cc65] Possible bug:  All labels but first are added to .s file using inline assy"</a>
<li><strong>In reply to:</strong> <a href="2666.html">David Holz: "[cc65] IEEE vs nonstandard floats"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2675.html">David Holz: "Re: [cc65] IEEE vs nonstandard floats"</a>
<li><strong>Reply:</strong> <a href="2675.html">David Holz: "Re: [cc65] IEEE vs nonstandard floats"</a>
<li><strong>Reply:</strong> <a href="2678.html">Tim Schürmann: "Re: [cc65] IEEE vs nonstandard floats"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-03-10 00:10:44 CET</em>
</em>
</small>
</body>
</html>
