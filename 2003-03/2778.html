<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: [cc65] non-ANSI extensions and initi</title>
<meta name="Author" content="Maciej Witkowiak (ytm_at_elysium.pl)">
<meta name="Subject" content="[cc65] non-ANSI extensions and initialized structures">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>[cc65] non-ANSI extensions and initialized structures</h1>
<!-- received="Fri Mar 14 23:27:59 2003" -->
<!-- isoreceived="20030314222759" -->
<!-- sent="Fri, 14 Mar 2003 23:26:54 +0100" -->
<!-- isosent="20030314222654" -->
<!-- name="Maciej Witkowiak" -->
<!-- email="ytm_at_elysium.pl" -->
<!-- subject="[cc65] non-ANSI extensions and initialized structures" -->
<!-- id="20030314222653.GA5914@spektr.localdomain" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Maciej Witkowiak (<a href="mailto:ytm_at_elysium.pl?Subject=Re:%20[cc65]%20non-ANSI%20extensions%20and%20initialized%20structures"><em>ytm_at_elysium.pl</em></a>)<br>
<strong>Date:</strong> 2003-03-14 23:26:54
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2777.html">Shawn Jefferson: "Re: [cc65] The Contiki Desktop OS for cc65"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2781.html">Ullrich von Bassewitz: "Re: [cc65] non-ANSI extensions and initialized structures"</a>
<li><strong>Reply:</strong> <a href="2781.html">Ullrich von Bassewitz: "Re: [cc65] non-ANSI extensions and initialized structures"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Consider this piece of code for GEOS (structure definitions are in
geos/gstruct.h, I won't quote them here):

---8&lt;---

#include &lt;geos.h&gt;

void DoRect(void);
void DoFillRect(void);

const char image[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 };

// This is how it worked in summer 2000
//const struct icontab  MainIcons  = {(char)  2 , {(int)  0 , (char)  0 },
//	{	 
//	{ (char*)image , (char)  3 , (char)  48 , (char)  2 , (char)  16 , (int)  DoRect } ,
//	{ (char*)image , (char)  1 , (char)  48 , (char)  2 , (char)  16 , (int)  DoFillRect } ,
//	}
//};

// This is how it must be done with cc65 2.9.0
const struct icondef myIcon1 = {
     (char*)image , (char)  3 , (char)  48 , (char)  2 , (char)  16 , (int)  DoRect };

const struct icondef myIcon2 = {
     (char*)image , (char)  1 , (char)  48 , (char)  2 , (char)  16 , (int)  DoFillRect };

const struct icondef* myIconTable[] = {
    &amp;myIcon1, &amp;myIcon2 };

const struct icontab  MainIcons2  = {(char)  2 , {(int)  0 , (char)  0 },
	(struct icondef*)myIconTable
 };

---8&lt;---

As you see the commented-out part allowed for easy initialization of
structures while the current one requires lots of unnecessary names
(myIcon1, myIcon2 and myIconTable won't be used anymore).
Is it possible to code in that commented-out way with current cc65? I don't
know if it was a bug or support for it was removed at certain point and what
standards it violated but it seemed useful.

ytm

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20non-ANSI%20extensions%20and%20initialized%20structures">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2777.html">Shawn Jefferson: "Re: [cc65] The Contiki Desktop OS for cc65"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2781.html">Ullrich von Bassewitz: "Re: [cc65] non-ANSI extensions and initialized structures"</a>
<li><strong>Reply:</strong> <a href="2781.html">Ullrich von Bassewitz: "Re: [cc65] non-ANSI extensions and initialized structures"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-03-14 23:28:04 CET</em>
</em>
</small>
</body>
</html>
