<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] void structures (non-ANSI</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] void structures (non-ANSI C feature)">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] void structures (non-ANSI C feature)</h1>
<!-- received="Tue May  6 12:08:07 2003" -->
<!-- isoreceived="20030506100807" -->
<!-- sent="Tue, 6 May 2003 12:08:04 +0200" -->
<!-- isosent="20030506100804" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] void structures (non-ANSI C feature)" -->
<!-- id="20030506100804.GA12462@trixie.musoftware.de" -->
<!-- inreplyto="20030506095006.GE17726@spiro.dyndns.org" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20void%20structures%20(non-ANSI%20C%20feature)"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-05-06 12:08:04
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="2985.html">Spiro Trikaliotis: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<li><strong>In reply to:</strong> <a href="2985.html">Spiro Trikaliotis: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2987.html">Maciej Witkowiak: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<li><strong>Reply:</strong> <a href="2987.html">Maciej Witkowiak: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Tue, May 06, 2003 at 11:50:06AM +0200, Spiro Trikaliotis wrote:
&gt; Just out of curiosity: What are void data structures good for? I can't see
&gt; any use of this, but I'm open for any hints.
&gt;
&gt; I'm sorry for this &quot;C course&quot; question.

It's not a &quot;C course&quot; question, because it is a non standard feature. void
data structures allows one to define arbitrary data. For example, there is no
easy way to define a structure that is equivalent to the following asm code:

        table:  .word   0
                .asciiz &quot;foobar&quot;
                .word   1
                .asciiz &quot;baz&quot;
                .word   2
                .asciiz &quot;lxsh&quot;

Two ways to work around this are:

  1. Define a struct like

        struct tabledata {
            unsigned    num;
            char        id[8];
        };

     and live with the overhead generated by the strings, or

  2. use a character buffer and encode the data structure byte by byte:

        unsigned char tabledata[] = {
            0, 0, 'f', 'o', 'b', 'a', 'r', '\0',
            1, 0, 'b', 'a', 'z', '\0',
            ...
        };

If you have an API that expects such a data structure as an argument, you
cannot use 1. The remaining possibility (2.) is ugly and gets even more ugly
if the data structure is more complex.

GEOS is an example for an application that has an API with data structures
like the one above. Forcing people to define their data structures like in 2.
would be a nice way to get them upset very quickly, so I added void data
variables. Since the data type is &quot;void&quot; it cannot be accessed directly. But,
when taking a pointer to this variable, it automatically yields a &quot;void*&quot;,
which can be passed to every function that expects any pointer.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20void%20structures%20(non-ANSI%20C%20feature)">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20void%20structures%20(non-ANSI%20C%20feature)">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="2985.html">Spiro Trikaliotis: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<li><strong>In reply to:</strong> <a href="2985.html">Spiro Trikaliotis: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="2987.html">Maciej Witkowiak: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<li><strong>Reply:</strong> <a href="2987.html">Maciej Witkowiak: "Re: [cc65] void structures (non-ANSI C feature)"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-05-06 12:08:18 CEST</em>
</em>
</small>
</body>
</html>
