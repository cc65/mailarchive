<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] memory corruption?</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] memory corruption?">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] memory corruption?</h1>
<!-- received="Tue Jun  3 00:49:34 2003" -->
<!-- isoreceived="20030602224934" -->
<!-- sent="Tue, 3 Jun 2003 00:49:28 +0200" -->
<!-- isosent="20030602224928" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] memory corruption?" -->
<!-- id="20030602224928.GA24546@trixie.musoftware.de" -->
<!-- inreplyto="16091.51279.699337.445903@panini.cling.gu.se" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20memory%20corruption?"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-06-03 00:49:28
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3062.html">Groepaz: "Re: [cc65] memory corruption?"</a>
<li><strong>In reply to:</strong> <a href="3061.html">MagerValp: "[cc65] memory corruption?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3064.html">MagerValp: "Re: [cc65] memory corruption?"</a>
<li><strong>Reply:</strong> <a href="3064.html">MagerValp: "Re: [cc65] memory corruption?"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Mon, Jun 02, 2003 at 11:57:35PM +0200, MagerValp wrote:
&gt; What could make a call to free fail? Suddenly, this code in simplemenu
&gt; freezes:
[...]
&gt; It works fine by itself, but after I use my file selector and load and
&gt; convert a file, the free call never returns.

free() will add most blocks to the free list, which is a double linked
list of free blocks. Links are stored inside the freed blocks. Any form of
memory corruption may cause free() to enter an endless loop.

Your best chance is to look through the code for memory block overwrites.
If I remember correctly, you had a special affinity for code like this:

        struct x* X = malloc (sizeof (X));

So I would look out for similar problems:-)

Other possibility: If the code compiles&amp;runs on a PC, use a malloc
debugger on the PC.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20memory%20corruption?">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20memory%20corruption?">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3062.html">Groepaz: "Re: [cc65] memory corruption?"</a>
<li><strong>In reply to:</strong> <a href="3061.html">MagerValp: "[cc65] memory corruption?"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3064.html">MagerValp: "Re: [cc65] memory corruption?"</a>
<li><strong>Reply:</strong> <a href="3064.html">MagerValp: "Re: [cc65] memory corruption?"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-06-03 00:49:47 CEST</em>
</em>
</small>
</body>
</html>
