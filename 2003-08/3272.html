<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] BSS Segment</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] BSS Segment">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] BSS Segment</h1>
<!-- received="Mon Aug 25 18:46:33 2003" -->
<!-- isoreceived="20030825164633" -->
<!-- sent="Mon, 25 Aug 2003 18:46:28 +0200" -->
<!-- isosent="20030825164628" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] BSS Segment" -->
<!-- id="20030825164628.GA15906@trixie.musoftware.de" -->
<!-- inreplyto="002f01c36b25$9e1d2ce0$6401a8c0@cmshome" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20BSS%20Segment"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-08-25 18:46:28
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3271.html">Chris Sebrell: "[cc65] BSS Segment"</a>
<li><strong>In reply to:</strong> <a href="3271.html">Chris Sebrell: "[cc65] BSS Segment"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3273.html">Groepaz: "Re: [cc65] BSS Segment"</a>
<li><strong>Reply:</strong> <a href="3273.html">Groepaz: "Re: [cc65] BSS Segment"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Mon, Aug 25, 2003 at 12:26:17PM -0400, Chris Sebrell wrote:
&gt; I'm working on an 80-Column display library (assembler/CA65) for the Apple II and I'm
&gt; wondering what the .BSS segment is really used for.  The docs just say that &quot;.BSS&quot;
&gt; directive &quot;switches to the BSS segment.&quot;  Is this un-initialized data?  I vaguely recall
&gt; this segment name from my way-back-when x86 days.

Yes, bss is uninitialized data. If you're using just the assembler, and don't
plan to make romable code, you can ignore it.

&gt; Right now I'm just using &quot;.CODE&quot; and &quot;.DATA&quot;

For simplicity, you could also just use code. However, the rules I'm using for
my own code (and for cc65 code) are:

    STARTUP, LOWCODE, CODE
    Contains just code, no data, and is not writable. That does especially mean
    no self modifying code. This means that CODE can go into a ROM.

    RODATA
    Read only data, which is not modified.

    LOWDATA, DATA
    Initialized data that is modified by the program. By definition, pieces of
    self modyfing code go here or into BSS.

    BSS
    Uninitialized data. BSS segments are allocated in memory but there is no
    data in the output file for these segments, which saves space on the disk.
    The startup code for C language programs will zero all BSS segments, which
    means that any variable will have a value of zero on startup.

    ZEROPAGE
    This is like BSS, but located in the zeropage.

Having read only CODE and RODATA segments is important for ROMable code, and
sometimes for debugging: The VICE emulator for example is able to write
protect memory regions using a watchpoint feature. Assuming that you have one
of those ugly memory overwrite error, it sometimes helps to write protect all
segments that do contain read only code and data and then wait until the
program tries an illegal write operation.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20BSS%20Segment">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20BSS%20Segment">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3271.html">Chris Sebrell: "[cc65] BSS Segment"</a>
<li><strong>In reply to:</strong> <a href="3271.html">Chris Sebrell: "[cc65] BSS Segment"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3273.html">Groepaz: "Re: [cc65] BSS Segment"</a>
<li><strong>Reply:</strong> <a href="3273.html">Groepaz: "Re: [cc65] BSS Segment"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-08-25 18:46:39 CEST</em>
</em>
</small>
</body>
</html>
