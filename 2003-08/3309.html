<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] snapshot</title>
<meta name="Author" content="Groepaz (groepaz_at_gmx.net)">
<meta name="Subject" content="Re: [cc65] snapshot">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] snapshot</h1>
<!-- received="Sat Aug 30 00:45:50 2003" -->
<!-- isoreceived="20030829224550" -->
<!-- sent="Sat, 30 Aug 2003 00:41:55 +0200" -->
<!-- isosent="20030829224155" -->
<!-- name="Groepaz" -->
<!-- email="groepaz_at_gmx.net" -->
<!-- subject="Re: [cc65] snapshot" -->
<!-- id="200308300041.55811.groepaz@gmx.net" -->
<!-- inreplyto="20030829094149.GB27608@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Groepaz (<a href="mailto:groepaz_at_gmx.net?Subject=Re:%20[cc65]%20snapshot"><em>groepaz_at_gmx.net</em></a>)<br>
<strong>Date:</strong> 2003-08-30 00:41:55
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3308.html">Keates, Mark: "RE: [cc65] Linker - Read-only warning"</a>
<li><strong>In reply to:</strong> <a href="3303.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3311.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<li><strong>Next in thread:</strong> <a href="3287.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<li><strong>Reply:</strong> <a href="3311.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Friday 29 August 2003 11:41, Ullrich von Bassewitz wrote:
&gt; &gt; f(i)
&gt; &gt; {
&gt; &gt; 	i=f()+f();
&gt; &gt; }
&gt;
&gt; [...]
&gt;
&gt; &gt; int test(char *s);
&gt; &gt;
&gt; &gt; test(*s)
&gt; &gt; char *s;
&gt; &gt; {
&gt; &gt; }
&gt;
&gt; While those could be fixed, I don't think it's a good idea, because both
&gt; examples show problematic uses, were the source code should get changed,
&gt; not the compiler. Old style function decls are deprecated in C99 and will
&gt; be removed with the next version of the standard, so my stand is to fix
&gt; important things, not obscure features.
&gt;
&gt; In case of the former, I would even say, the code violates the C99 standard
&gt; which says in 6.9.1.8:
&gt;
&gt;     If a function that accepts a variable number of arguments is defined
&gt;     without a parameter type list that ends with the ellipsis notation, the
&gt;     behavior is undefined.
&gt;
&gt; (but then, C99 does also remove &quot;implicit int&quot;, so both function decls
&gt; would be invalid according to the new standard).

ok ok, so i'll just comment them out in the test or sth :o)

&gt; &gt; the tests that compile still dont work due to some appearent problem in
&gt; &gt; the posix directory and/or cbm file i/o stuff.... mpf
&gt;
&gt; If you can give me a few more hints, or a short piece of non working code,
&gt; I will try to fix it.

havent tracked that down yet, sorry...

&gt; &gt; - functions that return structs seem to translate correctly now (i had to
&gt; &gt; disable this before)

this was supposed to mean &quot;function that get structs as parameters&quot;...there 
were some hickups at some places before which are now gone it seems

&gt; C functions still cannot return structs, but assembler functions can if the
&gt; size of the struct is one of 1, 2 or 4 (it is returned in the primary
&gt; register).
&gt;
&gt; &gt; - even enabling &quot;functions can return structs&quot; doesnt result in an error
&gt; &gt; (?!?) does that really have been fixed or is that testsuite playing
&gt; &gt; tricks on me?
&gt;
&gt; The compiler is supposed to issue an error if a C function tries to return
&gt; a structure. My own tests show that this is the case, but maybe that the
&gt; test suite is somewhat more creative. Can you send me the code that returns
&gt; a structure which is accepted by the compiler?

i have to re-check that.... i just removed a related define and to be honest, 
i am not sure if i didnt previously remove the struct stuff alltogether in 
the code :=P gotta have a look :)

&gt; &gt; - several small problems with initializing structs and/or using curly
&gt; &gt; braces in a &quot;creative&quot; way seem to be gone
&gt;
&gt; At least there is progress in a few areas :-)
&gt;
&gt; Thanks for doing all the tests!
&gt;
&gt; Regards
&gt;
&gt;
&gt;         Uz

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20snapshot">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3308.html">Keates, Mark: "RE: [cc65] Linker - Read-only warning"</a>
<li><strong>In reply to:</strong> <a href="3303.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3311.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<li><strong>Next in thread:</strong> <a href="3287.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<li><strong>Reply:</strong> <a href="3311.html">Ullrich von Bassewitz: "Re: [cc65] snapshot"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-08-30 00:46:21 CEST</em>
</em>
</small>
</body>
</html>
