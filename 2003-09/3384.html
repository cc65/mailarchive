<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] code generation</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] code generation">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] code generation</h1>
<!-- received="Thu Sep 11 20:39:24 2003" -->
<!-- isoreceived="20030911183924" -->
<!-- sent="Thu, 11 Sep 2003 20:39:19 +0200" -->
<!-- isosent="20030911183919" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] code generation" -->
<!-- id="20030911183919.GA25991@trixie.musoftware.de" -->
<!-- inreplyto="200309111627.14901.groepaz@gmx.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20code%20generation"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-09-11 20:39:19
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3383.html">Groepaz: "Re: [cc65] code generation"</a>
<li><strong>In reply to:</strong> <a href="3383.html">Groepaz: "Re: [cc65] code generation"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3385.html">Groepaz: "Re: [cc65] code generation"</a>
<li><strong>Next in thread:</strong> <a href="3377.html">Maciej Witkowiak: "Re: [cc65] Optimizing C code"</a>
<li><strong>Reply:</strong> <a href="3385.html">Groepaz: "Re: [cc65] code generation"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi!

On Thu, Sep 11, 2003 at 04:27:14PM +0200, Groepaz wrote:
&gt; mmmmh... i've stumbled about a handful cases now where a branch could have
&gt; been really handy.... mmmh. could a possible workaround be using a macro like
&gt; this...

The inline assembler doesn't accept macro names. In fact, it accepts only
valid 6502 opcodes, label names and nothing else (not even .byte or similar).
This is a deliberate decision, since the code is translated into an abstract
form so it can be handled by the optimizer later. Having unknown instructions
would break the optimizer.

&gt; whats the problem at this point anyway? i reckon that it does work with a
&gt; local label and with the macro used only once - so is it really just that?

Yes.

&gt; shouldnt a simple feature to generate unique names for labels solve it then?

Yes - if you come up with something that makes this feature &quot;simple&quot;.

&gt; even something that loads AX with swapped byte order would be cool :=P

I can see that you have a situation where this might be useful. But how
generic is this and how many people are writing code making use of this
feature? If I would sit here, bored and waiting for something to do then I
would be happy to add all sorts of esoteric features. Unfort^WFortunately this
is not the case, so I try to concentrate on the things that are more
important, otherwise I don't get anything done.

&gt; must be.... opt65 catches this one fine :o) (and its far from perfect too :=P)

Why not develop opt65 into a tool that can be run as an intermediate processor
before running the assembler over the compiler generated code? This would ease
the task of testing new peephole optimization stuff which can later go into
the builtin cc65 backend. Hey, you can even write it in perl to make it
unreadable:-)

&gt; yeah i noticed that already.... one time it was even smart enough to spot a
&gt; &quot;peephole&quot; in my handwritten asm (shame on me :=P).

This happens to other people, too:-)

&gt; however my main concern
&gt; was if not using __AX__ could potentially break something, resulting in wrong
&gt; code...

No. The only thing that may happen is that the compiler refuses to translate
the code, if it is no valid expression because of the missing __AX__.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20code%20generation">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20code%20generation">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3383.html">Groepaz: "Re: [cc65] code generation"</a>
<li><strong>In reply to:</strong> <a href="3383.html">Groepaz: "Re: [cc65] code generation"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3385.html">Groepaz: "Re: [cc65] code generation"</a>
<li><strong>Next in thread:</strong> <a href="3377.html">Maciej Witkowiak: "Re: [cc65] Optimizing C code"</a>
<li><strong>Reply:</strong> <a href="3385.html">Groepaz: "Re: [cc65] code generation"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-09-11 20:39:40 CEST</em>
</em>
</small>
</body>
</html>
