<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Platform specific docs</title>
<meta name="Author" content="Shawn Jefferson (shawnjefferson_at_24fightingchickens.com)">
<meta name="Subject" content="Re: [cc65] Platform specific docs">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Platform specific docs</h1>
<!-- received="Tue Oct  7 22:36:25 2003" -->
<!-- isoreceived="20031007203625" -->
<!-- sent="Tue, 07 Oct 2003 13:34:17 -0700" -->
<!-- isosent="20031007203417" -->
<!-- name="Shawn Jefferson" -->
<!-- email="shawnjefferson_at_24fightingchickens.com" -->
<!-- subject="Re: [cc65] Platform specific docs" -->
<!-- id="uh86ovclmdol07cq1tdo1aru7kaiauok89@4ax.com" -->
<!-- inreplyto="20030925090032.GE22843@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Shawn Jefferson (<a href="mailto:shawnjefferson_at_24fightingchickens.com?Subject=Re:%20[cc65]%20Platform%20specific%20docs"><em>shawnjefferson_at_24fightingchickens.com</em></a>)<br>
<strong>Date:</strong> 2003-10-07 22:34:17
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3568.html">Ullrich von Bassewitz: "Re: [cc65] Error message question"</a>
<li><strong>In reply to:</strong> <a href="../2003-09/3454.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3572.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<li><strong>Reply:</strong> <a href="3572.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<li><strong>Reply:</strong> <a href="3644.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi,

Ok, I've started typing up a little documentation for the Atari
platform, using the c64.sgml as a template.  Here's the text I've
added so far (for comments, especially from those responsible for the
Atari library):

Binary format:

The standard binary output format generated by the linker for the
atari target is a machine language program with a standard executable
header (FF FF &lt;start address&gt; &lt;length in bytes&gt;). These values are
calculated in the crt0.s file from the __CODE_LOAD__ and __BSS_LOAD__
values, so keep this in mind if you create a custom linker config file
and start moving segments around.  You can override this behaviour by
creating your own crt0.s file and linking it into your program.  A run
vector is added to the end of the file (02E0 &lt;run vector&gt;) and is
calculated using __CODE_LOAD__ in crt0.s also.

Memory layout:

cc65 generated programs with the default setup run with the assumption
that BASIC ROM is disabled, which gives a usable memory range of $2E00
- $BC1F. $2E00 was chosen as the load address to accommodate having a
DOS loaded and a driver that resides in low memory such as the 850 R:
handler.  You can override this behaviour by creating a custom linker
config file.

Special locations:

Stack:
  The C runtime stack is located at MEMTOP and grows downwards,
regardless of how your linker config file is setup.  This accomodates
the different memory configurations of the atari machines, as well as
having a cartridge installed.  You can override this behaviour by
writing your own crt0.s file and linking it to your program.

Heap:
  The C heap is located at the end of the program and grows towards
the C runtime stack.  The location of the C heap is placed at the end
of the BSS segment.  To override this behaviour you would have to
write a custom _heap.s (in libsrc/common/) and link it to your
program.

That's all I have right now.  I'm wondering if I should talk about how
to create a binary file with multiple load segments with cc65 in the
binary format section?

Additions/Comments/Death threats?

--
Shawn Jefferson
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Platform%20specific%20docs">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3568.html">Ullrich von Bassewitz: "Re: [cc65] Error message question"</a>
<li><strong>In reply to:</strong> <a href="../2003-09/3454.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3572.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<li><strong>Reply:</strong> <a href="3572.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<li><strong>Reply:</strong> <a href="3644.html">Christian Groessler: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-10-07 22:39:42 CEST</em>
</em>
</small>
</body>
</html>
