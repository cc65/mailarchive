<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: [cc65] Struct embedded enum</title>
<meta name="Author" content="Keates, Mark (Mark.Keates_at_dendrite.com)">
<meta name="Subject" content="[cc65] Struct embedded enum">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>[cc65] Struct embedded enum</h1>
<!-- received="Thu Oct  9 12:45:38 2003" -->
<!-- isoreceived="20031009104538" -->
<!-- sent="Thu, 9 Oct 2003 06:43:24 -0400" -->
<!-- isosent="20031009104324" -->
<!-- name="Keates, Mark" -->
<!-- email="Mark.Keates_at_dendrite.com" -->
<!-- subject="[cc65] Struct embedded enum" -->
<!-- id="1D2B2C77C9CF964EB1331ABEB51562E101C0F5B9@ukntsvr2.uk.drte.com" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Keates, Mark (<a href="mailto:Mark.Keates_at_dendrite.com?Subject=Re:%20[cc65]%20Struct%20embedded%20enum"><em>Mark.Keates_at_dendrite.com</em></a>)<br>
<strong>Date:</strong> 2003-10-09 12:43:24
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3590.html">Spiro Trikaliotis: "Re: [cc65] [very OT] KVM"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3593.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<li><strong>Reply:</strong> <a href="3593.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<li><strong>Reply:</strong> <a href="3599.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hi,

This is a bit ugly, the struct below contained an enum:

struct threadQueue {
    ...
    enum {
	THREAD_JUST_BORN = 0,	/* Not &quot;start&quot;ed yet */
	THREAD_ACTIVE = 1,	/* Currently running, or on Run queue */
	THREAD_SUSPENDED = 2,   /* Waiting for monitor or alarm */
	THREAD_DEAD = 3		/* Thread has quit */
    } state;
};

CC65 couldn't evaluate the rhs of this statement and so I used a 
set of #defines to get around it.

        if (CurrentThread-&gt;state == THREAD_ACTIVE) {

The question is, is there a specific way that the enum label could be
referenced?
I guess a better way would be to typedef the enum outside of the struct and
then
use then declare 'state' properly within the struct?

Thanks for the other responses + bug fix, I had the same problem with a
function
returning a union but luckily it was only 4 bytes long and so I was able to
get by
passing/returning the 'i' element ;)

typedef union {
    struct {
	unsigned short nameKey;
	unsigned short typeKey;	/* either MethodTypeKey or FieldTypeKey */
    } nt;
    unsigned long i;
} NameTypeKey;

Mark



**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************

----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Struct%20embedded%20enum">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3590.html">Spiro Trikaliotis: "Re: [cc65] [very OT] KVM"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3593.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<li><strong>Reply:</strong> <a href="3593.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<li><strong>Reply:</strong> <a href="3599.html">Ullrich von Bassewitz: "Re: [cc65] Struct embedded enum"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-10-09 12:46:20 CEST</em>
</em>
</small>
</body>
</html>
