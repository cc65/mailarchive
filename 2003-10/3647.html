<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] cc65 and $ba again, sorry</title>
<meta name="Author" content="carlos (carlosofcascade_at_gmx.net)">
<meta name="Subject" content="Re: [cc65] cc65 and $ba again, sorry">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] cc65 and $ba again, sorry</h1>
<!-- received="Fri Oct 17 19:55:54 2003" -->
<!-- isoreceived="20031017175554" -->
<!-- sent="Fri, 17 Oct 2003 19:53:24 +0200" -->
<!-- isosent="20031017175324" -->
<!-- name="carlos" -->
<!-- email="carlosofcascade_at_gmx.net" -->
<!-- subject="Re: [cc65] cc65 and $ba again, sorry" -->
<!-- id="000501c394d7$914d7d40$0500a8c0@acer5j0jdwij8z" -->
<!-- inreplyto="20031017164741.GA16646@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> carlos (<a href="mailto:carlosofcascade_at_gmx.net?Subject=Re:%20[cc65]%20cc65%20and%20$ba%20again,%20sorry"><em>carlosofcascade_at_gmx.net</em></a>)<br>
<strong>Date:</strong> 2003-10-17 19:53:24
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3646.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<li><strong>In reply to:</strong> <a href="3646.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3648.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<li><strong>Reply:</strong> <a href="3648.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
Hy Ulrich,
I see your arguments, but there should be any possibility to find out which
drive has been accessed the last time or something like this, because i
don't want to have a program running only on drive 8.
The natural thing is, that you use the drive, from where the program has
been loaded.
The second thing is, that there are kernal variables $9a/$9b for stdin
stdout. This is where the drive
output/input device number goes when doing a cmd ... from the c64 basic
prompt.
So i don't understand why to mess up $ba, which is at the moment the only
possibility to get drive from where the program has been loaded.
If there would be another way instead of using kernal variables directly, i
would appreciate.

Carlos


&gt;
&gt; Hi!
&gt;
&gt; On Fri, Oct 17, 2003 at 04:57:38PM +0200, carlos wrote:
&gt; &gt; You see, that something goes wrong there.
&gt;
&gt; Sorry, but no, I cannot see what is wrong. Yes, I have run the program,
but
&gt; since you didn't tell what you expect/not expect to happen, it is rather
&gt; difficult for me to find out what the problem might be.
&gt;
&gt; $ba is the current device used for input and/or output. Any file open (and
&gt; that includes stdout and stderr) will change this variable. It is clear
that
&gt; this happens and why it happens, and I cannot see any problem with it.
&gt;
&gt; In general, it's a bad idea to work with different level of APIs. If you
use C
&gt; file I/O, you should not use POSIX file I/O or CBM file I/O or mess with
any
&gt; low level kernal variables and hope the upper layers won't notice. What
that
&gt; means is that if you're using variables like $ba directly, then your
program
&gt; should not use any file I/O in C (and this includes printf/fprintf!),
because
&gt; this won't work in many cases. Or it may work in one compiler version and
stop
&gt; working after an update. This is not only true for file I/O, but for any
API
&gt; provided by the cc65 libraries. Using conio, and writing to the ROM cursor
&gt; position stored in the zero page is not supposed to work (not even reading
the
&gt; cursor position from the kernal variables is supposed to work!). This is
true
&gt; for almost every API and is not limited to cc65 and the 6502 platforms it
&gt; supports.
&gt;
&gt; Regards
&gt;
&gt;
&gt; Uz
&gt;
&gt;
&gt; --
&gt; Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20cc65%20and%20$ba%20again,%20sorry">uz_at_musoftware.de</a>
&gt; ----------------------------------------------------------------------
&gt; To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20cc65%20and%20$ba%20again,%20sorry">majordomo_at_musoftware.de</a> with
&gt; the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
&gt;
&gt;


----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20cc65%20and%20$ba%20again,%20sorry">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3646.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<li><strong>In reply to:</strong> <a href="3646.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3648.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<li><strong>Reply:</strong> <a href="3648.html">Ullrich von Bassewitz: "Re: [cc65] cc65 and $ba again, sorry"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-10-17 20:02:02 CEST</em>
</em>
</small>
</body>
</html>
