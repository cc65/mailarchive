<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Platform specific docs</title>
<meta name="Author" content="Shawn Jefferson (shawnjefferson_at_24fightingchickens.com)">
<meta name="Subject" content="Re: [cc65] Platform specific docs">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Platform specific docs</h1>
<!-- received="Tue Oct 28 20:37:03 2003" -->
<!-- isoreceived="20031028193703" -->
<!-- sent="Tue, 28 Oct 2003 11:33:53 -0800" -->
<!-- isosent="20031028193353" -->
<!-- name="Shawn Jefferson" -->
<!-- email="shawnjefferson_at_24fightingchickens.com" -->
<!-- subject="Re: [cc65] Platform specific docs" -->
<!-- id="2tgtpvkmd8kkk90mfic5i7cre27t6b87d8@4ax.com" -->
<!-- inreplyto="20031028181508.GA21876@trixie.musoftware.de" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Shawn Jefferson (<a href="mailto:shawnjefferson_at_24fightingchickens.com?Subject=Re:%20[cc65]%20Platform%20specific%20docs"><em>shawnjefferson_at_24fightingchickens.com</em></a>)<br>
<strong>Date:</strong> 2003-10-28 20:33:53
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3672.html">Ullrich von Bassewitz: "Re: [cc65] Signed comparisions"</a>
<li><strong>In reply to:</strong> <a href="3670.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3674.html">Shawn Jefferson: "Re: [cc65] Platform specific docs"</a>
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Tue, 28 Oct 2003 19:15:08 +0100, you wrote:

&gt;The current implementation of the heap assumes that the stack is located at
&gt;the end of the BSS segment. The heap is located at the bottom of the stack and
&gt;will grow downwards. There has been a discussion about changing this some
&gt;months ago, but a flexible solution requires expressions in the linker
&gt;scripts, so it has been postponed.

Ok.  If I move the BSS segment, on the Atari platform my stack and BSS
segment do not any longer occupy the same memory space.  The stack is
still at the &quot;end&quot; of usable RAM, while the BSS segment could be
anywhere.

__heapend:
       	.word	__BSS_RUN__+__BSS_SIZE__

initheap:
      	sec
      	lda	sp
      	sbc	#&lt;__STACKSIZE__
      	sta	__heapend
      	lda	sp+1
	sbc	#&gt;__STACKSIZE__
	sta	__heapend+1
	rts

So, the heapend is calculated from the BSS segment, and aren't you
then subtracting the size of the stack from that value in the initheap
routine? (maybe I'm misunderstanding it)

So it seems again that if I move my BSS segment (on the atari) my
stack isn't in my BSS segment, but the heapend still gets changed
assuming that the stack is there, right/wrong?

Sorry to be so thick on this, just want to make it clear in my head
how the memory is layed out on the Atari platform.

--
Shawn Jefferson
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Platform%20specific%20docs">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3672.html">Ullrich von Bassewitz: "Re: [cc65] Signed comparisions"</a>
<li><strong>In reply to:</strong> <a href="3670.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3674.html">Shawn Jefferson: "Re: [cc65] Platform specific docs"</a>
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-10-28 20:37:11 CET</em>
</em>
</small>
</body>
</html>
