<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Platform specific docs</title>
<meta name="Author" content="Shawn Jefferson (shawnjefferson_at_24fightingchickens.com)">
<meta name="Subject" content="Re: [cc65] Platform specific docs">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Platform specific docs</h1>
<!-- received="Tue Oct 28 23:04:10 2003" -->
<!-- isoreceived="20031028220410" -->
<!-- sent="Tue, 28 Oct 2003 14:00:57 -0800" -->
<!-- isosent="20031028220057" -->
<!-- name="Shawn Jefferson" -->
<!-- email="shawnjefferson_at_24fightingchickens.com" -->
<!-- subject="Re: [cc65] Platform specific docs" -->
<!-- id="h9ptpvkuk8s13p00of8e5vsjs7iivo0l6s@4ax.com" -->
<!-- inreplyto="uctqpv8mq220c3mse5sgvusrlso342p0vd@4ax.com" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Shawn Jefferson (<a href="mailto:shawnjefferson_at_24fightingchickens.com?Subject=Re:%20[cc65]%20Platform%20specific%20docs"><em>shawnjefferson_at_24fightingchickens.com</em></a>)<br>
<strong>Date:</strong> 2003-10-28 23:00:57
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3675.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<li><strong>In reply to:</strong> <a href="3661.html">Shawn Jefferson: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Mon, 27 Oct 2003 12:03:37 -0800, I wrote:

I have to revise my multiple load segment instructions since I didn't
understand how the stack, heap and bss segments were related.

&gt;With this setup I have two segments in my executable file that DOS
&gt;will load at $2000 and $8000 respectively, leaving the extended bank
&gt;window ($4000-$7FFF) alone.  Using this method you need to be careful
&gt;not to allocate too much memory since the BSS section is in the
&gt;smaller chunk of memory.  By carefully placing mycode into either
&gt;CODE, or CODE2 segments and not using malloc I was able to avoid any
&gt;potential problems.  As you can see, it may be easier to write your
&gt;own crt0.s file with the modified values.

This paragraph needs to read:

&gt;With this setup I have two segments in my executable file that DOS
&gt;will load at $2000 and $8000 respectively, leaving the extended bank
&gt;window ($4000-$7FFF) alone.  Using this method you need to be careful
&gt;not to use dynamic memory allocation (malloc and friends) since the BSS
&gt;section has been moved. The heap location is calculated using the stack
&gt;(located just below MEMTOP) and the BSS segment location. (See the _heap.s
&gt;library source file.) By carefully placing code into either CODE, or CODE2 segments
&gt;and not using malloc I was able to avoid any potential problems.  As you can see,
&gt;it may be easier to write your own crt0.s file with the modified values, and possibly
&gt;a modified _heap.s file.

&gt;[end]

Feel free to edit this, or change it around.  This was a first draft
and I probably didn't put things in the most succinct way possible.
Perhaps this is too much for the platform dependent documentation?

Christian can you look it over and add it to the atari.sgml file if
everything is to your liking?

Thanks,

--
Shawn Jefferson
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Platform%20specific%20docs">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3675.html">Ullrich von Bassewitz: "Re: [cc65] Platform specific docs"</a>
<li><strong>In reply to:</strong> <a href="3661.html">Shawn Jefferson: "Re: [cc65] Platform specific docs"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="../2003-09/3446.html">Groepaz: "Re: [cc65] Platform specific docs"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-10-28 23:04:45 CET</em>
</em>
</small>
</body>
</html>
