<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>cc65 mailing list archive: Re: [cc65] Optimizing code fails - F</title>
<meta name="Author" content="Ullrich von Bassewitz (uz_at_musoftware.de)">
<meta name="Subject" content="Re: [cc65] Optimizing code fails - Found the error!">
</head>
<body bgcolor="#FFFFFF" text="#000000">
<h1>Re: [cc65] Optimizing code fails - Found the error!</h1>
<!-- received="Sat Nov 22 23:27:50 2003" -->
<!-- isoreceived="20031122222750" -->
<!-- sent="Sat, 22 Nov 2003 23:27:45 +0100" -->
<!-- isosent="20031122222745" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz_at_musoftware.de" -->
<!-- subject="Re: [cc65] Optimizing code fails - Found the error!" -->
<!-- id="20031122222745.GB4497@trixie.musoftware.de" -->
<!-- inreplyto="200311221413.07400.geoffrey@pager.net" -->
<!-- expires="-1" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Ullrich von Bassewitz (<a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Optimizing%20code%20fails%20-%20Found%20the%20error!"><em>uz_at_musoftware.de</em></a>)<br>
<strong>Date:</strong> 2003-11-22 23:27:45
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="3811.html">Groepaz: "Re: [cc65] Optimizing code fails - Found the error!"</a>
<li><strong>In reply to:</strong> <a href="3810.html">Geoffrey Wossum: "Re: [cc65] Optimizing code fails - Found the error!"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3798.html">Groepaz: "Re: SPAMVERDACHT:[cc65] Optimizing code fails"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<pre>
On Sat, Nov 22, 2003 at 02:13:07PM -0600, Geoffrey Wossum wrote:
&gt; For gcc on the AVR microcontrollers, there's an __interrupt__ attribute that
&gt; is used for ISR's, which insures that proper prologue and epilogue code is
&gt; generated.

As mentioned before, this has already been discussed in detail a long time
ago, and it's not as easy as it looks on the first glance. I cannot find the
original discussion now, maybe it preceedes the mailing list archive. The
biggest problem is that the manipulation of the stack pointer is not interrupt
safe, so the stack pointer may be invalid when the interrupt routine is
entered. This means that the entry code will have to switch to another stack.
This stack has to be allocated somewhere, so just declaring something as
__interrupt__ or similar is not enough.


Regards


        Uz


-- 
Ullrich von Bassewitz                                  <a href="mailto:uz_at_musoftware.de?Subject=Re:%20[cc65]%20Optimizing%20code%20fails%20-%20Found%20the%20error!">uz_at_musoftware.de</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to <a href="mailto:majordomo_at_musoftware.de?Subject=Re:%20[cc65]%20Optimizing%20code%20fails%20-%20Found%20the%20error!">majordomo_at_musoftware.de</a> with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="3811.html">Groepaz: "Re: [cc65] Optimizing code fails - Found the error!"</a>
<li><strong>In reply to:</strong> <a href="3810.html">Geoffrey Wossum: "Re: [cc65] Optimizing code fails - Found the error!"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="3798.html">Groepaz: "Re: SPAMVERDACHT:[cc65] Optimizing code fails"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.3</a> 
: <em>2003-11-22 23:28:07 CET</em>
</em>
</small>
</body>
</html>
