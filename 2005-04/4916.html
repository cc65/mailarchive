<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Re: Target BBC - info only</title>
<meta name="Author" content="Kolja Nikolaus Sträter (k1kollus.de)" />
<meta name="Subject" content="Re: [cc65] Re: Target BBC - info only" />
<meta name="Date" content="2005-04-09" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Re: Target BBC - info only</h1>
<!-- received="Sat Apr  9 13:55:26 2005" -->
<!-- isoreceived="20050409115526" -->
<!-- sent="Sat, 09 Apr 2005 13:56:55 +0200" -->
<!-- isosent="20050409115655" -->
<!-- name="Kolja Nikolaus Sträter" -->
<!-- email="k1kollus.de" -->
<!-- subject="Re: [cc65] Re: Target BBC - info only" -->
<!-- id="4257C307.6050901@kollus.de" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="050405225506&#64;arcade.demon.co.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="4917.html" title="Kolja Nikolaus Sträter: &quot;Re: [cc65] Target BBC - info only&quot;">Next message</a> ]
[ <a href="4915.html" title="Jonathan Graham Harston: &quot;[cc65] Re: Nested Functions&quot;">Previous message</a> ]
[ <a href="4912.html" title="Jonathan Graham Harston: &quot;[cc65] Re: Target BBC - info only&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Kolja Nikolaus Sträter &lt;<a href="mailto:k1kollus.de?Subject=Re:%20[cc65]%20Re:%20Target%20BBC%20-%20info%20only">k1kollus.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2005-04-09 13:56:55</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi Jonathan,

thanks for your pointers. I've looked again a bit more closely at your 
website, a lot of information there, very interesting. Yes, Small-C has 
those things I needed, but I just had to do some initial programming to 
get into the feel of programming in C for the Beeb, and I didn't want to 
insert too many extra layers (to start with).

In fact, after seeing so much about BBC Basic on your website, it's 
almost tempting to write my program in BBC Basic with some assembler. 
But my problem with this is, that I want to implement on a number of 
different platforms, and C is the only standard that I can see that 
allows some form of single sourcedness. I'm moving on a circle of 
platforms currently, having to leave the BBC now, but coming back for 
the next stage in a while. I'll be looking at the Small-C code more 
closely then, to see where I can save some work.

It seems to me that our outlooks differ somewhat: you are coming from 
RiscOS/BBC Basic (you are still using it, I gather) and want the 
compiler and produced code to be compatible with that setting. I'm not 
really into that, I just want to write one single, though very flexible, 
program which will give me the control over the machine I always dreamed 
of. Incidentally, that is why I love the retro platforms: the simplicity 
of everything, especially as compared to the overloaded systems of 
today. Somehow I feel that my aim is similar to the initial writer of 
BBC Basic, Roger-&gt;Sohie Wilson, who I mentioned in a previous mail. Not 
only because he wrote BBC Basic, but he also designed the first Risc 
instruction set and was a 6502 expert (built the first Acorn machine). 
Everything reminds me of the overall aim of 'simplicity' - but that 
ought to be explained further and I'm off at a tangent again :-)

I'll contact you about your Small-C version, when I get back to the Beeb 
platform. What I like about Uz's tool chain is the almost compatibility 
with the standard, and it's nice code (despite anything he says about it :-)

All the best,

kol


Jonathan Graham Harston wrote:
&gt;&gt;Message-ID: &lt;4252A544.3040103&#64;kollus&#46;<!--nospam-->de&gt;
&gt; 
&gt;  
&gt; Kolja_Nikolaus_Sträter &lt;k&#64;kollus&#46;<!--nospam-->de&gt; wrote:
&gt; 
&gt;&gt;Just wanted to say that I've done a bit of initial delving into the
&gt;&gt;BBC-target problem. I needed some in- and output, so I got a couple of
&gt;&gt;routines working using OSWORD calls. Somebody must have done this
&gt;&gt;already, but I wanted to do this myself to get to know Uz's code a bit.
&gt;&gt;Anyway, reinventing a few small wheels can't do any harm :-)
&gt; 
&gt;  
&gt; Hi Kol.
&gt;  
&gt; Can I suggest you look at www.mdfs.net/System/C/6502/Small-C/v072
&gt; where I've been working on 'ANSI-ising' A.J.Travis' Small-C for
&gt; the BBC. Specifically, browse through includes/os.h and
&gt; includes/kernel.h. os.h functions modify the passed variables and
&gt; return an 'ok/not ok' flag. The kernel.h functions return their
&gt; return value.
&gt;  
&gt; source/sys.s has the 6502 source of many of the core library
&gt; functions.
&gt;  
&gt; The OS functions should be named 'os_*' as listed in os.h. I need
&gt; to add a few others:
&gt;  
&gt; os_escape() - check Escape flag:
&gt;    LDA &amp;FF, AND #&amp;80, return value
&gt; os_error() - generate an error:
&gt;    copy error number and string to &amp;0100, jump to cause error
&gt; os_report() - return pointer to last error:
&gt;    Read &amp;FD/&amp;FE, return value.
&gt;  
&gt; one of the signal() states should be 'error' to do a signal trap
&gt; equivalent of ON ERROR.
&gt;  
&gt; ...and the equivalents for kernel.h. I need to think a bit about
&gt; the parameters, etc., ultimately, you should be able to do
&gt; something like: fprint(&quot;%s&quot;,_kernel_report());
&gt;  
&gt; Also, somewhere, I've got some relocation code so that a 'C'
&gt; program can be compiled to load in high memory (&amp;8000-length) and
&gt; then it relocates itself to the current PAGE, clears screen to
&gt; reset high memory and RTSes to PAGE to execute.
&gt;  
&gt; And some sort of directive to specify actual load/exec addresses.
&gt; It would be theortically possible to compile a 'C' program as a
&gt; transient program loaded to the transient command area at
&gt; &amp;0900-&amp;0AFF.
&gt;  
&gt; main() { os_vdu(7); }
&gt;  
&gt; /should/ compile to LDA #7:JSR &amp;FFEE:LDA #0:RTS if appropriate
&gt; switches are set. Maybe even to: LDA #7:JMP &amp;FFEE :)
&gt;  
&gt; I'm going to be hugely busy for the next 30 days, but I'll try to
&gt; keep in touch.
&gt;  

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Apr  9 13:55:26 2005</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="4917.html" title="Next message in the list">Kolja Nikolaus Sträter: "Re: [cc65] Target BBC - info only"</a></li>
<li><dfn>Previous message</dfn>: <a href="4915.html" title="Previous message in the list">Jonathan Graham Harston: "[cc65] Re: Nested Functions"</a></li>
<li><dfn>In reply to</dfn>: <a href="4912.html" title="Message to which this message replies">Jonathan Graham Harston: "[cc65] Re: Target BBC - info only"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#4916" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#4916" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#4916" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2005-04-09 13:55:33 CEST
</em></small></p>
</body>
</html>
