<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] signals</title>
<meta name="Author" content="dominic beesley (dominic1brahms.demon.co.uk)" />
<meta name="Subject" content="Re: [cc65] signals" />
<meta name="Date" content="2005-05-30" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] signals</h1>
<!-- received="Mon May 30 23:12:01 2005" -->
<!-- isoreceived="20050530211201" -->
<!-- sent="Mon, 30 May 2005 16:49:33 +0100" -->
<!-- isosent="20050530154933" -->
<!-- name="dominic beesley" -->
<!-- email="dominic1brahms.demon.co.uk" -->
<!-- subject="Re: [cc65] signals" -->
<!-- id="429B360D.1030200@brahms.demon.co.uk" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20050530073244.GB16147&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="5033.html" title="Jonathan Graham Harston: &quot;[cc65] Re: signals&quot;">Next message</a> ]
[ <a href="5031.html" title="Jonathan Graham Harston: &quot;[cc65] Re: signals&quot;">Previous message</a> ]
[ <a href="5027.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] signals&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="5036.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] signals&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: dominic beesley &lt;<a href="mailto:dominic1brahms.demon.co.uk?Subject=Re:%20[cc65]%20signals">dominic1brahms.demon.co.uk</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2005-05-30 17:49:33</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Ullrich von Bassewitz wrote:

&gt;On Sun, May 29, 2005 at 12:51:15PM +0100, dominic beesley wrote:
&gt;  
&gt;
&gt;&gt;That's what I'm trying to do. However the BBC OS returns errors by
&gt;&gt;issuing a BRK instruction
&gt;&gt;so it means hanging off the interrupt vector somewhere. 
&gt;&gt;    
&gt;&gt;
&gt;
&gt;That's an interesting way to handle errors. How are error codes passed? Are
&gt;they loaded into a register prior to the BRK?
&gt;
&gt;  
&gt;
The &quot;standard&quot; is to have the byte after the BRK as an errorcode 
followed by a NULL
terminated string. Makes for very compact code in the OS ROMS but can be 
a pain in
the arse when writing code. (In the Risc OS operating system they 
recognised this and
have two forms of each call, one that issues something like BRK and one 
that returns
with carry set). The OS provides a separate vector for the BRK interrupt 
and it prepares
some zero-page registers with the PC value when the BRK happened. You 
can either
handle it or it drops back into the current language (usually BASIC) and 
lets it handle it.

&gt;&gt;I've
&gt;&gt;given up (for now) on signals
&gt;&gt;as suggested for these, but might need something later, I've just got to
&gt;&gt;work out whether BRK
&gt;&gt;signals may be received when not in an OS function.
&gt;&gt;    
&gt;&gt;
&gt;
&gt;Ok.
&gt;  
&gt;

A further thought on this... If I trap escape during OS functions (and 
set a flag that is
checked on return) would this make Escape handling safer....?

&gt;Regards
&gt;
&gt;
&gt;        Uz
&gt;
&gt;
&gt;  
&gt;

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon May 30 23:12:01 2005</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="5033.html" title="Next message in the list">Jonathan Graham Harston: "[cc65] Re: signals"</a></li>
<li><dfn>Previous message</dfn>: <a href="5031.html" title="Previous message in the list">Jonathan Graham Harston: "[cc65] Re: signals"</a></li>
<li><dfn>In reply to</dfn>: <a href="5027.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] signals"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="5036.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] signals"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="5036.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] signals"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#5032" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#5032" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#5032" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2005-05-30 23:12:04 CEST
</em></small></p>
</body>
</html>
