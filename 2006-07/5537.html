<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Loadable overlays</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Loadable overlays" />
<meta name="Date" content="2006-07-27" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Loadable overlays</h1>
<!-- received="Thu, 27 Jul 2006 09:33:46 +0200" -->
<!-- isoreceived="20060727073346" -->
<!-- sent="Thu, 27 Jul 2006 09:33:46 +0200" -->
<!-- isosent="20060727073346" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Loadable overlays" -->
<!-- id="20060727073346.GB12814@trixie.musoftware.de" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="dd67808221bd4c6bad6c484161c99890&#64;paytonbyrd.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="5538.html" title="Payton Byrd: &quot;Re: [cc65] Loadable overlays&quot;">Next message</a> ]
[ <a href="5536.html" title="Payton Byrd: &quot;[cc65] Loadable overlays&quot;">Previous message</a> ]
[ <a href="5536.html" title="Payton Byrd: &quot;[cc65] Loadable overlays&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="5538.html" title="Payton Byrd: &quot;Re: [cc65] Loadable overlays&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Loadable%20overlays">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2006-07-27 09:33:46</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!

On Tue, Jul 25, 2006 at 12:59:54PM -0400, Payton Byrd wrote:
&gt; One of the things we've talked about is loading modules in at run time.
&gt; These modules could be written in either CC65, CA65 or our interpreted BASIC.
&gt; I would love specific information on how CC65 sets up the 128 memory map and
&gt; how we can load modules to specific locations.  Also, is it possible to link a
&gt; CC65 object file that was compiled from C so that it always loads at a
&gt; specific spot on a specific bank and doesn't get linked with the CC65 runtime?

From internal.txt:

------------------------------------------------------------------------------
C128:   The startup code will reprogram the MMU, so that only the kernal ROM
        is enabled. This means, there are 41K of memory available to the
        program.
------------------------------------------------------------------------------

The layout as far as I remember is $2000 (BASIC Start) up to the char ROM and
I/O area.

o65 modules can be loaded to arbitrary addresses. The loader supplied with
cc65 uses memory from the heap, but this can easily change to use other
portions of the available system memory. However, load time linking is not
supported by ld65 per se, so will have to either write o65 modules in
assembler (without using the cc65 runtime), or use the same trick as Contiki
does (link in a symbol tables with the absolute addresses of the runtime
routines in the main program). The latter means that loadable modules do only
run with exactly one version of the main program.

Linking programs for specific addresses is easily possible, but linking
&quot;without the runtime&quot; is not, because this would in most cases leave
unsatisfied external references. There may be solutions, but this depends on
your problem.

I hope this information is at least helpful for a start. If you ask more
detailed questions, I may be able to supply more detailed information.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu, 27 Jul 2006 09:33:46 +0200</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="5538.html" title="Next message in the list">Payton Byrd: "Re: [cc65] Loadable overlays"</a></li>
<li><dfn>Previous message</dfn>: <a href="5536.html" title="Previous message in the list">Payton Byrd: "[cc65] Loadable overlays"</a></li>
<li><dfn>In reply to</dfn>: <a href="5536.html" title="Message to which this message replies">Payton Byrd: "[cc65] Loadable overlays"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="5538.html" title="Next message in this discussion thread">Payton Byrd: "Re: [cc65] Loadable overlays"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#5537" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#5537" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#5537" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2006-07-27 09:33:58 CEST
</em></small></p>
</body>
</html>
