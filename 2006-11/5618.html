<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] CC65 and Stack Pointer</title>
<meta name="Author" content="Groepaz (groepaz1gmx.net)" />
<meta name="Subject" content="Re: [cc65] CC65 and Stack Pointer" />
<meta name="Date" content="2006-11-29" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] CC65 and Stack Pointer</h1>
<!-- received="Wed Nov 29 03:53:09 2006" -->
<!-- isoreceived="20061129025309" -->
<!-- sent="Wed, 29 Nov 2006 03:53:04 +0100" -->
<!-- isosent="20061129025304" -->
<!-- name="Groepaz" -->
<!-- email="groepaz1gmx.net" -->
<!-- subject="Re: [cc65] CC65 and Stack Pointer" -->
<!-- id="200611290353.07861.groepaz@gmx.net" -->
<!-- charset="iso-8859-1" -->
<!-- inreplyto="456CF3D7.4020603&#64;asahi-net.or.jp" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="5619.html" title="Mark J. Reed: &quot;Re: [cc65] CC65 and Stack Pointer&quot;">Next message</a> ]
[ <a href="5617.html" title="Hiroji Kimura: &quot;Re: [cc65] CC65 and Stack Pointer&quot;">Previous message</a> ]
[ <a href="5617.html" title="Hiroji Kimura: &quot;Re: [cc65] CC65 and Stack Pointer&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="5619.html" title="Mark J. Reed: &quot;Re: [cc65] CC65 and Stack Pointer&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Groepaz &lt;<a href="mailto:groepaz1gmx.net?Subject=Re:%20[cc65]%20CC65%20and%20Stack%20Pointer">groepaz1gmx.net</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2006-11-29 03:53:04</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Wednesday 29 November 2006 03:43, Hiroji Kimura wrote:
&gt; What locations in the zero page does CC65 use?  Could you tell me which
&gt; document has that information? Also I wonder why our calculator works
&gt; even without saving registers and zero page locations.  We are calling a
&gt; c function within an interrupt and I am pretty sure that it will use
&gt; real 6502 registers. I guess we only have &quot;while(1);&quot; in our main function.

look at the linker script, it defines what zeropage locations to use. (you 
could also have the linker output a mapfile and look there)

&gt; Now, I am just curios. Why does cc65 generate codes which depend on
&gt; subroutines like pushax and the secondary stack?  I understand Small-c
&gt; implementation assumes a primary and a secondary registers.  I guess the
&gt; reason is to make porting the c compiler to different architectures
&gt; easier. Is it one of the reasons?

the main reason for doing that is that the hardware stack of the 6502 is only 
256 byte &quot;large&quot;, and also can not be placed anywhere in memory. using the 
hardware stack for everything (like local variables) would limit the compiler 
too much to make it really useable. the hardware stack is only used for 
return adresses (which already limits calling depth to 127 nested calls, not 
counting interrupts which use it aswell) and the software stack is used for 
all the other stuff that a C implementation requires (like local variables).

-- 

<a href="http://www.hitmen-console.org">http://www.hitmen-console.org</a>
<a href="http://www.gc-linux.org/docs/yagcd.html">http://www.gc-linux.org/docs/yagcd.html</a>
<a href="http://www.pokefinder.org">http://www.pokefinder.org</a>
<a href="http://ftp.pokefinder.org">http://ftp.pokefinder.org</a>

Women don't know what they want; they don't like what they have got. Men know 
very well what they want; having got it, they begin to lose interest. 
&lt;A.W.Adams&gt;

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Wed Nov 29 03:53:09 2006</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="5619.html" title="Next message in the list">Mark J. Reed: "Re: [cc65] CC65 and Stack Pointer"</a></li>
<li><dfn>Previous message</dfn>: <a href="5617.html" title="Previous message in the list">Hiroji Kimura: "Re: [cc65] CC65 and Stack Pointer"</a></li>
<li><dfn>In reply to</dfn>: <a href="5617.html" title="Message to which this message replies">Hiroji Kimura: "Re: [cc65] CC65 and Stack Pointer"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="5619.html" title="Next message in this discussion thread">Mark J. Reed: "Re: [cc65] CC65 and Stack Pointer"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#5618" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#5618" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#5618" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2006-11-29 03:53:14 CET
</em></small></p>
</body>
</html>
