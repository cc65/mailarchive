<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: RE: [cc65] Bankswitching with ld65</title>
<meta name="Author" content="Mark Keates (mark1mkeates.f9.co.uk)" />
<meta name="Subject" content="RE: [cc65] Bankswitching with ld65" />
<meta name="Date" content="2007-06-15" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>RE: [cc65] Bankswitching with ld65</h1>
<!-- received="Fri Jun 15 12:02:04 2007" -->
<!-- isoreceived="20070615100204" -->
<!-- sent="Fri, 15 Jun 2007 11:01:26 +0100" -->
<!-- isosent="20070615100126" -->
<!-- name="Mark Keates" -->
<!-- email="mark1mkeates.f9.co.uk" -->
<!-- subject="RE: [cc65] Bankswitching with ld65" -->
<!-- id="NFBBJIOMMDPAJJJCEIDGCENAEFAA.mark@mkeates.f9.co.uk" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="18034.19689.102257.494555&#64;hal.cling.gu.se" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="5723.html" title="MagerValp: &quot;RE: [cc65] Bankswitching with ld65&quot;">Next message</a> ]
[ <a href="5721.html" title="MagerValp: &quot;Re: [cc65] Bankswitching with ld65&quot;">Previous message</a> ]
[ <a href="5721.html" title="MagerValp: &quot;Re: [cc65] Bankswitching with ld65&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="5723.html" title="MagerValp: &quot;RE: [cc65] Bankswitching with ld65&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Mark Keates &lt;<a href="mailto:mark1mkeates.f9.co.uk?Subject=RE:%20[cc65]%20Bankswitching%20with%20ld65">mark1mkeates.f9.co.uk</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2007-06-15 12:01:26</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Sometimes I find it useful to give the memory section
the address of the offset it would have in the ROM itself.
Then its address (e.g. 24 bits) can be used in code to calc
the required 'bank' value you set the appropriate memory
register too in order to switch in the bank, e.g. for
making a table of jmp-addresses.

In the Segments section you then can use 'run=' to specific
the memory area that the linker will generate the runtime
addresses for labels within that bank.

MEMORY {
  ...
  ROM_AREA: start = $A000, size = $2000, type = rw;
  ROM0: start = $0000, size = $2000, type = ro, fill = yes, fillval = $FF,
file = %O;
  ROM1: start = $2000, size = $2000, type = ro, fill = yes, fillval = $FF,
file = %O;
  ...
}

SEGMENTS {
  ...
  BANK0: load = ROM0, run = ROM_AREA, type = wprot, define = yes;
  BANK1: load = ROM1, run = ROM_AREA, type = wprot, define = yes;
  ...
}

&gt; MH&gt; How would I set this up in the linker config file?
&gt;
&gt; You use multiple memory sections:
&gt;
&gt; MEMORY {
&gt;   BANK1: start = $8000, size = $4000;
&gt;   BANK2: start = $8000, size = $4000;
&gt; }
&gt;
&gt; then place your segments into whichever bank you want them.

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Jun 15 12:02:04 2007</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="5723.html" title="Next message in the list">MagerValp: "RE: [cc65] Bankswitching with ld65"</a></li>
<li><dfn>Previous message</dfn>: <a href="5721.html" title="Previous message in the list">MagerValp: "Re: [cc65] Bankswitching with ld65"</a></li>
<li><dfn>In reply to</dfn>: <a href="5721.html" title="Message to which this message replies">MagerValp: "Re: [cc65] Bankswitching with ld65"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="5723.html" title="Next message in this discussion thread">MagerValp: "RE: [cc65] Bankswitching with ld65"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="5723.html" title="Message sent in reply to this message">MagerValp: "RE: [cc65] Bankswitching with ld65"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#5722" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#5722" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#5722" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2007-06-15 12:02:07 CEST
</em></small></p>
</body>
</html>
