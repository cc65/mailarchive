<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Re: Macro naming</title>
<meta name="Author" content="Jonathan Graham Harston (jgh1arcade.demon.co.uk)" />
<meta name="Subject" content="[cc65] Re: Macro naming" />
<meta name="Date" content="2008-05-29" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Re: Macro naming</h1>
<!-- received="Fri May 30 00:00:36 2008" -->
<!-- isoreceived="20080529220036" -->
<!-- sent="29 May 2008 21:58:46 +0100" -->
<!-- isosent="20080529205846" -->
<!-- name="Jonathan Graham Harston" -->
<!-- email="jgh1arcade.demon.co.uk" -->
<!-- subject="[cc65] Re: Macro naming" -->
<!-- id="080529225502@arcade.demon.co.uk" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="6131.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Re: Macro naming&quot;">Next message</a> ]
[ <a href="6129.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Re: Macro naming&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="6131.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Re: Macro naming&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Jonathan Graham Harston &lt;<a href="mailto:jgh1arcade.demon.co.uk?Subject=Re:%20[cc65]%20Re:%20Macro%20naming">jgh1arcade.demon.co.uk</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2008-05-29 22:58:46</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>&gt; Message-ID: &lt;20080528170429.GA27975&#64;trikaliotis&#46;<!--nospam-->net&gt;
 
Spiro Trikaliotis wrote:
&gt; Is this really sensible?
 
Yes. How else does the source code know what it's targetted at.
 
&gt; If you start this, you could also start for some &quot;unusual&quot;
&gt; compilers like
 
Only if people want to make it rediculously difficult to work out
what predefined macros their compiler uses to specify a target.
 
&gt; What exactly do you want to achieve? I could not understand it from your
 
I'm updating a C compiler[1] and trying to ensure that it
consistantly predefines certain macros so that source code can be
written to take advantage of that and compile differently for
different targets. It happens all the time. Look at the source for
gcc or infozip or zmodem or kermit or cZ80Tube or loads of code
that is compilable on different platforms, eg:
 
#ifdef __riscos__
  setfileattr(fn, load, exec, attr);
#elif __win32__
  writeattr(fn, mdateoff, ro);  
#elif __macos__
  filer_setinf(fn, macfdate(mdateoff));
#endif
etc...
 
My copy of gcc defines __platform__ and __cpu__, ie two
underlines, lower case, two underlines, eg __win32__ __i586__.
 
cc65 defines __PLATFORM__, ie two underlines, upper case, two
underlines, eg __APPLE2__, __BBC__.
 
So, if code wants to be compilable with both cc65 and gcc, then
code has to test for both macros:
 
#if (__ATARI__ || __atari__)
 
Either cc65 and my Small-C should use __platform__, or we behalf
should petition the gcc authors to change gcc to use __PLATFORM__.
 
Even worse, infozip source code refers to MACOS, MSDOS, UNIX,
etc., but also to __human86k__ and __IBMPC__.
 
My code uses __platform__ and __cpu__.
 
________
[1] <a href="http://mdfs.net/System/C/BBC/Small-C/v073">http://mdfs.net/System/C/BBC/Small-C/v073</a>
 
-- 
J.G.Harston - jgh&#64;arcade&#46;<!--nospam-->demon.co.uk - mdfs.net/User/JGH
A Review of Sheffield City Council's Members' Allowances Scheme
                                  See <a href="http://mdfs.net/payreform">http://mdfs.net/payreform</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri May 30 00:00:36 2008</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="6131.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] Re: Macro naming"</a></li>
<li><dfn>Previous message</dfn>: <a href="6129.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] Re: Macro naming"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="6131.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] Re: Macro naming"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="6131.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Re: Macro naming"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#6130" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#6130" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#6130" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2008-05-30 00:00:38 CEST
</em></small></p>
</body>
</html>
