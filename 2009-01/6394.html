<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Stack adressing</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Stack adressing" />
<meta name="Date" content="2009-01-19" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Stack adressing</h1>
<!-- received="Mon Jan 19 19:34:38 2009" -->
<!-- isoreceived="20090119183438" -->
<!-- sent="Mon, 19 Jan 2009 19:32:14 +0100" -->
<!-- isosent="20090119183214" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Stack adressing" -->
<!-- id="20090119183214.GA19545@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="497498D2.3020400&#64;microclub.ch" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="6395.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Patch for linuxdoc documentation&quot;">Next message</a> ]
[ <a href="6393.html" title="Jonathan MASUR: &quot;[cc65] Stack adressing&quot;">Previous message</a> ]
[ <a href="6393.html" title="Jonathan MASUR: &quot;[cc65] Stack adressing&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Stack%20adressing">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-01-19 19:32:14</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Good evening!

On Mon, Jan 19, 2009 at 04:14:26PM +0100, Jonathan MASUR wrote:
&gt; Is there a way to change the way CC65 adress stack so instead of doing
&gt; indirect adressing :
&gt; &quot;lda [StackPtr],Y&quot;
&gt;
&gt; It would use some direct adressing to produce faster code :
&gt; &quot;lda Stack,Y&quot;

No, there is no easy way to do that. The compiler generated code will contain
stack accesses as well as the libraries. Without using tricks (like sp still
pointing to the stack so the library routines don't have to be changed), you
will have to change the compiler and use separate, rewritten C and runtime
libraries.

&gt; Of course the stack would be limited to 256 bytes, but at least it would
&gt; be much faster, and fixing the stack pointer would also be faster as it
&gt; would only involve some &quot;iny&quot; or &quot;dey&quot;.

It's not that easy, because you need to store the current stack top somewhere.
If the stack is fixed and of a limited size, you do still need a way to tell a
subroutine where it can start to store variables and temporaries. Besides
that, I doubt that resulting programs are really much faster, since variable
access is just a small part of a program. Reducing the cycle count of these
instructions from 5 to 3 or 4 will probably have a measurable effect but not a
noticeable one.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Jan 19 19:34:38 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="6395.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] Patch for linuxdoc documentation"</a></li>
<li><dfn>Previous message</dfn>: <a href="6393.html" title="Previous message in the list">Jonathan MASUR: "[cc65] Stack adressing"</a></li>
<li><dfn>In reply to</dfn>: <a href="6393.html" title="Message to which this message replies">Jonathan MASUR: "[cc65] Stack adressing"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#6394" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#6394" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#6394" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-01-19 19:34:39 CET
</em></small></p>
</body>
</html>
