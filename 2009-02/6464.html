<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Atari relocation format</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Atari relocation format" />
<meta name="Date" content="2009-02-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Atari relocation format</h1>
<!-- received="Thu Feb  5 20:59:01 2009" -->
<!-- isoreceived="20090205195901" -->
<!-- sent="Thu, 5 Feb 2009 20:56:22 +0100" -->
<!-- isosent="20090205195622" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Atari relocation format" -->
<!-- id="20090205195622.GA16077@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="7b4dai$eukv1&#64;dmzms99901.na.baesystems.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="6465.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Zeropage Vars&quot;">Next message</a> ]
[ <a href="6463.html" title="steve-cc65: &quot;Re: [cc65] Zeropage Vars&quot;">Previous message</a> ]
[ <a href="6460.html" title="Winslow, Dan D (US SSA): &quot;[cc65] Atari relocation format&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Atari%20relocation%20format">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-02-05 20:56:22</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Thu, Feb 05, 2009 at 07:10:23AM -0800, Winslow, Dan D (US SSA) wrote:
&gt; The CC65 documentation mentions a .o65 relocation format, and that 'the
&gt; assembler produces relocatable object files'. I don't see any option for
&gt; producing .o65 files, and I was wondering if that format is the same as
&gt; the .o file format.
 
No. The .o files output by the assembler are not the same as the .o65 format.
The latter was developed by Andre Fachat with native relocation in mind. See
here for the specs:

        <a href="http://www.6502.org/users/andre/o65/fileformat.html">http://www.6502.org/users/andre/o65/fileformat.html</a>

.o65 files can be generated by the linker ld65.

&gt; Also, if it is not the same format, is there a
&gt; structural description of the .o files available? My goal is to be able
&gt; to use/write a relocating loader ( maybe like mod_load in the library
&gt; sources? )  that will allow me to do run-time relocation of object
&gt; files.

Unlike the o65 format, the internal object file format was never designed to
be handled by a memory contrained 8-bit CPU. The files support anything the
assembler does: Complete expression trees, assertions, segments, some sort of
debug information and so on. In addition, the format has changed over time and
this may happen again. The od65 utility is able to peek into the internals.

My suggestion would be to use the .o65 format. I would even suggest to use
mod_load if possible for your purposes, because it's highly optimized (and
still ~500 Bytes in size). It doesn't have all o65 features, like symbol
relocation, but this would increase code size even more.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Feb  5 20:59:01 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="6465.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] Zeropage Vars"</a></li>
<li><dfn>Previous message</dfn>: <a href="6463.html" title="Previous message in the list">steve-cc65: "Re: [cc65] Zeropage Vars"</a></li>
<li><dfn>In reply to</dfn>: <a href="6460.html" title="Message to which this message replies">Winslow, Dan D (US SSA): "[cc65] Atari relocation format"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#6464" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#6464" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#6464" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-02-05 20:59:02 CET
</em></small></p>
</body>
</html>
