<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] STACKSIZE - What's the rig</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] STACKSIZE - What's the right size?" />
<meta name="Date" content="2009-02-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] STACKSIZE - What's the right size?</h1>
<!-- received="Thu Feb  5 22:10:44 2009" -->
<!-- isoreceived="20090205211044" -->
<!-- sent="Thu, 5 Feb 2009 22:10:38 +0100" -->
<!-- isosent="20090205211038" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] STACKSIZE - What's the right size?" -->
<!-- id="f97798c20902051310o229541deq5c648c62682b8732@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="498B4E73.10205&#64;arcadehacking.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="6468.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] STACKSIZE - What's the right size?&quot;">Next message</a> ]
[ <a href="6466.html" title="steve-cc65: &quot;[cc65] STACKSIZE - What's the right size?&quot;">Previous message</a> ]
[ <a href="6466.html" title="steve-cc65: &quot;[cc65] STACKSIZE - What's the right size?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="6468.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] STACKSIZE - What's the right size?&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20STACKSIZE%20-%20What's%20the%20right%20size?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-02-05 22:10:38</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi Steve,

&gt; I'm assuming this is some sort of CC65/C specific stack rather than a CPU
&gt; register jsr/push/pop stack.

Yes.

&gt; If so, what is the right size or minimum size
&gt; I should allocate for this?  If I have simple functions that do not pass a
&gt; lot of parameters can this be much, much smaller?

Yes.

If you have some emulator with debugger it should be quite easy to
determine the stacksize actually needed by a certain program by
setting the stack to some pattern at program start and check until
which point the pattern is still present at program exit.

Alternatively you can have the program determine its stacksize itself.
See here for a quick&amp;dirty but nevertheless functional example using
an atexit() handler:

<a href="http://contiki.cvs.sourceforge.net/viewvc/*checkout*/contiki/contiki-apple2/main.c">http://contiki.cvs.sourceforge.net/viewvc/*checkout*/contiki/contiki-apple2/main.c</a>

Although my last CVS log for the corresponding linker config file
probably isn't perfectly self-explanatory ;-) it might be interesting
nevertheless:

==========
Reduced the stacksize to 256 bytes. Measurements have shown that the
actual stack usage seems to be less than 100 bytes but that wouldn't
allow for any additional scenario.

If we should ever come to the point where 128 bytes are missing than
further stack size reduction should be considered !
==========

Best, Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Feb  5 22:10:44 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="6468.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] STACKSIZE - What's the right size?"</a></li>
<li><dfn>Previous message</dfn>: <a href="6466.html" title="Previous message in the list">steve-cc65: "[cc65] STACKSIZE - What's the right size?"</a></li>
<li><dfn>In reply to</dfn>: <a href="6466.html" title="Message to which this message replies">steve-cc65: "[cc65] STACKSIZE - What's the right size?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="6468.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] STACKSIZE - What's the right size?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#6467" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#6467" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#6467" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-02-05 22:10:47 CET
</em></small></p>
</body>
</html>
