<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] HEAP from here to there</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] HEAP from here to there" />
<meta name="Date" content="2009-06-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] HEAP from here to there</h1>
<!-- received="Fri Jun  5 23:57:32 2009" -->
<!-- isoreceived="20090605215732" -->
<!-- sent="Fri, 5 Jun 2009 23:54:25 +0200" -->
<!-- isosent="20090605215425" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] HEAP from here to there" -->
<!-- id="20090605215425.GA21776@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="000901c9e577$d7ffbc20$443efea9&#64;monarch" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="6589.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] HEAP from here to there&quot;">Next message</a> ]
[ <a href="6587.html" title="Greg King: &quot;Re: [cc65] HEAP from here to there&quot;">Previous message</a> ]
[ <a href="6584.html" title="Greg King: &quot;Re: [cc65] HEAP from here to there&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20HEAP%20from%20here%20to%20there">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-06-05 23:54:25</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Thu, Jun 04, 2009 at 08:51:29PM -0400, Greg King wrote:
&gt; His description is what I had in mind when I put that &quot;HEAP:&quot; line in the
&gt; LD65 configure files.  But, Uz pointed out that my idea would have problems
&gt; on platforms that must copy the stack-pointer, at run-time, from system
&gt; variables (Apple2, Atari, and Pet, for example).  He left &quot;HEAP:&quot; in those
&gt; files because he planned to move the heap constructor out of the common part
&gt; of the library, and into the platform-specific part of the library.  Then,
&gt; we could use the configure-file method on platforms that allow it.

Thanks for reminding me. Moving the heap module into the platform directories
may be unnecessary, if we can get rid of the initialization code, because the
variables can be changed easily by the startup code for special needs. Because
this is even possible today and even for user programs, there's no urgent need
for a general solution in the config file. But when considering such a
solution, I have to admit that I don't like the idea of using segments that
contain nothing just to use the automatically generated start and end
addresses. Using symbols in the config file as Oliver did is an easier
solution and - provided that linker defined addresses can be used, which I
will have to check - more straightforward.

On Fri, Jun 05, 2009 at 01:53:32PM -0400, Greg King wrote:
&gt; I think that my way is both more difficult, and easier, to customize.  If a
&gt; programmer wanted to force the heap to sit between two absolute addresses,
&gt; then your style is easier to edit.  But, if one wanted to put a
&gt; specially-named segment between the BSS and the heap, then my style would
&gt; let one simply insert that segment's line into the configure-file --
&gt; nothing else would need to be changed.

This is also true for Olivers solution if __RAM_LAST__ is used, because this
value adjusts automatically, if you place another segment in the RAM memory
area.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Jun  5 23:57:32 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="6589.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] HEAP from here to there"</a></li>
<li><dfn>Previous message</dfn>: <a href="6587.html" title="Previous message in the list">Greg King: "Re: [cc65] HEAP from here to there"</a></li>
<li><dfn>In reply to</dfn>: <a href="6584.html" title="Message to which this message replies">Greg King: "Re: [cc65] HEAP from here to there"</a></li>
<!-- lnextthread="start" -->
<li><a name="replies" id="replies"></a>
<dfn>Maybe reply</dfn>: <a href="../2009-05/6581.html" title="Message sent in reply to this message">Thomas Giesel: "Re: Re: [cc65] HEAP from here to there"</a></li>
<li><dfn>Maybe reply</dfn>: <a href="6585.html" title="Message sent in reply to this message">Thomas Giesel: "Re: Re: [cc65] HEAP from here to there"</a></li>
<li><dfn>Reply</dfn>:  <a href="6591.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] HEAP from here to there"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#6588" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#6588" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#6588" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-06-05 23:57:33 CEST
</em></small></p>
</body>
</html>
