<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Overlay Demo: C64 Port ?</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] Overlay Demo: C64 Port ?" />
<meta name="Date" content="2009-10-02" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Overlay Demo: C64 Port ?</h1>
<!-- received="Fri, 2 Oct 2009 21:54:33 +0200" -->
<!-- isoreceived="20091002195433" -->
<!-- sent="Fri, 2 Oct 2009 21:54:33 +0200" -->
<!-- isosent="20091002195433" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] Overlay Demo: C64 Port ?" -->
<!-- id="f97798c20910021254u68f0ca0cy1485ed1acf4b66f3@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20091002144308.GA31818&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7121.html" title="Thomas Giesel: &quot;[cc65] Another fix/workaround for cbm_dir.c&quot;">Next message</a> ]
[ <a href="7119.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Overlay Demo: C64 Port ?&quot;">Previous message</a> ]
[ <a href="7114.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Overlay Demo: C64 Port ?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="7118.html" title="Oliver Schmidt: &quot;Re: [cc65] Overlay Demo: C64 Port ?&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Overlay%20Demo:%20C64%20Port%20?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-10-02 21:54:33</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt; [...] As you can see from
&gt; this list, your approach is actually better for things like an operating
&gt; system, where applications are loosely coupled and may be written and managed
&gt; independently from the main app (the OS).

Like for example Contiki 1.x which therefore uses this approach.

&gt; Olivers approach is better suited if
&gt; the overlays are actually part of the main program and all you need overlays
&gt; for is to gain more memory.

Maybe some additional aspect:

- If the chunks of code to be loaded by the program are so large that
only one fits into memory at the same time than there's no real
benefit in the whole relocation feature.

- If parts of the C-library come from labels of the main module while
others are actually linked into the loadable module (because they were
not needed by the main module) then this can cause nasty effects
inside the C-library.

- If parts of the C-library get linked into the loadable modules that
contain constructors/destructors those won't be called.

From my experience you have to have very intimate knowledge of the
C-library (ideally you've written it) so you can add the &quot;right&quot;
strategic '-u' options when linking the main module in order have the
problematic C-library parts for sure linked into it.

So after all from my perspective this approach is indeed very cool -
but it's still a fragile hack. The &quot;single link to multiple output
files&quot; approach on the other hand is way more simple and stable
compared to that. Therefore it should be propagated to the non-insider
cc65 user.

Surely the user must manually adjust the amount of code he puts into
the overlays to the memory area size. But looking at map files and
manual adjusting code placement is typically necessary for overlay
linking anyway to make the several overlays match in size.

Best, Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri, 2 Oct 2009 21:54:33 +0200</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7121.html" title="Next message in the list">Thomas Giesel: "[cc65] Another fix/workaround for cbm_dir.c"</a></li>
<li><dfn>Previous message</dfn>: <a href="7119.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] Overlay Demo: C64 Port ?"</a></li>
<li><dfn>In reply to</dfn>: <a href="7114.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] Overlay Demo: C64 Port ?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7118.html" title="Next message in this discussion thread">Oliver Schmidt: "Re: [cc65] Overlay Demo: C64 Port ?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7120" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7120" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7120" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-10-02 21:54:44 CEST
</em></small></p>
</body>
</html>
