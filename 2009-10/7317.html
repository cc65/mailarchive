<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] .global vs .export vs what</title>
<meta name="Author" content="Groepaz (groepaz1gmx.net)" />
<meta name="Subject" content="Re: [cc65] .global vs .export vs what i really need :)" />
<meta name="Date" content="2009-10-25" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] .global vs .export vs what i really need :)</h1>
<!-- received="Sun Oct 25 23:20:13 2009" -->
<!-- isoreceived="20091025222013" -->
<!-- sent="Sun, 25 Oct 2009 23:21:05 +0100" -->
<!-- isosent="20091025222105" -->
<!-- name="Groepaz" -->
<!-- email="groepaz1gmx.net" -->
<!-- subject="Re: [cc65] .global vs .export vs what i really need :)" -->
<!-- id="200910252321.05432.groepaz@gmx.net" -->
<!-- charset="utf-8" -->
<!-- inreplyto="20091025203805.GA7764&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7318.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] .global vs .export vs what i really need :)&quot;">Next message</a> ]
[ <a href="7316.html" title="Oliver Schmidt: &quot;Re: [cc65] ca65 --create-dep&quot;">Previous message</a> ]
[ <a href="7313.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] .global vs .export vs what i really need :)&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="7318.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] .global vs .export vs what i really need :)&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Groepaz &lt;<a href="mailto:groepaz1gmx.net?Subject=Re:%20[cc65]%20.global%20vs%20.export%20vs%20what%20i%20really%20need%20:)">groepaz1gmx.net</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-10-25 23:21:05</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Sonntag 25 Oktober 2009, Ullrich von Bassewitz wrote:
&gt; Hi!
&gt;
&gt; On Sat, Oct 24, 2009 at 11:22:25PM +0200, Groepaz wrote:
&gt; &gt; ok well then.... its probably a bug in the assembler =)
&gt;
&gt; No, it's not a bug, it's a feature :-)

see my other mail :)

&gt; .proc starts a scope, so the symbols within .proc/.endproc are local to the
&gt; new scope. Using explicit scope specification with :: does not handle
&gt; forward references, because scopes are different from symbols (see
&gt; <a href="http://www.cc65.org/doc/ca65-7.html#ss7.4">http://www.cc65.org/doc/ca65-7.html#ss7.4</a>).
&gt;
&gt; The solution is probably simple: Don't use scopes. The names of your
&gt; symbols seem to be choosen to be distinct anyway, so there's no real need
&gt; to enclose each one in it's own scope. Your example without scopes:

thats not an option. it's compiler generated code, which uses scopes, and i 
cant do anything about it. i could remove them from the patterns that i 
generate myself, but that doesnt really change anything (and removing them 
would sometimes break other stuff). i must be able to &quot;export&quot; a symbol from 
within a scope to global namespace, so i can make forward references to it.

(using the scopes has other benefits too, which i dont want to miss - like 
beeing able to determine which parts of the code belong together and can be 
moved around as one entity, there is no other way to do this.)

the only way i can do it right now is to use distinct prefixes for the 
offending symbols too, and then create &quot;prototypes&quot; using .export for them - 
but thats very ugly, and i really want to avoid it.

so i still say whats needed is a pseudoop that works just like export, but 
doesnt actually mark the symbol as exported. shouldnt be hard to add at 
all :)

-- 

<a href="http://www.hitmen-console.org">http://www.hitmen-console.org</a>    <a href="http://magicdisk.untergrund.net">http://magicdisk.untergrund.net</a>
<a href="http://www.pokefinder.org">http://www.pokefinder.org</a>        <a href="http://ftp.pokefinder.org">http://ftp.pokefinder.org</a>

Irren ist menschlich. Aber wer richtigen Mist bauen will, braucht einen 
Computer.

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Oct 25 23:20:13 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7318.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] .global vs .export vs what i really need :)"</a></li>
<li><dfn>Previous message</dfn>: <a href="7316.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] ca65 --create-dep"</a></li>
<li><dfn>In reply to</dfn>: <a href="7313.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] .global vs .export vs what i really need :)"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7318.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] .global vs .export vs what i really need :)"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="7318.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] .global vs .export vs what i really need :)"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7317" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7317" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7317" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-10-25 23:20:16 CET
</em></small></p>
</body>
</html>
