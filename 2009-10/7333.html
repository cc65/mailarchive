<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Atari __RESERVED_MEMORY__</title>
<meta name="Author" content="Fatih Aygün (cyco1301yahoo.com)" />
<meta name="Subject" content="[cc65] Atari __RESERVED_MEMORY__" />
<meta name="Date" content="2009-10-26" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Atari __RESERVED_MEMORY__</h1>
<!-- received="Mon Oct 26 23:12:22 2009" -->
<!-- isoreceived="20091026221222" -->
<!-- sent="Mon, 26 Oct 2009 15:12:00 -0700 (PDT)" -->
<!-- isosent="20091026221200" -->
<!-- name="Fatih Aygün" -->
<!-- email="cyco1301yahoo.com" -->
<!-- subject="[cc65] Atari __RESERVED_MEMORY__" -->
<!-- id="943648.31443.qm@web56506.mail.re3.yahoo.com" -->
<!-- charset="iso-8859-1" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7334.html" title="Oliver Schmidt: &quot;Re: [cc65] Re: TGI summary (Atari update)&quot;">Next message</a> ]
[ <a href="7332.html" title="Fatih Aygün: &quot;[cc65] Re: TGI summary (Atari update)&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="7338.html" title="Daniel Serpell: &quot;Re: [cc65] Atari __RESERVED_MEMORY__&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Fatih Aygün &lt;<a href="mailto:cyco1301yahoo.com?Subject=Re:%20[cc65]%20Atari%20__RESERVED_MEMORY__">cyco1301yahoo.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-10-26 23:12:00</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

I remember that this linker symbol was added a couple of years ago after a discussion
about atari tgi drivers, which were non-existant at the time.

The problem is that the docs list some values to be used with some graphics modes.
Some of the values are just 1. They work. But the rest are one less than what is actually
needed. This is caused by an OS bug, which probably does some strict &gt; comparison
instead of a &gt;=. This is the same reason of the modes that need 1 byte of memory exist.

My problem is that, in atari, in order to tgi drivers to be used, the user must specify the
reserved memory size for the mode he needs. Forgetting to do so will, quite probably, 
be the #1 source of user errors. The bad things is that, when the driver tries to initialize
the graphics modes, and fails because of insufficient memory, the screen will go black.
It won't be able to go back to the text mode, because OS will think that it is 1 byte short
of memory. Result: the user won't even see an error message, just a black screen. I think
the same scenario is valid for the native _graphics().

Ofcourse I can add a pre-test to see if there is enough memory before switching. But
I think this alternative is more elegant:

Atari startup code consume all available memory minus reserved memory. Everything
would be much simpler if it consumed just one byte less. The docs (and every atari
document about that matter on the web) would be giving the correct values, with the
unnecessary 1's gone and the graphics functions could return to text mode in case of
failure.

Thanks,
Fatih.


      
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Oct 26 23:12:22 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7334.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Re: TGI summary (Atari update)"</a></li>
<li><dfn>Previous message</dfn>: <a href="7332.html" title="Previous message in the list">Fatih Aygün: "[cc65] Re: TGI summary (Atari update)"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7338.html" title="Next message in this discussion thread">Daniel Serpell: "Re: [cc65] Atari __RESERVED_MEMORY__"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="7338.html" title="Message sent in reply to this message">Daniel Serpell: "Re: [cc65] Atari __RESERVED_MEMORY__"</a></li>
<li><dfn>Reply</dfn>:  <a href="7350.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Atari __RESERVED_MEMORY__"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7333" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7333" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7333" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-10-26 23:12:24 CET
</em></small></p>
</body>
</html>
