<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Multiplication</title>
<meta name="Author" content="Karri Kaksonen (karri1sipo.fi)" />
<meta name="Subject" content="Re: [cc65] Multiplication" />
<meta name="Date" content="2009-11-02" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Multiplication</h1>
<!-- received="Mon Nov  2 17:26:38 2009" -->
<!-- isoreceived="20091102162638" -->
<!-- sent="Mon, 02 Nov 2009 18:25:39 +0200" -->
<!-- isosent="20091102162539" -->
<!-- name="Karri Kaksonen" -->
<!-- email="karri1sipo.fi" -->
<!-- subject="Re: [cc65] Multiplication" -->
<!-- id="4AEF0803.6040500@sipo.fi" -->
<!-- charset="UTF-8" -->
<!-- inreplyto="20091102155034.GA20951&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7475.html" title="Oliver Schmidt: &quot;Re: [cc65] Colormania (was: TGI summary)&quot;">Next message</a> ]
[ <a href="7473.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] TGI blit (was: Colormania)&quot;">Previous message</a> ]
[ <a href="7471.html" title="Ullrich von Bassewitz: &quot;[cc65] Multiplication&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="7497.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Multiplication&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Karri Kaksonen &lt;<a href="mailto:karri1sipo.fi?Subject=Re:%20[cc65]%20Multiplication">karri1sipo.fi</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-11-02 17:25:39</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Ullrich von Bassewitz wrote:
&gt; For some reasons related to TGI and other stuff, I need to redo multiplication
&gt; and - in a second step - divisions. So here's a question:
&gt;
&gt; Are there some platforms with multiplication or division in hardware, and if
&gt; so, what does it do?
&gt;
&gt; Regards
&gt;
&gt;
&gt;         Uz
&gt;
&gt;
&gt;   

The Lynx has a few (16bit * 16bit += 32bit) and (32bit / 16bit = 32bit) 
functions in hardware.

0xAABB * 0xCCDD = 0xEEFFGGHH (accumulate in 0xJJKKLLMM)

0xEEFFGGHH / 0xNNPP = 0xAABBCCDD

The signed multiply has a bug. 0x8000 is a positive number while 0x0000 
is a negative number.
There is also a remainder function that is too buggy to be usable. In 
theory 0xJJKKLLMM contains the remainder after a division.

The math cannot be used while Suzy is drawing sprites. So you have to 
poll a bit to find out if the hardware is busy or not.

If you start a 16 by 16 multiply and immediately write to register EE 
starting a divide we get something defined as:
&quot;As a compromise between the square root and qube root desires of the 
software people, and the schedule desires of the management, we have 
decided to incorporate the function of QbertRoot. &quot;

I have yet to find out if it can be used for anything...

Math Timing
Multiplies with out sign or accumulate take 44 ticks to complete.
Multiplies with sign and accumulate take 54 ticks to complete.

Divides take 176 + 14*N ticks where N is the number of most significant 
zeros in the divisor.
--
Karri

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Nov  2 17:26:38 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7475.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Colormania (was: TGI summary)"</a></li>
<li><dfn>Previous message</dfn>: <a href="7473.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] TGI blit (was: Colormania)"</a></li>
<li><dfn>In reply to</dfn>: <a href="7471.html" title="Message to which this message replies">Ullrich von Bassewitz: "[cc65] Multiplication"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7497.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] Multiplication"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="7497.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Multiplication"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7474" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7474" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7474" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-11-02 17:26:40 CET
</em></small></p>
</body>
</html>
