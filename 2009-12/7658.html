<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] RODATA strings</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] RODATA strings" />
<meta name="Date" content="2009-12-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] RODATA strings</h1>
<!-- received="Sat Dec  5 23:47:27 2009" -->
<!-- isoreceived="20091205224727" -->
<!-- sent="Sat, 5 Dec 2009 23:47:18 +0100" -->
<!-- isosent="20091205224718" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] RODATA strings" -->
<!-- id="20091205224718.GA6854@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="DDF27C15752A48F3ACF1AB02C773770A&#64;ORANGE2" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7659.html" title="Ullrich von Bassewitz: &quot;.deb Patches (was: [cc65] More size reductions to atari libs)&quot;">Next message</a> ]
[ <a href="7657.html" title="Daniel Serpell: &quot;Re: [cc65] More size reductions to atari libs&quot;">Previous message</a> ]
[ <a href="7649.html" title="Shawn Jefferson: &quot;[cc65] RODATA strings&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="7660.html" title="Groepaz: &quot;Re: [cc65] RODATA strings&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20RODATA%20strings">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-12-05 23:47:18</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Tue, Dec 01, 2009 at 10:42:20PM -0800, Shawn Jefferson wrote:
&gt;    I was looking at an app I wrote trying to reduce size and I noticed I have
&gt;    quite a few strings that are the same in cputs (press any key type
&gt;    messages) calls.Â  Does cc65 already remove redundancy with these read-only
&gt;    strings?

Ok, I've used this as a motivation to add the changes to the literal string
handling I had in mind for a long time (actually, it was a complete rewrite).

String literals are now stored together with other function data and merged if
possible at the end of the compile run.

Visible differences to 2.13 are:

  * String literals from static functions that aren't used are now removed
    together with the function. In 2.13, the function code and data was
    removed, but literal strings remained in the literal pool.

  * Readonly string literals are merged if possible. This is also true for
    partial strings, which means &quot;world&quot; is merged with &quot;hello world&quot;.

  * New #pragma writable-strings allows fine grained control of literal string
    storage.

So if your program uses more than just a few strings, chances are that the
binary is now smaller than before.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Dec  5 23:47:27 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7659.html" title="Next message in the list">Ullrich von Bassewitz: ".deb Patches (was: [cc65] More size reductions to atari libs)"</a></li>
<li><dfn>Previous message</dfn>: <a href="7657.html" title="Previous message in the list">Daniel Serpell: "Re: [cc65] More size reductions to atari libs"</a></li>
<li><dfn>In reply to</dfn>: <a href="7649.html" title="Message to which this message replies">Shawn Jefferson: "[cc65] RODATA strings"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7660.html" title="Next message in this discussion thread">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="7660.html" title="Message sent in reply to this message">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7658" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7658" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7658" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-12-05 23:47:29 CET
</em></small></p>
</body>
</html>
