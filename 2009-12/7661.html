<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] RODATA strings</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] RODATA strings" />
<meta name="Date" content="2009-12-06" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] RODATA strings</h1>
<!-- received="Sun Dec  6 08:59:16 2009" -->
<!-- isoreceived="20091206075916" -->
<!-- sent="Sun, 6 Dec 2009 08:59:07 +0100" -->
<!-- isosent="20091206075907" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] RODATA strings" -->
<!-- id="20091206075907.GA24529@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="200912060639.18260.groepaz&#64;gmx.net" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7662.html" title="Groepaz: &quot;Re: [cc65] RODATA strings&quot;">Next message</a> ]
[ <a href="7660.html" title="Groepaz: &quot;Re: [cc65] RODATA strings&quot;">Previous message</a> ]
[ <a href="7660.html" title="Groepaz: &quot;Re: [cc65] RODATA strings&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="7662.html" title="Groepaz: &quot;Re: [cc65] RODATA strings&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20RODATA%20strings">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2009-12-06 08:59:07</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Sun, Dec 06, 2009 at 06:39:16AM +0100, Groepaz wrote:
&gt; i recently stumbled about that after
&gt;
&gt; #pragma rodata-name (push,&quot;MENUOVLRODATA&quot;)
&gt; ...
&gt; cputs(&quot;foo&quot;);
&gt;
&gt; the &quot;foo&quot; string would not actually end up in the rodata segment i defined,
&gt; but in the regular one. could that be fixed too ? :)

That's difficult to achieve. If the compiler delays the output of the strings
until end of compile in the hope that some of them can be merged, they will go
into the rodata segment that is active at that time. Remembering not only the
writable-strings setting, but also the name of the segment that was active at
that point of compilation and finally doing the merge considering also the
segment names is an additional effort probably not worth the trouble.

What I can offer is a command line option that causes literals to be output
immediately in the local data segment of the function. This would allow
honouring the segment #pragmas, but switch off merging of duplicates.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Dec  6 08:59:16 2009</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7662.html" title="Next message in the list">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<li><dfn>Previous message</dfn>: <a href="7660.html" title="Previous message in the list">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<li><dfn>In reply to</dfn>: <a href="7660.html" title="Message to which this message replies">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="7662.html" title="Next message in this discussion thread">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="7662.html" title="Message sent in reply to this message">Groepaz: "Re: [cc65] RODATA strings"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7661" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7661" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7661" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2009-12-06 08:59:18 CET
</em></small></p>
</body>
</html>
