<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Support for runtime / libs</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Support for runtime / libs with self-modifying-code?" />
<meta name="Date" content="2010-01-26" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Support for runtime / libs with self-modifying-code?</h1>
<!-- received="Tue Jan 26 11:37:19 2010" -->
<!-- isoreceived="20100126103719" -->
<!-- sent="Tue, 26 Jan 2010 11:37:12 +0100" -->
<!-- isosent="20100126103712" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Support for runtime / libs with self-modifying-code?" -->
<!-- id="20100126103712.GB23729@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="f97798c21001260151qdc7f5e1q99a53759f1141159&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="7774.html" title="Fatih Aygün: &quot;Re: [cc65] TGI mode switch without tgi_clear()&quot;">Next message</a> ]
[ <a href="7772.html" title="Oliver Schmidt: &quot;Re: [cc65] Support for runtime / libs with self-modifying-code?&quot;">Previous message</a> ]
[ <a href="7772.html" title="Oliver Schmidt: &quot;Re: [cc65] Support for runtime / libs with self-modifying-code?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="../2010-04/8158.html" title="Chiron Bramberger: &quot;[cc65] Commodore PET keyboard scanning&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Support%20for%20runtime%20/%20libs%20with%20self-modifying-code?">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-01-26 11:37:12</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Tue, Jan 26, 2010 at 10:51:58AM +0100, Oliver Schmidt wrote:
&gt; The cc65 C library in fact contains both in the shared part (i.e.
&gt; runtime/callirq.s) and in several target specific parts (i.e.
&gt; apple2/mcbdefault.s) SMC. I added some myself and didn't have any
&gt; issues. Therefore I'm having a hard time understanding your concern.

The parts you're talking about are small parts that are placed in the data
segment because what they must do is almost impossible to achieve without self
modifying code. As far as I understand it, Christian talks about large
portions of self modifying code. Almost all functions from string.h could be
rewritten saving a few bytes and cycles. 

The problem with it is similar to Christians stack proposal: The new functions
would be a special case. We cannot remove the current functions, because
they're necessary if the code goes into a ROM. So this would have a high
impact on maintainability.

Besides that, debugging is more problematic than before. I once had an ugly
memory overwrite condition in Elite that happened once every 20-30 minutes of
game play. I wasn't able to track it down for months, because it happened so
rarely. At that time I was using self modifying code in the game. When I
removed the self moidying code, I was able to mark the code segment as &quot;write
only&quot; in VICE and found the bug on the next occurance.

So while I can understand the reasons, I'm not very happy about the
implications. 

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Tue Jan 26 11:37:19 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="7774.html" title="Next message in the list">Fatih Aygün: "Re: [cc65] TGI mode switch without tgi_clear()"</a></li>
<li><dfn>Previous message</dfn>: <a href="7772.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] Support for runtime / libs with self-modifying-code?"</a></li>
<li><dfn>In reply to</dfn>: <a href="7772.html" title="Message to which this message replies">Oliver Schmidt: "Re: [cc65] Support for runtime / libs with self-modifying-code?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="../2010-04/8158.html" title="Next message in this discussion thread">Chiron Bramberger: "[cc65] Commodore PET keyboard scanning"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="../2010-04/8158.html" title="Message sent in reply to this message">Chiron Bramberger: "[cc65] Commodore PET keyboard scanning"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#7773" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#7773" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#7773" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-01-26 11:37:22 CET
</em></small></p>
</body>
</html>
