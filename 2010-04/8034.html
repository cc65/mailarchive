<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] floating point support red</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] floating point support redux" />
<meta name="Date" content="2010-04-09" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] floating point support redux</h1>
<!-- received="Fri Apr  9 22:10:34 2010" -->
<!-- isoreceived="20100409201034" -->
<!-- sent="Fri, 9 Apr 2010 22:10:27 +0200" -->
<!-- isosent="20100409201027" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] floating point support redux" -->
<!-- id="20100409201027.GA5119@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="4BBE3A3F.5030802&#64;runbox.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8035.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] cc65 package for RPM Fusion&quot;">Next message</a> ]
[ <a href="8033.html" title="rhurst1bidmc.harvard.edu: &quot;RE: [cc65] cc65 package for RPM Fusion&quot;">Previous message</a> ]
[ <a href="8031.html" title="Kevin Schuetz: &quot;Re: [cc65] floating point support redux&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8036.html" title="Groepaz: &quot;Re: [cc65] floating point support redux&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20floating%20point%20support%20redux">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-04-09 22:10:27</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!

On Thu, Apr 08, 2010 at 03:19:11PM -0500, Kevin Schuetz wrote:
&gt; Is performance and space economy the main argument against 64-bit
&gt; doubles, or is there something else?

Yes. As Groepaz already said, 64 bit floating point is so slow on the 6502
that is't more or less useless for all practical purposes. 

The beauty of the 32 bit floating point format is that it can reuse the
existing 32 bit routines not only for movement (push/pop/load/store/...), but
also for the arithmetic routines. The 32x32 multiplication and division
routines can be used for operations on the mantissa, saving quite some space.
The 64 bit format has a 48 bit mantissa, so we need additional routines to
handle it.

&gt; As soon as a programmer knowingly makes a decision to use a double
&gt; instead of a float on a 6502, they probably have pondered the
&gt; consequences.  If one knows the consequences yet proceeds to do it
&gt; anyway, it is probably safe to say that performance *really* takes a
&gt; back seat to precision on the particular problem they are tackling.

Not really. The problem is the default argument promotion. The C standard
defines that in a variable argument list (or in absence of a prototype),
floats are promoted to doubles. So functions like printf never see floats,
they always get doubles. Even if a programmer takes great care to avoid the
use of doubles, a simple call to printf will cause the whole 64 bit floating
point library to get linked in, even if only floats are passed.

&gt; That said, down the road if the floating point project materializes,
&gt; I'd be willing to help out...

Thanks!

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Apr  9 22:10:34 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8035.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] cc65 package for RPM Fusion"</a></li>
<li><dfn>Previous message</dfn>: <a href="8033.html" title="Previous message in the list">rhurst1bidmc.harvard.edu: "RE: [cc65] cc65 package for RPM Fusion"</a></li>
<li><dfn>In reply to</dfn>: <a href="8031.html" title="Message to which this message replies">Kevin Schuetz: "Re: [cc65] floating point support redux"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8036.html" title="Next message in this discussion thread">Groepaz: "Re: [cc65] floating point support redux"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8036.html" title="Message sent in reply to this message">Groepaz: "Re: [cc65] floating point support redux"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8034" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8034" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8034" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-04-09 22:10:36 CEST
</em></small></p>
</body>
</html>
