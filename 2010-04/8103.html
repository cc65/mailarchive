<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Please be patient... More </title>
<meta name="Author" content="Payton Byrd (plbyrd1gmail.com)" />
<meta name="Subject" content="Re: [cc65] Please be patient... More questions" />
<meta name="Date" content="2010-04-22" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Please be patient... More questions</h1>
<!-- received="Thu Apr 22 23:16:29 2010" -->
<!-- isoreceived="20100422211629" -->
<!-- sent="Thu, 22 Apr 2010 16:16:02 -0500" -->
<!-- isosent="20100422211602" -->
<!-- name="Payton Byrd" -->
<!-- email="plbyrd1gmail.com" -->
<!-- subject="Re: [cc65] Please be patient... More questions" -->
<!-- id="j2w1adf4c761004221416hd1003f3ak127e22cfdeb7941d@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20100422200520.GB12549&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8104.html" title="Oliver Schmidt: &quot;Re: [cc65] Fwd: Bug in cl65 (?)&quot;">Next message</a> ]
[ <a href="8102.html" title="Oliver Schmidt: &quot;Re: [cc65] Please be patient... More questions&quot;">Previous message</a> ]
[ <a href="8101.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Please be patient... More questions&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8106.html" title="Payton Byrd: &quot;Re: [cc65] Please be patient... More questions&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Payton Byrd &lt;<a href="mailto:plbyrd1gmail.com?Subject=Re:%20[cc65]%20Please%20be%20patient...%20More%20questions">plbyrd1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-04-22 23:16:02</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Thu, Apr 22, 2010 at 3:05 PM, Ullrich von Bassewitz &lt;uz&#64;musoftware&#46;<!--nospam-->de&gt;wrote:

&gt;
&gt; Oliver has answered most questions already, but let me add an example for
&gt; your
&gt; problem:
&gt;
&gt; On Wed, Apr 21, 2010 at 09:30:03PM -0500, Payton Byrd wrote:
&gt; &gt; So, after some digging in the C128 PRG, I found the SCRORG kernel routine
&gt; &gt; which does exactly what I want.  It takes the current mode and places it
&gt; in
&gt; &gt; the accumulator.  Superb.  Now, I want to create a method to call the
&gt; kernel
&gt; &gt; routine and return the value in the accumulator such as:
&gt; &gt;
&gt; &gt; unsigned char getScreenSize(void);
&gt;
&gt;     #define SCRORG 0xFFED
&gt;
&gt;    unsigned char getScreenSize (void)
&gt;    {
&gt;        __asm__ (&quot;jsr %w&quot;, SCRORG);
&gt;        __asm__ (&quot;ldx #$00&quot;);
&gt;        return __AX__;
&gt;    }
&gt;
&gt; If you remember not to use the high byte when calling the function, you can
&gt; even go without inline assembly:
&gt;
&gt;    #define SCRORG 0xFFED
&gt;    #define getScreenSize   ((unsigned char (*)()) (SCRORG))
&gt;
&gt; then, use it as you would do with a function:
&gt;
&gt;    unsigned char foo = getScreenSize ();
&gt;

Uz,

Thank you so much for the succinct response that exactly addresses what I
was trying to do.  I'm wondering if there already exists a library of C128
kernel routines that are created in such a manner as your second example?  I
know it's best to use the standard libraries where possible, but for
completeness for the individual platforms it seems that such libraries for
each target machine would be invaluable.  It would definitely aid those of
us who are not quite adept at assembler but have lots of experience with
c-based languages to get the most out of the cc65 stack.  If the answer is
that nobody has created such a library for the c128 then I'll volunteer to
do so as I think it'd be a great learning experience.

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Apr 22 23:16:29 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8104.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Fwd: Bug in cl65 (?)"</a></li>
<li><dfn>Previous message</dfn>: <a href="8102.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] Please be patient... More questions"</a></li>
<li><dfn>In reply to</dfn>: <a href="8101.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] Please be patient... More questions"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8106.html" title="Next message in this discussion thread">Payton Byrd: "Re: [cc65] Please be patient... More questions"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8106.html" title="Message sent in reply to this message">Payton Byrd: "Re: [cc65] Please be patient... More questions"</a></li>
<li><dfn>Reply</dfn>:  <a href="8129.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Please be patient... More questions"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8103" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8103" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8103" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-04-22 23:16:32 CEST
</em></small></p>
</body>
</html>
