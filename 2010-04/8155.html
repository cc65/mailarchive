<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Please critique this makef</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] Please critique this makefile" />
<meta name="Date" content="2010-04-25" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Please critique this makefile</h1>
<!-- received="Sun Apr 25 00:09:06 2010" -->
<!-- isoreceived="20100424220906" -->
<!-- sent="Sun, 25 Apr 2010 00:08:58 +0200" -->
<!-- isosent="20100424220858" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] Please critique this makefile" -->
<!-- id="p2h1002edb71004241508yf9bfcbe3z1e6c5d846056eb27@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="01b901cae3e9$14fd2520$443efea9&#64;monarch" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8156.html" title="Oliver Schmidt: &quot;Re: [cc65] Please critique this makefile&quot;">Next message</a> ]
[ <a href="8154.html" title="Greg King: &quot;Re: [cc65] Please critique this makefile&quot;">Previous message</a> ]
[ <a href="8154.html" title="Greg King: &quot;Re: [cc65] Please critique this makefile&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8187.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Please critique this makefile&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Please%20critique%20this%20makefile">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-04-25 00:08:58</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt;&gt; Actually, even when writing the &quot;ifndef&quot;, I already was having doubts
&gt;&gt; about whether that not assigning a value is the same as not mentioning
&gt;&gt; the variable, at all. After all, it had to be processed. My doubts
&gt;&gt; were proven valid. Other possibility would be to use &quot;ifndef&quot;,
&gt;&gt; and comment out the variables at the top. But then, it potentially
&gt;&gt; could be prone to errors caused, e.g., by bogus values passed
&gt;&gt; from the outside. That is something that we both don't like. :-)
&gt;
&gt; To put it another way:
&gt; Assigning an empty string to a variable _does_ define it!  Therefore,
&gt; &quot;ifndef&quot; cannot be used in that context.

1. The 'GNU Make Manual' explicitly says:

&quot;The value of that variable has a non-empty value, the text-if-true is
effective; otherwise, the text-if-false, if any, is effective.
Variables that have never been defined have an empty value.&quot;

2. 'Managing Projects with GNU Make' even more explicitly says:

&quot;The difference is that the conditional assignment operator will skip
the assignment if the variable has
been set in any way, even to the empty value, while the ifdef and
ifndef operators test for a
nonempty value.&quot;

3. In the GNU make source file read.c there's the code fragment:

      v = lookup_variable (var, i);
      conditionals-&gt;ignoring[o] =
        ((v != 0 &amp;&amp; *v-&gt;value != '\0') == (cmdtype == c_ifndef));

Even without understanding the context fully one can easily see the
explicit test for an empty variable value.

4. I tried it with GNU make 3.81 on Cygwin and it works exactly as
implemented and documented - meaning that &quot;ifndef&quot; _can_ be used in
that context.

Regards,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Apr 25 00:09:06 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8156.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Please critique this makefile"</a></li>
<li><dfn>Previous message</dfn>: <a href="8154.html" title="Previous message in the list">Greg King: "Re: [cc65] Please critique this makefile"</a></li>
<li><dfn>In reply to</dfn>: <a href="8154.html" title="Message to which this message replies">Greg King: "Re: [cc65] Please critique this makefile"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8187.html" title="Next message in this discussion thread">silverdr1wfmh.org.pl: "Re: [cc65] Please critique this makefile"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8187.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] Please critique this makefile"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8155" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8155" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8155" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-04-25 00:09:08 CEST
</em></small></p>
</body>
</html>
