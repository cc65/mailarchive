<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Commodore PET keyboard sca</title>
<meta name="Author" content="Steve Davison (64subnet1gmail.com)" />
<meta name="Subject" content="Re: [cc65] Commodore PET keyboard scanning" />
<meta name="Date" content="2010-04-25" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Commodore PET keyboard scanning</h1>
<!-- received="Sun Apr 25 12:31:34 2010" -->
<!-- isoreceived="20100425103134" -->
<!-- sent="Sun, 25 Apr 2010 03:31:29 -0700" -->
<!-- isosent="20100425103129" -->
<!-- name="Steve Davison" -->
<!-- email="64subnet1gmail.com" -->
<!-- subject="Re: [cc65] Commodore PET keyboard scanning" -->
<!-- id="g2o6c36ebcc1004250331he2042254h73ad988d380629f0@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="4BD3CF93.8050905&#64;bramberger.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8168.html" title="Groepaz: &quot;Re: [cc65] Commodore PET keyboard scanning&quot;">Next message</a> ]
[ <a href="8166.html" title="Marc 'BlackJack Rintsch: &quot;Re: [cc65] How to prototype an assembler function?&quot;">Previous message</a> ]
[ <a href="8158.html" title="Chiron Bramberger: &quot;[cc65] Commodore PET keyboard scanning&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8209.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Commodore PET keyboard scanning&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Steve Davison &lt;<a href="mailto:64subnet1gmail.com?Subject=Re:%20[cc65]%20Commodore%20PET%20keyboard%20scanning">64subnet1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-04-25 12:31:29</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Apr 24, Chiron Bramberger &lt;chiron&#64;bramberger&#46;<!--nospam-->com&gt; wrote:
&gt; Anyway, the PET's KERNAL (or KERNEL???) has a simple keyboard
&gt; scanner.  ....  (technically it detects it when you hold down the
&gt; cursor or spacebar and maybe a few other keys, but not most of them.
&gt; weird???)

Actually, it is aware of the fact you are holding down a key
(whichever key), and you can read that key with a PEEK (I forget
the address, but I used to use it back in 8th grade...)  The
kernal chooses to only recognize certain keys as repeating.  I
think on the PET there's a POKE you can do to make them all
repeat--not that this will help you.

DISCLAIMER: I have NOT studied how the keyboard works on the PET
specifically.  Most of what I know is true for the C64.  However,
everything I've seen so far about the PET keyboard seems to
indicate that the same concepts are used on both.

The 8x8 matrix does a great job of detecting any 2 keys
pressed simultaneously.  The decode routine in the kernals
make the assumption that there is no more than one key pressed,
though.  (Yes, very simplistic.)  Well, actually 2 keys at a
time to allow for the modifier keys.  Anyway, that is perfectly
adequate for typing, as long as you don't go too fast!

The simple decoding accounts for certain quirky behavior you may
have experienced; such as when you type a little too fast and
don't let up on one key before pressing the next.  (The most
common artifact of this type is probably typing LIST and getting
LIT instead.)  Certain keys have priority over others based on
the order bits are decoded.

Checking for multiple keys pressed simultaneously requires a
custom scan routine.  You may be able to detected up to 8 keys
pressed at once, based on how those keys are situated.  Any 2
keys is no problem, but certain combinations of 3 or more keys
can produce phantom keystrokes.  The combination of keys you
choose may be affected by this phenomenon.

Here's a couple links I stumbled on...
<a href="http://www.classic-games.com/commodore64/petdoc.html">http://www.classic-games.com/commodore64/petdoc.html</a>
<a href="http://sta.c64.org/cbm64kbdlay.html">http://sta.c64.org/cbm64kbdlay.html</a>

// Steve
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Apr 25 12:31:34 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8168.html" title="Next message in the list">Groepaz: "Re: [cc65] Commodore PET keyboard scanning"</a></li>
<li><dfn>Previous message</dfn>: <a href="8166.html" title="Previous message in the list">Marc 'BlackJack Rintsch: "Re: [cc65] How to prototype an assembler function?"</a></li>
<li><dfn>In reply to</dfn>: <a href="8158.html" title="Message to which this message replies">Chiron Bramberger: "[cc65] Commodore PET keyboard scanning"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8209.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] Commodore PET keyboard scanning"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8167" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8167" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8167" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-04-25 12:31:37 CEST
</em></small></p>
</body>
</html>
