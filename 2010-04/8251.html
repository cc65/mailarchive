<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Why does this work in 128 </title>
<meta name="Author" content="Mark J. Reed (markjreed1mail.com)" />
<meta name="Subject" content="Re: [cc65] Why does this work in 128 mode but not 64 mode?" />
<meta name="Date" content="2010-04-30" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Why does this work in 128 mode but not 64 mode?</h1>
<!-- received="Fri Apr 30 15:54:27 2010" -->
<!-- isoreceived="20100430135427" -->
<!-- sent="Fri, 30 Apr 2010 09:54:12 -0400" -->
<!-- isosent="20100430135412" -->
<!-- name="Mark J. Reed" -->
<!-- email="markjreed1mail.com" -->
<!-- subject="Re: [cc65] Why does this work in 128 mode but not 64 mode?" -->
<!-- id="n2wf60fe001004300654q46e234a1hf7faaca2f7564789@mail.gmail.com" -->
<!-- charset="UTF-8" -->
<!-- inreplyto="o2w1adf4c761004300649i73441d04saad4c0da247260bb&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8252.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Why does this work in 128 mode but not 64 mode?&quot;">Next message</a> ]
[ <a href="8250.html" title="Payton Byrd: &quot;Re: [cc65] Why does this work in 128 mode but not 64 mode?&quot;">Previous message</a> ]
[ <a href="8250.html" title="Payton Byrd: &quot;Re: [cc65] Why does this work in 128 mode but not 64 mode?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Mark J. Reed &lt;<a href="mailto:markjreed1mail.com?Subject=Re:%20[cc65]%20Why%20does%20this%20work%20in%20128%20mode%20but%20not%2064%20mode?">markjreed1mail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-04-30 15:54:12</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Fri, Apr 30, 2010 at 9:49 AM, Payton Byrd &lt;plbyrd&#64;gmail&#46;<!--nospam-->com&gt; wrote:

&gt;
&gt;
&gt; On Fri, Apr 30, 2010 at 1:08 AM, Ullrich von Bassewitz &lt;uz&#64;musoftware&#46;<!--nospam-->de&gt;wrote:
&gt;
&gt;&gt; _cbm_k_open:
&gt;&gt;        jsr     OPEN            ; &lt;- KERNAL call
&gt;&gt;        ldx     #0              ; Clear high byte
&gt;&gt;        bcs     &#64;NotOk
&gt;&gt;        txa
&gt;&gt; &#64;NotOk: rts
&gt;&gt;
&gt;
&gt;
&gt; Just out of curiosity, what's the point of using X to clear the carry bit
&gt; of A?  Wouldn't this be more efficient?
&gt;

 The return value for C callers is stored in A and X, with the low byte in A
and the high byte in X.  That LDX is just making sure the high byte is
zero.

LDX doesn't touch the carry bit, as you can see by looking it up in the
opcodes section of the PRG, so the BCS will still be triggered if OPEN
returned an error indication, in which case whatever OPEN put in the
accumulator is returned in the low byte.  If OPEN returns no error, then the
TXA clears the accumulator and thus makes the whole two-byte return value
zero.

-- 
Mark J. Reed &lt;markjreed&#64;gmail&#46;<!--nospam-->com&gt;

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Apr 30 15:54:27 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8252.html" title="Next message in the list">silverdr1wfmh.org.pl: "Re: [cc65] Why does this work in 128 mode but not 64 mode?"</a></li>
<li><dfn>Previous message</dfn>: <a href="8250.html" title="Previous message in the list">Payton Byrd: "Re: [cc65] Why does this work in 128 mode but not 64 mode?"</a></li>
<li><dfn>In reply to</dfn>: <a href="8250.html" title="Message to which this message replies">Payton Byrd: "Re: [cc65] Why does this work in 128 mode but not 64 mode?"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8251" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8251" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8251" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-04-30 15:54:30 CEST
</em></small></p>
</body>
</html>
