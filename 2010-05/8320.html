<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Universal Makefile: Some a</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] Universal Makefile: Some advanced magic wanted?" />
<meta name="Date" content="2010-05-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Universal Makefile: Some advanced magic wanted?</h1>
<!-- received="Mon, 3 May 2010 21:40:18 +0200" -->
<!-- isoreceived="20100503194018" -->
<!-- sent="Mon, 3 May 2010 21:40:18 +0200" -->
<!-- isosent="20100503194018" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] Universal Makefile: Some advanced magic wanted?" -->
<!-- id="r2w1002edb71005031240o947e35e6g35b7eef2d75c8e95@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="117749AB-2089-4301-A889-6D7A209982FE&#64;wfmh.org.pl" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8321.html" title="Oliver Schmidt: &quot;Re: [cc65] Relative paths during compilation&quot;">Next message</a> ]
[ <a href="8319.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Universal Makefile: Some advanced magic wanted?&quot;">Previous message</a> ]
[ <a href="8319.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Universal Makefile: Some advanced magic wanted?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8328.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Universal Makefile: Some advanced magic wanted?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Universal%20Makefile:%20Some%20advanced%20magic%20wanted?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-05-03 21:40:18</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt; Hm, this may sound interesting but I am not fully convinced. Why (less important first)?

I see.

&gt; - I personally never wanted to type more than make [install|clean|..]

What's the alternative? Editing the Makefile to adjust CFLAGS and
friends to your needs? Then you can as well edit it to include a line
OPTIONS=... and still have the benefit of not having to fiddle with
the flags directly.

Be honest: Every time you use a new toolchain you read the docs,
figure out the flags you like, write them in some Makefile - and after
some weeks/months you don't know anymore what they mean so you just
c&amp;p them from one Makefile to the next...

However I think the real idea behind a Universal Makefile is that it
doesn't serve as a template but rather as something to be considered
r/o. Otherwise you wouldn't need the
name-the-program-like-the-directory trick. This way you define WHAT to
build. But still you need a way to control HOW to build it. And there
OPTIONS kicks in.

Anyway beside setting OPTIONS on the make cmdline you can set an
environment variable - or you can have a file named i.e.
Makefile.options containing one line saying

OPTIONS=optspeed,mapfile

and then have the Makefile contain a

-include Makefile.options

but that can admittedly be done the same way with a file containing
multiple lines for setting CFLAGS and friends.

&gt; - Makefile will get more complex and may possibly become less readable, which may hinder its usability as a starting point for more complex ones

Most likely I'm to biased here: I'd say that even without fully
understanding how the code I proposed here actually works it is clear
what it wants to do - and that it can just be removed if not desired.
A meaning comment could support that.

&gt; - Those options will have to get hardcoded, and (in case we ever convince Uz to put it into base) will have to be maintained along with the toolset, and in (quite possible) case it gets forgotten/omitted when some changes to the options happen (unlikely but still possible) the users may get unpredictable results of the type you wrote you wanted to avoid

From my experience the cc65 toolchain flags are very stable. The
incompatible change with --create-dep is really an expeption to the
rule.

&gt; Having written all that - it still looks tempting. And I also like the $(REMOVES) idea a lot. Hm, if it was done in an elegant way with the last two points above in mind... thinking aloud.. like with things being easily configurable somewhere at the top and disabled by default, with clear messages... hm ;-)

After all it's just a proposal. If you really think the current
Makefile is aready the sweet spot of functionality vs. complexity then
this is fine with me. Therefore the '?' in the title of my original
posting...

Regards,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon, 3 May 2010 21:40:18 +0200</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8321.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Relative paths during compilation"</a></li>
<li><dfn>Previous message</dfn>: <a href="8319.html" title="Previous message in the list">silverdr1wfmh.org.pl: "Re: [cc65] Universal Makefile: Some advanced magic wanted?"</a></li>
<li><dfn>In reply to</dfn>: <a href="8319.html" title="Message to which this message replies">silverdr1wfmh.org.pl: "Re: [cc65] Universal Makefile: Some advanced magic wanted?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8328.html" title="Next message in this discussion thread">silverdr1wfmh.org.pl: "Re: [cc65] Universal Makefile: Some advanced magic wanted?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8328.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] Universal Makefile: Some advanced magic wanted?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8320" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8320" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8320" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-05-03 21:41:04 CEST
</em></small></p>
</body>
</html>
