<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Request from a user leads to t</title>
<meta name="Author" content="Payton Byrd (plbyrd1gmail.com)" />
<meta name="Subject" content="[cc65] Request from a user leads to this question" />
<meta name="Date" content="2010-05-06" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Request from a user leads to this question</h1>
<!-- received="Thu May  6 19:42:30 2010" -->
<!-- isoreceived="20100506174230" -->
<!-- sent="Thu, 6 May 2010 12:42:01 -0500" -->
<!-- isosent="20100506174201" -->
<!-- name="Payton Byrd" -->
<!-- email="plbyrd1gmail.com" -->
<!-- subject="[cc65] Request from a user leads to this question" -->
<!-- id="o2g1adf4c761005061042u52d233c4t831f84cbe500b358@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8365.html" title="Payton Byrd: &quot;[cc65] Eureka moment, or waste of time?&quot;">Next message</a> ]
[ <a href="8363.html" title="Mark J. Reed: &quot;Re: [cc65] - object oriented style&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Payton Byrd &lt;<a href="mailto:plbyrd1gmail.com?Subject=Re:%20[cc65]%20Request%20from%20a%20user%20leads%20to%20this%20question">plbyrd1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-05-06 19:42:01</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>A user of CBM-Command has requested the ability to see long filenames (those
longer than 16 characters).  Some newer devices will return long filenames,
especially devices using FAT32 storage cards.  How much work would it be,
and is the cc65 community willing to tackle it, to change the cbm_dirent
struct to accommodate long filenames?  I can see a couple of challenges
myself:

1) The current cbm_dirent's name string is a hard coded array.  Making it
bigger would use a lot more RAM in programs already written.
2) Changing the current cbm_dirent's name to a pointer would require
changing any sources using it today to recompile.  Not good.

So, my proposed solution would be to create a new struct, let's say
cbm_longdirent that would be declared as:

struct cbm_longdirent
{
    unsigned char* name;
    unsigned char namelength;
    unsigned int size;
    unsigned char type;
    unsigned char access;
}

Also a new method would be needed for reading the directory:
unsigned char __fastcall__ cbm_readdirlong (unsigned char lfn, struct
cbm_longdirent* l_dirent);

I do think there are some advantages to this approach:

1) The filename being a pointer instead of a hardcoded array could mean
substantial memory savings over large sets of cbm_longdirent structures
compared to using the cbm_dirent structure.

2) It's simply more generalized and to me would be the only method I'd need.
 The old method and struct could be deprecated.

Let me know what you guys think.

-- 
Payton Byrd
&lt;<a href="http://www.paytonbyrd.com">http://www.paytonbyrd.com</a>&gt;
&lt;<a href="http://it.toolbox.com/blogs/paytonbyrd">http://it.toolbox.com/blogs/paytonbyrd</a>&gt;

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu May  6 19:42:30 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8365.html" title="Next message in the list">Payton Byrd: "[cc65] Eureka moment, or waste of time?"</a></li>
<li><dfn>Previous message</dfn>: <a href="8363.html" title="Previous message in the list">Mark J. Reed: "Re: [cc65] - object oriented style"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8364" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8364" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8364" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-05-06 19:42:33 CEST
</em></small></p>
</body>
</html>
