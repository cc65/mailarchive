<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Relocating the stack?</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Relocating the stack?" />
<meta name="Date" content="2010-08-02" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Relocating the stack?</h1>
<!-- received="Mon Aug  2 08:27:51 2010" -->
<!-- isoreceived="20100802062751" -->
<!-- sent="Mon, 2 Aug 2010 08:27:46 +0200" -->
<!-- isosent="20100802062746" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Relocating the stack?" -->
<!-- id="20100802062745.GA3480@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="AANLkTinzOAPPF0D8ZcXC4OO1eGNFyJBDnTO+AG=dPsd4&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8532.html" title="Payton Byrd: &quot;Re: [cc65] Relocating the stack?&quot;">Next message</a> ]
[ <a href="8530.html" title="Shawn Jefferson: &quot;RE: [cc65] Relocating the stack?&quot;">Previous message</a> ]
[ <a href="8529.html" title="Payton Byrd: &quot;[cc65] Relocating the stack?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="8532.html" title="Payton Byrd: &quot;Re: [cc65] Relocating the stack?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Relocating%20the%20stack?">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-08-02 08:27:46</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Good morning!

On Sun, Aug 01, 2010 at 08:01:39PM -0500, Payton Byrd wrote:
&gt; I'm trying to squeeze some more memory out of the 32k expanded VIC-20.  The
&gt; memory config provided in the cc65 distribution leaves 8k of RAM unmolested
&gt; at $A000 to $BFFF.  I would like to relocate the STACK and HEAP to this
&gt; memory so I can place more code in banks 1, 2, and 3.  After reading the
&gt; ld65 docs I don't understand how I could accomplish this.  Can anyone help
&gt; with this task?

Shawn is right here, the simplest way to relocate the stack is to supply a
changed startup module. Just have a look at the one that is part of the source
distribution. It should be easy to locate the place where the stack is
initialized.

To relocate the heap, you can either include &lt;_heap.h&gt; and set the variables
_heaporg and _heapptr to the start of the heap memory and _heapend to the end
(you will have to do this *before* accessing the heap). You can also supply a
changed _heap module (see the one from the library, it's pretty short).

The existing heap module will intialize the end of the heap to the start of the
stack. Depending on where the new stack location is, this may or may not make
sense.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Aug  2 08:27:51 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8532.html" title="Next message in the list">Payton Byrd: "Re: [cc65] Relocating the stack?"</a></li>
<li><dfn>Previous message</dfn>: <a href="8530.html" title="Previous message in the list">Shawn Jefferson: "RE: [cc65] Relocating the stack?"</a></li>
<li><dfn>In reply to</dfn>: <a href="8529.html" title="Message to which this message replies">Payton Byrd: "[cc65] Relocating the stack?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8532.html" title="Next message in this discussion thread">Payton Byrd: "Re: [cc65] Relocating the stack?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8532.html" title="Message sent in reply to this message">Payton Byrd: "Re: [cc65] Relocating the stack?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8531" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8531" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8531" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-08-02 08:27:55 CEST
</em></small></p>
</body>
</html>
