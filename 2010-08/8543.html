<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Access to debug informatio</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Access to debug information" />
<meta name="Date" content="2010-08-05" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Access to debug information</h1>
<!-- received="Thu Aug  5 23:49:40 2010" -->
<!-- isoreceived="20100805214940" -->
<!-- sent="Thu, 5 Aug 2010 23:49:34 +0200" -->
<!-- isosent="20100805214934" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Access to debug information" -->
<!-- id="20100805214934.GA7034@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="20100802163933.GA4928&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8544.html" title="Carlos: &quot;Re: [cc65] Twittering with cc65&quot;">Next message</a> ]
[ <a href="8542.html" title="Oliver Schmidt: &quot;[cc65] Twittering with cc65&quot;">Previous message</a> ]
[ <a href="8536.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Access to debug information&quot;">In reply to</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Access%20to%20debug%20information">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-08-05 23:49:34</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Mon, Aug 02, 2010 at 06:39:33PM +0200, Ullrich von Bassewitz wrote:
&gt; Thanks for all the feedback, on- and off-list. I think I will give it a try.
&gt; More news when I have something to show ...

Ok, I have a first working version. It's in head and will be in tomorrows
snapshot as well. So here is some information on how to use it:

The module to access debug information generated by ld65 is part of the cc65
source distribution in the src/dbginfo directory. It is expected to be
compiled with and linked against a C source (it is no dynamic library). I've
tried to make it self contained, so it is just one .c and one .h module.

Compiler requirements: The code uses vsnprintf, so it needs a compiler that
complies at least partially with C99.

Interface: I've tried to make the interface as simple as possible, but since
quite some information is passed back, some structs are necessary.

Completeness: There is currently only support for line information, so it is
possible to add source code support to a debugger/emulator. Access to symbols
will be added shortly, but that is not as useful as it could be, since support
for scopes is missing (they're not written to the object files and therefore
not available to the linker). So there are quite some automatically generated
symbols with the same name that cannot be distinguished.

There is also an example/test program that shows how to use the module. I
would still call parts of the code experimental. For example the way how
errors are passed back may be changed. Another problem may be that the code
checks the return of malloc() using assert() - so a program using the module
will terminate immediately if it runs out of memory.

If you use this code, please be prepared to make some adjustments later since
the API may still change.

Feedback or suggestions are gladly appreciated!

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Aug  5 23:49:40 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8544.html" title="Next message in the list">Carlos: "Re: [cc65] Twittering with cc65"</a></li>
<li><dfn>Previous message</dfn>: <a href="8542.html" title="Previous message in the list">Oliver Schmidt: "[cc65] Twittering with cc65"</a></li>
<li><dfn>In reply to</dfn>: <a href="8536.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] Access to debug information"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8543" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8543" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8543" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-08-05 23:49:42 CEST
</em></small></p>
</body>
</html>
