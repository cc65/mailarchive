<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] RS-232 on the C64</title>
<meta name="Author" content="Agent Friday (64subnet1gmail.com)" />
<meta name="Subject" content="[cc65] RS-232 on the C64" />
<meta name="Date" content="2010-11-28" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] RS-232 on the C64</h1>
<!-- received="Sun Nov 28 21:05:02 2010" -->
<!-- isoreceived="20101128200502" -->
<!-- sent="Sun, 28 Nov 2010 12:04:51 -0800" -->
<!-- isosent="20101128200451" -->
<!-- name="Agent Friday" -->
<!-- email="64subnet1gmail.com" -->
<!-- subject="[cc65] RS-232 on the C64" -->
<!-- id="AANLkTi=iLX9hXtq1rwHMucHZM3aJn+iqW1ToO3fqvdMU@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="8973.html" title="Agent Friday: &quot;Re: [cc65] String Literal Segment in C code&quot;">Next message</a> ]
[ <a href="8971.html" title="Maspethrose71aol.com: &quot;[cc65] String Literal Segment in C code&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="8974.html" title="Spiro Trikaliotis: &quot;Re: [cc65] RS-232 on the C64&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Agent Friday &lt;<a href="mailto:64subnet1gmail.com?Subject=Re:%20[cc65]%20RS-232%20on%20the%20C64">64subnet1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2010-11-28 21:04:51</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hello,

I'm trying to do some RS-232 programming on the C64 and I am now
officially stumped.  I first looked at using stdio calls.  They
seemed rather tailored to use with disk files, so I had some serious
doubts it would be able to handle the idiosyncracies of RS-232;
probably need something a bit more native.

So I tried using cbm_open / cbm_read calls in cbm.h.  Problems:
cbm_open() returns an error code of 240 (not defined?).  However, it
still lets me do a cbm_write to that LFN w/o any error (if cbm_open
failed, I would expect a &quot;file not open&quot; error).  When I try to
read, however, the system hangs.  Stepping through a bit seems to
indicate it's waiting endlessly for a character that is apparently
never coming.  (I really need to be using something like cbm_get
rather than cbm_read, but that doesn't exist.  Oversight?)  I /have/
tested the telnet connection in VICE using a trivial BASIC terminal
(OPEN, PRINT#, GET#), and that works fine, so I'm beginning to think
that the cbm_xxx functions might not be acting exactly like the BASIC
counterparts.

Got tired of banging my head on that wall, and decided to look into
the cbm_k_ (kernal) routines.  They are a bit perplexing perplexing
to me as well.  There is no GETIN type call here either, but I
assume that's just an inadvertant omission.  There is no CHRIN or
CHROUT, but instead they're named after BASIN and BSOUT.
Technically, this should imply that they go through the system
vectors ($324 .. $327) and can be redirected.  Is this the case?

Do any of you C64 guys use these cbm-specific calls much, and what
is your success level?  Same question for RS-232 comms.... which API
is likely to work, or should I rely on my own interface functions?
It would be cool if the generic (POSIX?) I/O calls worked with
RS-232, but I'm guessing the kernal interface is the way to go,
adding a cbm_k_getin() along the way.

Thanks for any pointers,

// Agent Friday


P.S.  Did anyone see my last post to the list (about the -t and
-C switches)?  I haven't seen it come back through, but I'm not
sure if gmail is just being too &quot;smart&quot; about managing my
conversation threads for me...  Thanks.
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Nov 28 21:05:02 2010</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="8973.html" title="Next message in the list">Agent Friday: "Re: [cc65] String Literal Segment in C code"</a></li>
<li><dfn>Previous message</dfn>: <a href="8971.html" title="Previous message in the list">Maspethrose71aol.com: "[cc65] String Literal Segment in C code"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="8974.html" title="Next message in this discussion thread">Spiro Trikaliotis: "Re: [cc65] RS-232 on the C64"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="8974.html" title="Message sent in reply to this message">Spiro Trikaliotis: "Re: [cc65] RS-232 on the C64"</a></li>
<li><dfn>Reply</dfn>:  <a href="8977.html" title="Message sent in reply to this message">Agent Friday: "[cc65] Re: RS-232 on the C64"</a></li>
<li><dfn>Reply</dfn>:  <a href="8985.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] RS-232 on the C64"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#8972" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#8972" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#8972" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2010-11-28 21:05:04 CET
</em></small></p>
</body>
</html>
