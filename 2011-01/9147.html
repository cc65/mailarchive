<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] rodata alignment independe</title>
<meta name="Author" content="Gábor Lénárt (lgb1lgb.hu)" />
<meta name="Subject" content="Re: [cc65] rodata alignment independent from ld.cfg" />
<meta name="Date" content="2011-01-14" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] rodata alignment independent from ld.cfg</h1>
<!-- received="Fri Jan 14 17:51:20 2011" -->
<!-- isoreceived="20110114165120" -->
<!-- sent="Fri, 14 Jan 2011 17:51:05 +0100" -->
<!-- isosent="20110114165105" -->
<!-- name="Gábor Lénárt" -->
<!-- email="lgb1lgb.hu" -->
<!-- subject="Re: [cc65] rodata alignment independent from ld.cfg" -->
<!-- id="20110114165105.GE26160@vega.lgb.hu" -->
<!-- charset="iso-8859-1" -->
<!-- inreplyto="20110114134759.GA3917&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9148.html" title="Thomas Giesel: &quot;Re: [cc65] rodata alignment independent from ld.cfg&quot;">Next message</a> ]
[ <a href="9146.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] rodata alignment independent from ld.cfg&quot;">Previous message</a> ]
[ <a href="9146.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] rodata alignment independent from ld.cfg&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9149.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] rodata alignment independent from ld.cfg&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Gábor Lénárt &lt;<a href="mailto:lgb1lgb.hu?Subject=Re:%20[cc65]%20rodata%20alignment%20independent%20from%20ld.cfg">lgb1lgb.hu</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-01-14 17:51:05</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Fri, Jan 14, 2011 at 02:47:59PM +0100, Ullrich von Bassewitz wrote:
&gt; On Wed, Jan 12, 2011 at 09:46:31PM +0100, Thomas Giesel wrote:
&gt; &gt; Is there a way to put data in rodata on an aligned address without
&gt; &gt; having an aligned rodata segment?
&gt; 
&gt; No. While the linker determines the placement of a segment, it cannot change
&gt; the size. Which means that the linker cannot add or remove fill bytes to force
&gt; an alignment within a segment. Fill bytes must be added by the assembler,
&gt; which must rely on an aligned start address.

Actually it caused me some headache even if I totally understand why the
linker is the one who must know it, so you must put these things into
separate segments or so with the proper alignment specified in the linker
config file.  However: I had problem with DTV, where you can enable &quot;burst
mode&quot;, when the ASIC core can read 4 bytes at once, thus it's much faster. 
However you must optimize your code then, it's important not to break too
much 4 byte boundaries especially if it's a time critical thing like in the
middle of a loop (it can be faster to insert some NOPs, even if it sounds
odd - at least as far as I understood Jeri's explanation).  It's quite
impossible to create new segments for this, since it would mean to use
hundreds of segments if I want to optimize my code well.  However even if I
know the theory behind the reason (why ca65/ld65 work this way) I have no
idea how to solve these kind of problems too much.  Currently I've given up
my ideas to optimize my code for DTV this way because of these problems.  Do
you have any idea what can I do instead of just giving up?  :)

thanks, regards;

- Gábor
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Jan 14 17:51:20 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9148.html" title="Next message in the list">Thomas Giesel: "Re: [cc65] rodata alignment independent from ld.cfg"</a></li>
<li><dfn>Previous message</dfn>: <a href="9146.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] rodata alignment independent from ld.cfg"</a></li>
<li><dfn>In reply to</dfn>: <a href="9146.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] rodata alignment independent from ld.cfg"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9149.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] rodata alignment independent from ld.cfg"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9149.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] rodata alignment independent from ld.cfg"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9147" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9147" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9147" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-01-14 17:51:23 CET
</em></small></p>
</body>
</html>
