<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Calling another program: exec(</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="[cc65] Calling another program: exec() ?" />
<meta name="Date" content="2011-01-24" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Calling another program: exec() ?</h1>
<!-- received="Mon Jan 24 12:46:57 2011" -->
<!-- isoreceived="20110124114657" -->
<!-- sent="Mon, 24 Jan 2011 12:46:43 +0100" -->
<!-- isosent="20110124114643" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="[cc65] Calling another program: exec() ?" -->
<!-- id="AANLkTimLQTKF9L0pe_6cW0WxKP8d5BV_DGCUpn-=_Btz@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9169.html" title="Karri Kaksonen: &quot;Re: [cc65] Calling another program: exec() ?&quot;">Next message</a> ]
[ <a href="9167.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Conditional assembler question&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="9169.html" title="Karri Kaksonen: &quot;Re: [cc65] Calling another program: exec() ?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Calling%20another%20program:%20exec()%20?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-01-24 12:46:43</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

I guess several cc65 targets allow one way or another to replace the
currently running program with another one without manual user
intervention. At least the Apple II does and there's a project
(A2-Command) asking for that functionality so I'm about to add it to
the Apple II C library.

My question is if you think it is appropriate to call that function
execl() / execv() or if a proprietary name would be preferable.
Reading the standards there are some things which on cc65 targets
wouldn't behave exactly as described:
<a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/environ.html">http://pubs.opengroup.org/onlinepubs/009695399/functions/environ.html</a>

Here's an example if the things I'm refering to:

&quot;File descriptors open in the calling process image shall remain open
in the new process image, except for those whose close-on- exec flag
FD_CLOEXEC is set. For those file descriptors that remain open, all
attributes of the open file description remain unchanged. For any file
descriptor that is closed for this reason, file locks are removed as a
result of the close as described in close(). Locks that are not
removed by closing of file descriptors remain unchanged.

If file descriptors 0, 1, and 2 would otherwise be closed after a
successful call to one of the exec family of functions, and the new
process image file has the set-user-ID or set-group-ID file mode bits
set, [XSI]   and the ST_NOSUID bit is not set for the file system
containing the new process image file,  implementations may open an
unspecified file for each of these file descriptors in the new process
image.&quot;

I don't see keeping any file descriptors open on cc65 targets - do you?

And finally there's an aspect of the execl() / execv() in the
standards that causes me trouble: As far as I understand and according
to the following bug report &quot;atexit-functions&quot; aren't called on
execl() / execv():
<a href="http://sourceware.org/bugzilla/show_bug.cgi?id=6982">http://sourceware.org/bugzilla/show_bug.cgi?id=6982</a>

Does this really make sense? But at least the cc65 desctructors need
to be called. Otherwise there would be i.e. dengling interrupt vectors
pointing to nowhere - wouldn't they?

Any thoughts?

Thanks in advance,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Jan 24 12:46:57 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9169.html" title="Next message in the list">Karri Kaksonen: "Re: [cc65] Calling another program: exec() ?"</a></li>
<li><dfn>Previous message</dfn>: <a href="9167.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] Conditional assembler question"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9169.html" title="Next message in this discussion thread">Karri Kaksonen: "Re: [cc65] Calling another program: exec() ?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9169.html" title="Message sent in reply to this message">Karri Kaksonen: "Re: [cc65] Calling another program: exec() ?"</a></li>
<li><dfn>Reply</dfn>:  <a href="9172.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Calling another program: exec() ?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9168" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9168" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9168" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-01-24 12:47:04 CET
</em></small></p>
</body>
</html>
