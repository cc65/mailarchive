<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Latest changes</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="[cc65] Latest changes" />
<meta name="Date" content="2011-02-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Latest changes</h1>
<!-- received="Thu Feb  3 20:33:15 2011" -->
<!-- isoreceived="20110203193315" -->
<!-- sent="Thu, 3 Feb 2011 20:33:03 +0100" -->
<!-- isosent="20110203193303" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="[cc65] Latest changes" -->
<!-- id="20110203193302.GA12255@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9203.html" title="Ullrich von Bassewitz: &quot;[cc65] Modules with self modifying code&quot;">Next message</a> ]
[ <a href="../2011-01/9201.html" title="Christian Grössler: &quot;Re: [cc65] atexit() destructor priority&quot;">Previous message</a> ]
<!-- unextthread="start" -->
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Latest%20changes">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-02-03 20:33:03</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Some of you may have noticed that assembler error messages have improved
slightly. Something like this might be output in case of an error:

    test.s(19): Error: Symbol `foobar' is undefined
    test.c(12): Note: Assembler code generated from this line
    test.s(8): Note: Macro was defined here

The reason is that I have overhauled and unified source location handling. As
a result, the tools are now able to output better error messages and are for
example able to show the call tree for a macro invocation. The assembler does
output all available information in the style shown above, while the linker
does usually not, but it does have the information internally. Please let me
know if there are cases where additional information would also be useful for
the linker.

The changes do need some testing, so please tell me if anything could be
improved or is not working as expected.

In addition to the changes in diagnostics, all the source location information
is passed through the linker to the debug info file, from where it can be read
and processed using the new version of the dbginfo module.

So if you're a developer of an emulator, I would like to point you to this
module. It's written in portable C code and self contained. It does all the
nasty work of parsing the debug info file and offers a small and clear API
that allows you to access the information. Using this API, it is possible to
beef up a builtin monitor by information from the source code, or even allow
source level debugging (with some restrictions for C). If you are an emulator
user, and interested in this feature, please ask the developers about it.

Most of my emulator use is debugging 6502 assembler source code. I've always
been a fan of VICE, but I have to admit that I would change instantly if I
find another emulator that allows me to debug on source level. Especially when
debugging the cc65 runtime library, working with several windows is very
uncomfortable. Each time I step into a new function using the VICE monitor, I
have to find and load the relevant source file inside the editor, so I can see
the original source and comments about register usage and similar. Having
source level debugging on assembler level would be a real time saver!

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Feb  3 20:33:15 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9203.html" title="Next message in the list">Ullrich von Bassewitz: "[cc65] Modules with self modifying code"</a></li>
<li><dfn>Previous message</dfn>: <a href="../2011-01/9201.html" title="Previous message in the list">Christian Grössler: "Re: [cc65] atexit() destructor priority"</a></li>
<!-- lnextthread="start" -->
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9202" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9202" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9202" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-02-03 20:33:18 CET
</em></small></p>
</body>
</html>
