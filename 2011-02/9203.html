<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: [cc65] Modules with self modifying co</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="[cc65] Modules with self modifying code" />
<meta name="Date" content="2011-02-04" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>[cc65] Modules with self modifying code</h1>
<!-- received="Fri Feb  4 15:22:57 2011" -->
<!-- isoreceived="20110204142257" -->
<!-- sent="Fri, 4 Feb 2011 15:22:44 +0100" -->
<!-- isosent="20110204142244" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="[cc65] Modules with self modifying code" -->
<!-- id="20110204142244.GA30460@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9204.html" title="Karri Kaksonen: &quot;Re: [cc65] Modules with self modifying code&quot;">Next message</a> ]
[ <a href="9202.html" title="Ullrich von Bassewitz: &quot;[cc65] Latest changes&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="9204.html" title="Karri Kaksonen: &quot;Re: [cc65] Modules with self modifying code&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Modules%20with%20self%20modifying%20code">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-02-04 15:22:44</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Christian Kr√ºger, who has already contributed optimized memxxx functions has
sent me a memset replacement that uses self modifying code. It performs
significantly better than the existing one, especially for larger memory
blocks and is based on two independent include files that contain macros and
contants for developing modules containing self modifying code.

Now the question is what to do with it.

In the past, I've refrained from using self modifying code, because it is not
romable, quite difficult to debug, and has more potential for errors in my
experience. In addition, some of the functions that would benefit most from
smc are inlined by the compiler, so the library function is never called. And,
there are platforms that have programs in ROM, so they can use these modules
only with tricks.

On the other side, there are definitely cases, where problems are almost
impossible to solve without self modifying code, and there are other cases,
where smc gives a huge performance increase.

As I see it, my options are:

  1. Don't accept modules/changes containing smc. There's nothing that
     prevents programmers to use smc on their own as it was before. To support
     people writing their own modules, Christians include files could be
     incorporated into the library, so there's a base to build on.

  2. Accept replacement functions using smc, but let them have different
     names, so a programmer must explicitly call the smc version.

  3. Accept replacement functions and create a separate library together with
     a small script that allows an end user to replace the modules in a target
     library with smc versions.

  4. Accept replacement functions and add them by default to the target
     libraries of the platforms where programs are usually run in RAM. Since a
     programmer must still be able to write romable code, there must be some
     measure to create a library without smc code.

A disadvantage of options 2-4 is that it's probably me who is expected to
implement them:-)

Anyway, are there more options? Opinions in favour of one of the options
listed above? In favour or against self modifying code?

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Feb  4 15:22:57 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9204.html" title="Next message in the list">Karri Kaksonen: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Previous message</dfn>: <a href="9202.html" title="Previous message in the list">Ullrich von Bassewitz: "[cc65] Latest changes"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9204.html" title="Next message in this discussion thread">Karri Kaksonen: "Re: [cc65] Modules with self modifying code"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9204.html" title="Message sent in reply to this message">Karri Kaksonen: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Reply</dfn>:  <a href="9205.html" title="Message sent in reply to this message">Johan Kotlinski: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Reply</dfn>:  <a href="9206.html" title="Message sent in reply to this message">G·bor LÈn·rt: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Reply</dfn>:  <a href="9209.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Reply</dfn>:  <a href="9215.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] Modules with self modifying code"</a></li>
<li><dfn>Maybe reply</dfn>:  <a href="9247.html" title="Message sent in reply to this message">G√°bor L√©n√°rt: "Re: [cc65] Modules with self modifying code"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9203" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9203" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9203" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-02-04 15:23:00 CET
</em></small></p>
</body>
</html>
