<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] assembler/C stack issue</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] assembler/C stack issue" />
<meta name="Date" content="2011-02-12" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] assembler/C stack issue</h1>
<!-- received="Sat Feb 12 12:38:42 2011" -->
<!-- isoreceived="20110212113842" -->
<!-- sent="Sat, 12 Feb 2011 12:38:25 +0100" -->
<!-- isosent="20110212113825" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] assembler/C stack issue" -->
<!-- id="AANLkTikKdw2qb26NEykh5uQfsbkDTocx8vm1EDue+U_U@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="F5F8D707435242529DEFBD6E713899EA&#64;ORANGE2" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9279.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] assembler/C stack issue&quot;">Next message</a> ]
[ <a href="9277.html" title="Shawn Jefferson: &quot;RE: [cc65] assembler/C stack issue&quot;">Previous message</a> ]
[ <a href="9277.html" title="Shawn Jefferson: &quot;RE: [cc65] assembler/C stack issue&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9279.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] assembler/C stack issue&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20assembler/C%20stack%20issue">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-02-12 12:38:25</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt; The compiler/linker will know that the function returns a char and not an
&gt; int, and it shouldn't just use whatever is in A+X when promoting to int, but
&gt; rather &quot;know&quot; that it should stick a zero in X first. ???  Seems broken if
&gt; that is so?

Again, maybe I'm totally wrong...but here are my two cents:

Certainly what you say is the normal/theoretical/native approach. What
I describe is an optimization. Functions are supposed to be reused.
Therefore it is desirable to place as much as possible stuff into the
function instead at the call site. Exactly the same as with parameter
stack handling: Theoretically the caller pushes and pops - with the
practical benefit of having no issues with varargs etc. But for
optimization reasons one might want to have the function pop the
arguments.

Btw: Again done in other invironments too. Both 16-bit and 32-bit
Windows API functions pop their arguments themselves (see &quot;pascal&quot; /
&quot;stdcall&quot; calling convention).

Regards,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Feb 12 12:38:42 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9279.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] assembler/C stack issue"</a></li>
<li><dfn>Previous message</dfn>: <a href="9277.html" title="Previous message in the list">Shawn Jefferson: "RE: [cc65] assembler/C stack issue"</a></li>
<li><dfn>In reply to</dfn>: <a href="9277.html" title="Message to which this message replies">Shawn Jefferson: "RE: [cc65] assembler/C stack issue"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9279.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] assembler/C stack issue"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9279.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] assembler/C stack issue"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9278" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9278" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9278" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-02-12 12:38:45 CET
</em></small></p>
</body>
</html>
