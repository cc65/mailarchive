<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Re: TGI colors revisited</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Re: TGI colors revisited" />
<meta name="Date" content="2011-05-09" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Re: TGI colors revisited</h1>
<!-- received="Mon May  9 18:31:42 2011" -->
<!-- isoreceived="20110509163142" -->
<!-- sent="Mon, 9 May 2011 18:31:29 +0200" -->
<!-- isosent="20110509163129" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Re: TGI colors revisited" -->
<!-- id="20110509163128.GA30048@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="BANLkTinN4Ld8TkozTP2i6Gk7BzcPi=V6BA&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9406.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] ca65: .sizeof() doesn't return correct values?&quot;">Next message</a> ]
[ <a href="9404.html" title="Marc 'BlackJack' Rintsch: &quot;Re: [cc65] ca65: .sizeof() doesn't return correct values?&quot;">Previous message</a> ]
[ <a href="9394.html" title="Oliver Schmidt: &quot;Re: [cc65] Re: TGI colors revisited&quot;">In reply to</a> ]
<!-- unextthread="start" -->
[ <a href="9390.html" title="Karri Kaksonen: &quot;Re: [cc65] Re: TGI colors revisited&quot;">Next in thread</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Re:%20TGI%20colors%20revisited">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-05-09 18:31:29</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!                         

I've been unavailable for several days - sorry.

On Sat, May 07, 2011 at 12:21:31PM +0200, Oliver Schmidt wrote:
&gt; If yes: See this section from tgi.h:
&gt; ==========
&gt; void __fastcall__ tgi_setpalette (const unsigned char* palette);
&gt; /* Set the palette (not available with all drivers/hardware). palette is
&gt;  * a pointer to as many entries as there are colors.
&gt;  */
&gt; ==========
&gt; - The prototype requires a pointer to unsigned char's.
&gt; - The comment states that the array size corresponds to the number of colors.
&gt;
&gt; I don't see any room for interpretation from the side of the TGI driver...

It is in fact correct that when I made up the TGI API, the tgi_setpalette
function was designed as you describe it. But I designed the API with little
knowledge about the broad range of 6502 platforms available. I have quite some
experience with BGI drivers, so TGI was influenced heavily by the API Borland
designed in the eighties. And even while I knew that some of the design
decisions were bad, I made the same decisions because TGI was planned to be
&quot;tiny&quot;. Some of the TGI functions have never been used (and tested) widely,
and the palette functions are probably among them.

So ... while your interpretation is correct, there may be room for
improvement. The old Borland drivers had a palette based on char sized values
because this is what the old EGA and VGA cards supported. When cards with 16
bit colors started to arrive, it was obvious that the old palette functions
didn't work any longer.

What that means is that if there is a better idea to implement palette
functions in a portable way, I see no problem in changing the API. Even
removing the functions alltogether might be an option, because I cannot
imagine using them in a portable way.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon May  9 18:31:42 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9406.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] ca65: .sizeof() doesn't return correct values?"</a></li>
<li><dfn>Previous message</dfn>: <a href="9404.html" title="Previous message in the list">Marc 'BlackJack' Rintsch: "Re: [cc65] ca65: .sizeof() doesn't return correct values?"</a></li>
<li><dfn>In reply to</dfn>: <a href="9394.html" title="Message to which this message replies">Oliver Schmidt: "Re: [cc65] Re: TGI colors revisited"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9390.html" title="Next message in this discussion thread">Karri Kaksonen: "Re: [cc65] Re: TGI colors revisited"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9405" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9405" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9405" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-05-09 18:31:45 CEST
</em></small></p>
</body>
</html>
