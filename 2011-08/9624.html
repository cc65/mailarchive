<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] New version of debug info </title>
<meta name="Author" content="thefox xofeht (thefox1aspekt.fi)" />
<meta name="Subject" content="Re: [cc65] New version of debug info available" />
<meta name="Date" content="2011-08-21" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] New version of debug info available</h1>
<!-- received="Sun Aug 21 10:42:35 2011" -->
<!-- isoreceived="20110821084235" -->
<!-- sent="Sun, 21 Aug 2011 11:42:26 +0300" -->
<!-- isosent="20110821084226" -->
<!-- name="thefox xofeht" -->
<!-- email="thefox1aspekt.fi" -->
<!-- subject="Re: [cc65] New version of debug info available" -->
<!-- id="CA+eVkH6FUM36VcwNOeNPBs4+JKAMmekg=H8oZhp_+Ub6CgG2qQ@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20110819124852.GA28057&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9625.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] New version of debug info available&quot;">Next message</a> ]
[ <a href="9623.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] New version of debug info available&quot;">Previous message</a> ]
[ <a href="9619.html" title="Ullrich von Bassewitz: &quot;[cc65] New version of debug info available&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9625.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] New version of debug info available&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: thefox xofeht &lt;<a href="mailto:thefox1aspekt.fi?Subject=Re:%20[cc65]%20New%20version%20of%20debug%20info%20available">thefox1aspekt.fi</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-08-21 10:42:26</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Fri, Aug 19, 2011 at 3:48 PM, Ullrich von Bassewitz &lt;uz&#64;musoftware&#46;<!--nospam-->de&gt; wrote:
&gt; A new snapshot has been created while I have been writing this, so go ahead,
&gt; have a look at the new version and tell me that you think. Is anything missing
&gt; or would additional API calls be helpful?

I'm trying to figure out if the macro nesting counter is working
incorrectly, or if I'm missing something.

test1.s (I added line numbers so it's easier to read):

001  .code
002  .macro foo
003      nop
004  .endmacro
005  .macro bar
006      lda #123
007      foo
008  .endmacro
009  bar

simple.cfg:

memory {
    PRG: start = $8000, size = $8000, type = ro, fill = yes;
}
segments {
    CODE: load = PRG, type = ro, align = $1000;
}

When compiled (with: cl65 -t none -C simple.cfg -g -Wl
--dbgfile,test1.dbg -o test1.bin test1.s) produces this debug file:

version	major=2,minor=0
info	file=1,lib=0,mod=1,scope=1,seg=6,span=5
mod	id=0,name=&quot;test1.o&quot;,file=0
seg	id=0,name=&quot;CODE&quot;,start=0x008000,size=0x0003,addrsize=absolute,type=ro,oname=&quot;test1.bin&quot;,ooffs=0
seg	id=1,name=&quot;RODATA&quot;,start=0x000000,size=0x0000,addrsize=absolute,type=rw
seg	id=2,name=&quot;BSS&quot;,start=0x000000,size=0x0000,addrsize=absolute,type=rw
seg	id=3,name=&quot;DATA&quot;,start=0x000000,size=0x0000,addrsize=absolute,type=rw
seg	id=4,name=&quot;ZEROPAGE&quot;,start=0x000000,size=0x0000,addrsize=zeropage,type=rw
seg	id=5,name=&quot;NULL&quot;,start=0x000000,size=0x0000,addrsize=absolute,type=rw
file	id=0,name=&quot;test1.s&quot;,size=91,mtime=0x4E50C312,mod=0
line	id=0,file=0,line=3,type=2,count=2,span=0
line	id=1,file=0,line=6,type=2,count=1,span=1
line	id=2,file=0,line=7,type=2,count=2,span=2
line	id=3,file=0,line=9,span=3
span	id=0,seg=0,start=2,size=1
span	id=1,seg=0,start=0,size=2
span	id=2,seg=0,start=2,size=1
span	id=3,seg=0,start=0,size=3
span	id=4,seg=0,start=0,size=3
scope	id=0,name=&quot;&quot;,mod=0,size=3,span=4

As you can see, there's a normal line info for line 9 (id = 3). Line 6
(id = 1) has a nesting count of 1. Line 7 however has a nesting count
of 2. I'd expect this to be 1 as well.

-thefox
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Aug 21 10:42:35 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9625.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] New version of debug info available"</a></li>
<li><dfn>Previous message</dfn>: <a href="9623.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] New version of debug info available"</a></li>
<li><dfn>In reply to</dfn>: <a href="9619.html" title="Message to which this message replies">Ullrich von Bassewitz: "[cc65] New version of debug info available"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9625.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] New version of debug info available"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9625.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] New version of debug info available"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9624" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9624" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9624" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-08-21 10:42:39 CEST
</em></small></p>
</body>
</html>
