<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] C64 fast-loader suggestion</title>
<meta name="Author" content="Gábor Lénárt (lgb1lgb.hu)" />
<meta name="Subject" content="Re: [cc65] C64 fast-loader suggestion?" />
<meta name="Date" content="2011-12-16" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] C64 fast-loader suggestion?</h1>
<!-- received="Fri Dec 16 16:51:17 2011" -->
<!-- isoreceived="20111216155117" -->
<!-- sent="Fri, 16 Dec 2011 16:51:08 +0100" -->
<!-- isosent="20111216155108" -->
<!-- name="Gábor Lénárt" -->
<!-- email="lgb1lgb.hu" -->
<!-- subject="Re: [cc65] C64 fast-loader suggestion?" -->
<!-- id="20111216155108.GQ10343@vega.lgb.hu" -->
<!-- charset="iso-8859-1" -->
<!-- inreplyto="E54D3C77-01BD-4FFC-A317-7BD583CCE046&#64;wfmh.org.pl" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9817.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] C64 fast-loader suggestion?&quot;">Next message</a> ]
[ <a href="9815.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] C64 fast-loader suggestion?&quot;">Previous message</a> ]
[ <a href="9815.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] C64 fast-loader suggestion?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9817.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] C64 fast-loader suggestion?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Gábor Lénárt &lt;<a href="mailto:lgb1lgb.hu?Subject=Re:%20[cc65]%20C64%20fast-loader%20suggestion?">lgb1lgb.hu</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-12-16 16:51:08</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Fri, Dec 16, 2011 at 03:37:41PM +0100, silverdr&#64;wfmh&#46;<!--nospam-->org.pl wrote:
&gt; 
&gt; On 2011-12-16, at 13:19, Gábor Lénárt wrote:
&gt; 
&gt; &gt;&gt; Naive suggestion: Read the first two bytes via CHRIN and the rest via LOAD...
&gt; &gt; 
&gt; &gt; Yes, it was my idea too. A bit &quot;dirty&quot; solution, but if there is no better I
&gt; &gt; will take that theory.
&gt; 
&gt; It depends. Basically if you are the source of the data files, you can adjust for this. What I recall doing in the days was that my LOADable data files always had the two bytes of &quot;default&quot; load address at their beginnings. Whether I used them later on or not depended on the needs but they were there. Situation is of course more difficult if you have to deal with data files created elsewhere. Then the solution given by Oliver seem to be feasible, even if being not extremely &quot;elegant&quot; workaround.

Yes, I need other files, not my ones, where I can create a format I prefer.

Guys, please be patient, but one more question. What is the best way to do
this exactly?

1. JSR SETNAM (with: X/Y=file name, A=filename size)
2. JSR SETLFS (with: A=1, X=content of $BA, Y=0)
3. JSR LOAD (with: A=0, X/Y=buffer address)

this is the current one. I guess, I need to set buffer address + 2 for step
3, also I need to insert some more steps betweeen 2. and 3., however I am
not sure about that: I need OPEN the file then BASIN two bytes. Do I need to
close the file before LOAD then? Won't be LOAD bothered (ZP locations
modified etc) that I did OPEN/BASIC/CLOSE/whatever before calling LOAD as I
want to use the same params given by SETNAM+SETLFS? And can I use the very
same parameters as for LOAD for OPEN too, so I don't need call SETNAM/SETLFS
again before LOAD (as far as I know, SETNAM/SETLFS only sets some ZP
locations btw, nothing more).

Sorry, but I have no experience on I/O: I always wrote programs where no
need to do I/O just a basic stub with SYS, and direct HW programming no
KERNAL, whatever :)

Thanks in advance for the help.
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Fri Dec 16 16:51:17 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9817.html" title="Next message in the list">silverdr1wfmh.org.pl: "Re: [cc65] C64 fast-loader suggestion?"</a></li>
<li><dfn>Previous message</dfn>: <a href="9815.html" title="Previous message in the list">silverdr1wfmh.org.pl: "Re: [cc65] C64 fast-loader suggestion?"</a></li>
<li><dfn>In reply to</dfn>: <a href="9815.html" title="Message to which this message replies">silverdr1wfmh.org.pl: "Re: [cc65] C64 fast-loader suggestion?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9817.html" title="Next message in this discussion thread">silverdr1wfmh.org.pl: "Re: [cc65] C64 fast-loader suggestion?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9817.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] C64 fast-loader suggestion?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9816" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9816" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9816" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-12-16 16:51:20 CET
</em></small></p>
</body>
</html>
