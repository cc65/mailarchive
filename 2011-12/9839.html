<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] bitwise not broken in ca65</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] bitwise not broken in ca65?" />
<meta name="Date" content="2011-12-24" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] bitwise not broken in ca65?</h1>
<!-- received="Sat Dec 24 14:41:12 2011" -->
<!-- isoreceived="20111224134112" -->
<!-- sent="Sat, 24 Dec 2011 14:41:01 +0100" -->
<!-- isosent="20111224134101" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] bitwise not broken in ca65?" -->
<!-- id="20111224134101.GA16044@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="1324727481.19841.8.camel&#64;g4.WAG320N" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9840.html" title="Simon Scott: &quot;Re: [cc65] bitwise not broken in ca65?&quot;">Next message</a> ]
[ <a href="9838.html" title="Simon Scott: &quot;[cc65] bitwise not broken in ca65?&quot;">Previous message</a> ]
[ <a href="9838.html" title="Simon Scott: &quot;[cc65] bitwise not broken in ca65?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9840.html" title="Simon Scott: &quot;Re: [cc65] bitwise not broken in ca65?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20bitwise%20not%20broken%20in%20ca65?">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2011-12-24 14:41:01</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!

On Sat, Dec 24, 2011 at 07:51:21PM +0800, Simon Scott wrote:
&gt; When I try to build opencbm, it throws an error:
&gt;
&gt; tdchange.a65(151): Error: Range error (-9 not in [0..255])
&gt; tdchange.a65(169): Error: Range error (-5 not in [0..255])
[...]
&gt; so, it looks like ca65 is resolving ~$08 as -9, and ~$04 and -5 (ie, 2's
&gt; complement) rather than an actual bitwise NOT.

This is caused by an error in older ca65 versions which has been fixed
recently. So old code exploiting the behaviour does no longer work.

ca65 doesn't silently truncate to a byte or word. This may be annoying in some
situations, but helpful in others. So what happens is

        NOT $00000008 =&gt; $FFFFFFF7

which is larger than a byte and gives a range error. Just force it to be byte
wide and the error will go away:

        and     #&lt;~drDriveLED

I wish all readers of the list a merry christmas! Thanks for all your
contributions and the helpful discussion.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Dec 24 14:41:12 2011</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9840.html" title="Next message in the list">Simon Scott: "Re: [cc65] bitwise not broken in ca65?"</a></li>
<li><dfn>Previous message</dfn>: <a href="9838.html" title="Previous message in the list">Simon Scott: "[cc65] bitwise not broken in ca65?"</a></li>
<li><dfn>In reply to</dfn>: <a href="9838.html" title="Message to which this message replies">Simon Scott: "[cc65] bitwise not broken in ca65?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9840.html" title="Next message in this discussion thread">Simon Scott: "Re: [cc65] bitwise not broken in ca65?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9840.html" title="Message sent in reply to this message">Simon Scott: "Re: [cc65] bitwise not broken in ca65?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9839" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9839" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9839" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2011-12-24 14:41:15 CET
</em></small></p>
</body>
</html>
