<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Interrupt handlers in C as</title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="Re: [cc65] Interrupt handlers in C as part of the C library ?" />
<meta name="Date" content="2012-01-17" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Interrupt handlers in C as part of the C library ?</h1>
<!-- received="Tue Jan 17 23:24:21 2012" -->
<!-- isoreceived="20120117222421" -->
<!-- sent="Tue, 17 Jan 2012 23:24:13 +0100" -->
<!-- isosent="20120117222413" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="Re: [cc65] Interrupt handlers in C as part of the C library ?" -->
<!-- id="20120117222413.GA28078@trixie.musoftware.de" -->
<!-- charset="utf-8" -->
<!-- inreplyto="CACT=u73LkFcA2r-59_x04B1eXt7iT4t+mSjbYKMHc5JVNskomw&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="9886.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Interrupt handlers in C as part of the C library ?&quot;">Next message</a> ]
[ <a href="9884.html" title="Greg King: &quot;Re: [cc65] Interrupt handlers in C as part of the C library ?&quot;">Previous message</a> ]
[ <a href="9883.html" title="Oliver Schmidt: &quot;[cc65] Interrupt handlers in C as part of the C library ?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="9887.html" title="Payton Byrd: &quot;Re: [cc65] Interrupt handlers in C as part of the C library ?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20[cc65]%20Interrupt%20handlers%20in%20C%20as%20part%20of%20the%20C%20library%20?">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-01-17 23:24:13</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!

On Tue, Jan 17, 2012 at 04:29:04PM +0100, Oliver Schmidt wrote:
&gt; When looking at
&gt; <a href="http://wiki.cc65.org/doku.php?id=cc65:interrupt_handlers_in_c">http://wiki.cc65.org/doku.php?id=cc65:interrupt_handlers_in_c</a> and some
&gt; dicussions here on the list I'm asking myself why we don't provide a
&gt; generic interrpt wrapper as part of the C library?

Maybe because it's too slow to do anything serious? At least this is one
reason that caused me not to offer such a function. Someone with enough
knowledge can easily adapt the functions from the debug module. All others
should better not use interrupt handlers in C.

That said, I'm not against such a function if there is public demand. What I
fear is people calling printf and similar stuff and messing up the runtime
environment. Or doing stuff that causes overruns of the interrupt handler
thread. These problems are quite nasty. It works ok a hundred times and then
fails randomly.

&gt; The wrapper would save/restore the zeropage memory area, save/restore
&gt; the sp and switch to a new sp. It would call exactly one C function.
&gt; Trying to use the registration function twice without prior
&gt; unregistration would just fail. The base addr and size for the
&gt; interrupt stack could be additional args to the registration function.

No need to fail. Just use a function vector that may be set any times.

&gt; Any reasons against this - beside the actual work, which I'd be
&gt; willing to spend ?

See above. What I fear are hordes of people experiencing interrupt handler
problems. Writing interrupt handlers in C is actually *more* difficult than
writing the in assembler.

Regards


        Uz


-- 
Ullrich von Bassewitz                                  uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Tue Jan 17 23:24:21 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="9886.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<li><dfn>Previous message</dfn>: <a href="9884.html" title="Previous message in the list">Greg King: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<li><dfn>In reply to</dfn>: <a href="9883.html" title="Message to which this message replies">Oliver Schmidt: "[cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="9887.html" title="Next message in this discussion thread">Payton Byrd: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="9887.html" title="Message sent in reply to this message">Payton Byrd: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<li><dfn>Reply</dfn>:  <a href="9888.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<li><dfn>Reply</dfn>:  <a href="9934.html" title="Message sent in reply to this message">Groepaz: "Re: [cc65] Interrupt handlers in C as part of the C library ?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#9885" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#9885" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#9885" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-01-17 23:24:24 CET
</em></small></p>
</body>
</html>
