<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] o65 generation bug?</title>
<meta name="Author" content="Agent Friday (64subnet1gmail.com)" />
<meta name="Subject" content="Re: [cc65] o65 generation bug?" />
<meta name="Date" content="2012-05-14" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] o65 generation bug?</h1>
<!-- received="Mon May 14 12:19:21 2012" -->
<!-- isoreceived="20120514101921" -->
<!-- sent="Mon, 14 May 2012 03:19:08 -0700" -->
<!-- isosent="20120514101908" -->
<!-- name="Agent Friday" -->
<!-- email="64subnet1gmail.com" -->
<!-- subject="Re: [cc65] o65 generation bug?" -->
<!-- id="CACb6e79FNyVV3RbKuT7R6Mq7KbkA0HJ=E-bOpQO3W+nquLqKpA@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20120514073214.GB32044&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10285.html" title="Agent Friday: &quot;Re: [cc65] o65 generation bug?&quot;">Next message</a> ]
[ <a href="10283.html" title="Groepaz: &quot;Re: [cc65] o65 generation bug?&quot;">Previous message</a> ]
[ <a href="10282.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] o65 generation bug?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10285.html" title="Agent Friday: &quot;Re: [cc65] o65 generation bug?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Agent Friday &lt;<a href="mailto:64subnet1gmail.com?Subject=Re:%20[cc65]%20o65%20generation%20bug?">64subnet1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-05-14 12:19:08</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Uz,

Nice of you to send off a reply at such a time.

I removed the LDADDR segment from the code, and that seemed to clear up the
discrepancies.  (Well, almost.)  It appears that some of the calculations
rely on the assumption that the code segment will be the first thing
specified to go into the file, and if it's not so then things get thrown
off.  The tbase value of 0000 in the original output probably came directly
from the (don't care) start address I specified for the HEADER memory area.

Instead of actually removing the .WORD __CODE_LOAD__ directive, I moved it
into the DATA segment to see what got generated.  LD65 actually generated a
text-relative fix-up entry in the data seg relocation table, which is good,
but the actual value generated for __CODE_LOAD__ was still 0.  That seems
odd.  Are the &quot;define=yes&quot; settings meant to be rendered invalid by
choosing .o65 as the output format?

I guess I'm left with a couple of questions now...

1.  I'd like some nice way to be able to switch between .o65 and binary
file formats w/o having to make temporary edits to my code.  It would be
nice if I could do this by specifying something on the command-line, but I
haven't looked too deep into the possibilities.

2.  Are the __segment_LOAD__

I prefer to handle jump tables by placing it in its own &quot;JMPTBL&quot; segment,
thus being able to guarantee that the jump table is the first code in the
target w/o relying on what order the source files are specified.  I tried
this out, putting the segment JMPTBL first in the segments section, just
before code, and it seemed to work nicely.  :-)  However, __JMPTBL_LOAD__
also came up 0.

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon May 14 12:19:21 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10285.html" title="Next message in the list">Agent Friday: "Re: [cc65] o65 generation bug?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10283.html" title="Previous message in the list">Groepaz: "Re: [cc65] o65 generation bug?"</a></li>
<li><dfn>In reply to</dfn>: <a href="10282.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] o65 generation bug?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10285.html" title="Next message in this discussion thread">Agent Friday: "Re: [cc65] o65 generation bug?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10285.html" title="Message sent in reply to this message">Agent Friday: "Re: [cc65] o65 generation bug?"</a></li>
<li><dfn>Reply</dfn>:  <a href="10287.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "***SPAM*** Re: [cc65] o65 generation bug?"</a></li>
<li><dfn>Reply</dfn>:  <a href="10289.html" title="Message sent in reply to this message">Greg King: "Re: [cc65] o65 generation bug?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10284" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10284" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10284" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-05-14 12:19:26 CEST
</em></small></p>
</body>
</html>
