<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: ***SPAM*** Re: [cc65] o65 generation </title>
<meta name="Author" content="Ullrich von Bassewitz (uz1musoftware.de)" />
<meta name="Subject" content="***SPAM*** Re: [cc65] o65 generation bug?" />
<meta name="Date" content="2012-05-17" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>***SPAM*** Re: [cc65] o65 generation bug?</h1>
<!-- received="Thu May 17 11:43:53 2012" -->
<!-- isoreceived="20120517094353" -->
<!-- sent="Thu, 17 May 2012 11:43:47 +0200" -->
<!-- isosent="20120517094347" -->
<!-- name="Ullrich von Bassewitz" -->
<!-- email="uz1musoftware.de" -->
<!-- subject="***SPAM*** Re: [cc65] o65 generation bug?" -->
<!-- id="4FB4C853.5030508@musoftware.de" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="CACb6e79FNyVV3RbKuT7R6Mq7KbkA0HJ=E-bOpQO3W+nquLqKpA&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10288.html" title="Oliver Schmidt: &quot;Re: ***SPAM*** Re: [cc65] o65 generation bug?&quot;">Next message</a> ]
[ <a href="10286.html" title="Joseph Rose: &quot;[cc65] Randomizer problem with library&quot;">Previous message</a> ]
[ <a href="10284.html" title="Agent Friday: &quot;Re: [cc65] o65 generation bug?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10288.html" title="Oliver Schmidt: &quot;Re: ***SPAM*** Re: [cc65] o65 generation bug?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Ullrich von Bassewitz &lt;<a href="mailto:uz1musoftware.de?Subject=Re:%20***SPAM***%20Re:%20[cc65]%20o65%20generation%20bug?">uz1musoftware.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-05-17 11:43:47</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi!

On 14.05.2012 12:19, Agent Friday wrote:
 &gt; I removed the LDADDR segment from the code, and that seemed to clear up
 &gt; the discrepancies.  (Well, almost.)  It appears that some of the
 &gt; calculations rely on the assumption that the code segment will be the
 &gt; first thing specified to go into the file, and if it's not so then
 &gt; things get thrown off.

I'm not able to check that currently, but it might be true. ld65 has to 
make some limitations and assumptions about segments, because o65 is 
less flexible than the native object file format. If it is true, then it 
would of course be nice if the linker could emit a warning or an error. 
But as said before, I'm currently not able to check it, so the problem 
may have some other cause.

But sitting here in the hotel bar drinking a nice cup of coffee, I have 
another idea for you to try:

If you look at the existing config files that cause the linker to emit 
o65 files, you will notice a few differences to the one you're using. I 
would suggest that you start with a config that is as similar as 
possible to an existing one and then change it step by step. This way 
you will be able to diagnose which change in the config file is causing 
your problems.

If this doesn't help, then please send me a small(!) but compilable(!) 
example of non working code via private mail.

Regards


	Uz


&gt;
&gt; Instead of actually removing the .WORD __CODE_LOAD__ directive, I moved
&gt; it into the DATA segment to see what got generated.  LD65 actually
&gt; generated a text-relative fix-up entry in the data seg relocation table,
&gt; which is good, but the actual value generated for __CODE_LOAD__ was
&gt; still 0.  That seems odd.  Are the &quot;define=yes&quot; settings meant to be
&gt; rendered invalid by choosing .o65 as the output format?
&gt;
&gt; I guess I'm left with a couple of questions now...
&gt;
&gt; 1.  I'd like some nice way to be able to switch between .o65 and binary
&gt; file formats w/o having to make temporary edits to my code.  It would be
&gt; nice if I could do this by specifying something on the command-line, but
&gt; I haven't looked too deep into the possibilities.
&gt;
&gt; 2.  Are the __segment_LOAD__
&gt;
&gt; I prefer to handle jump tables by placing it in its own &quot;JMPTBL&quot;
&gt; segment, thus being able to guarantee that the jump table is the first
&gt; code in the target w/o relying on what order the source files are
&gt; specified.  I tried this out, putting the segment JMPTBL first in the
&gt; segments section, just before code, and it seemed to work nicely.  :-)
&gt; However, __JMPTBL_LOAD__ also came up 0.
&gt;
&gt;


-- 
Ullrich von Bassewitz                                 uz&#64;musoftware&#46;<!--nospam-->de
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu May 17 11:43:53 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10288.html" title="Next message in the list">Oliver Schmidt: "Re: ***SPAM*** Re: [cc65] o65 generation bug?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10286.html" title="Previous message in the list">Joseph Rose: "[cc65] Randomizer problem with library"</a></li>
<li><dfn>In reply to</dfn>: <a href="10284.html" title="Message to which this message replies">Agent Friday: "Re: [cc65] o65 generation bug?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10288.html" title="Next message in this discussion thread">Oliver Schmidt: "Re: ***SPAM*** Re: [cc65] o65 generation bug?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10288.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: ***SPAM*** Re: [cc65] o65 generation bug?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10287" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10287" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10287" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-05-17 11:43:57 CEST
</em></small></p>
</body>
</html>
