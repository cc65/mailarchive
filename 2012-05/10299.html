<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] ca65: Why doesn't this zer</title>
<meta name="Author" content="Agent Friday (64subnet1gmail.com)" />
<meta name="Subject" content="Re: [cc65] ca65: Why doesn't this zero-page override work?" />
<meta name="Date" content="2012-05-24" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] ca65: Why doesn't this zero-page override work?</h1>
<!-- received="Thu May 24 21:18:45 2012" -->
<!-- isoreceived="20120524191845" -->
<!-- sent="Thu, 24 May 2012 12:18:36 -0700" -->
<!-- isosent="20120524191836" -->
<!-- name="Agent Friday" -->
<!-- email="64subnet1gmail.com" -->
<!-- subject="Re: [cc65] ca65: Why doesn't this zero-page override work?" -->
<!-- id="CACb6e78AtmHNnTRmb7DEQd530Uo_O5q6j-gAKV6EeAdEDToizg@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="[cc65] ca65: Why doesn't this zero-page override work?" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10300.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] ca65: Why doesn't this zero-page override work?&quot;">Next message</a> ]
[ <a href="10298.html" title="Joseph Rose: &quot;Re: [cc65] ca65: Why doesn't this zero-apge override work?&quot;">Previous message</a> ]
<!-- unextthread="start" -->
 [ <a href="10300.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] ca65: Why doesn't this zero-page override work?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Agent Friday &lt;<a href="mailto:64subnet1gmail.com?Subject=Re:%20[cc65]%20ca65:%20Why%20doesn't%20this%20zero-page%20override%20work?">64subnet1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-05-24 21:18:36</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Thu, May 24, 2012 at 5:24 AM,  &lt;silverdr&#64;wfmh&#46;<!--nospam-->org.pl&gt; wrote:
&gt;
&gt; On 2012-05-24, at 13:47, Agent Friday wrote:
&gt;&gt;        LDA  Z:FOO
&gt;&gt;
&gt;&gt; FOO = $12
&gt;
&gt; I think the forward declaration is a problem. I recall discussing
&gt; similar thing with UZ some time ago. Check if you get warning when
&gt; the forced Z: is omitted (this would be result of my discussion) and
&gt; if you get the same if the declaration of FOO is _before_ its first
&gt; use.

Yes, the &quot;warning: didn't use zeropage ...&quot; was what led me to look
for such a solution.  I tried a couple other things...

FOO = $1234
        LDA (FOO),Y

This generated a &quot;range error&quot; rather than &quot;illegal addressing
mode&quot;, making me wonder if maybe the general form X: was recognized
as an address size override, but perhaps &quot;Z&quot; itself was just not
implemented.  But a couple other tests ruled this out...

FOO = $12
        LDA  K:FOO      ; SYNTAX ERROR
        LDA  Z:FOO      ; _NO_ ERROR!

So it seems that Z: _is_ in fact recognized as zero-page addressing
override, but instead of being used as the default size for FOO
(when not yet defined), it is still assuming FOO must be 16 bits,
and then complaining that it cannot use a 16-bit address in zero-
page mode.

So I conclude that this is a bug in the implementation of Z:

-- 
// Agent Friday
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu May 24 21:18:45 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10300.html" title="Next message in the list">silverdr1wfmh.org.pl: "Re: [cc65] ca65: Why doesn't this zero-page override work?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10298.html" title="Previous message in the list">Joseph Rose: "Re: [cc65] ca65: Why doesn't this zero-apge override work?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10300.html" title="Next message in this discussion thread">silverdr1wfmh.org.pl: "Re: [cc65] ca65: Why doesn't this zero-page override work?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10300.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] ca65: Why doesn't this zero-page override work?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10299" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10299" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10299" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-05-24 21:18:48 CEST
</em></small></p>
</body>
</html>
