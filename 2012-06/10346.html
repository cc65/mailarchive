<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Specifying segment for lib</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] Specifying segment for library code?" />
<meta name="Date" content="2012-06-03" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Specifying segment for library code?</h1>
<!-- received="Sun Jun  3 01:16:00 2012" -->
<!-- isoreceived="20120602231600" -->
<!-- sent="Sun, 3 Jun 2012 01:15:46 +0200" -->
<!-- isosent="20120602231546" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] Specifying segment for library code?" -->
<!-- id="CACT=u73dZS3YJzmAoZvR-7eWmxiaiGFaVkHA0nbUwV2tPmkvNw@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20120602222245.GA22136&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10347.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Specifying segment for library code?&quot;">Next message</a> ]
[ <a href="10345.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Specifying segment for library code?&quot;">Previous message</a> ]
[ <a href="10345.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Specifying segment for library code?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10347.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Specifying segment for library code?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Specifying%20segment%20for%20library%20code?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-06-03 01:15:46</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt;&gt; &gt; That is possible with an intermediate step. Use the linker to create your main
&gt;&gt; &gt; program. Use some perl magic to retrieve all identifiers from the map file and
&gt;&gt; &gt; generate an asm file with &quot;name := value&quot; pairs. Then assemble and link this
&gt;&gt; &gt; object file to the overlays. As a result, the overlays will use functions in
&gt;&gt; &gt; the main program, if they are already there, and have their own copies of
&gt;&gt; &gt; everything else.
&gt;&gt;
&gt;&gt; As far as I understand that approach would link strncmp into the main
&gt;&gt; program and allow to use it from the overlay _too_. The question here
&gt;&gt; was to have it linked into the overlay _only_.
&gt;
&gt; No. If the function is in the main module, the overlays will use that one. If
&gt; it is not, the linker will link the library function to the overlay(s).

Okay, the original question was:

&quot;For example,  if I have an overlay that uses strncmp, but the main
program doesn't, it would be nice to be able to tell the linker to
link strncmp to the overlay and not to the main program.&quot;

Why does one need any special &quot;magic&quot; to do that? I don't see so. Just
linking the overlay against the C library.

&gt;&gt; The (more usual) scenario of linking all library stuff needed by any
&gt;&gt; overlay into main can easily archived by by linking the main and all
&gt;&gt; overlays in one single linker &quot;session&quot; as shown in the overlay sample
&gt;&gt; contained in the last cc65 release

&gt; That may be a common scenario, but as far as I understand it it is different
&gt; from what he asked for.

For sure - but as far as I can see we both extended the original
question - just in the opposite direction, didn't we?

&gt;&gt; (but not the present in the current snapshot !).
&gt;
&gt; Why that? Anything I should know but don't remember?

Because you added the &quot;%o.ovl&quot; feature to the linker I asked you for
and I commited to create generic overlay linker configs for the CBMs,
Apple and Atatri using it instead of the &quot;fixed&quot; example. But I didn't
do so by now :-(

Regards,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sun Jun  3 01:16:00 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10347.html" title="Next message in the list">Ullrich von Bassewitz: "Re: [cc65] Specifying segment for library code?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10345.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] Specifying segment for library code?"</a></li>
<li><dfn>In reply to</dfn>: <a href="10345.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] Specifying segment for library code?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10347.html" title="Next message in this discussion thread">Ullrich von Bassewitz: "Re: [cc65] Specifying segment for library code?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10347.html" title="Message sent in reply to this message">Ullrich von Bassewitz: "Re: [cc65] Specifying segment for library code?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10346" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10346" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10346" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-06-03 01:16:03 CEST
</em></small></p>
</body>
</html>
