<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Odd problems creating a ne</title>
<meta name="Author" content="L. Adamson (leaf1dizzydragon.net)" />
<meta name="Subject" content="Re: [cc65] Odd problems creating a new target." />
<meta name="Date" content="2012-06-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Odd problems creating a new target.</h1>
<!-- received="Sat Jun 23 10:45:44 2012" -->
<!-- isoreceived="20120623084544" -->
<!-- sent="Sat, 23 Jun 2012 04:45:29 -0400" -->
<!-- isosent="20120623084529" -->
<!-- name="L. Adamson" -->
<!-- email="leaf1dizzydragon.net" -->
<!-- subject="Re: [cc65] Odd problems creating a new target." -->
<!-- id="CACz_Yz2ydu7WT+Ynm4g23niR+kSSvRHJnhQwwhKYe5+Ne_44pw@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="8036252034197576418&#64;unknownmsgid" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10383.html" title="Oliver Schmidt: &quot;Re: [cc65] Odd problems creating a new target.&quot;">Next message</a> ]
[ <a href="10381.html" title="Oliver Schmidt: &quot;Re: [cc65] Odd problems creating a new target.&quot;">Previous message</a> ]
[ <a href="10381.html" title="Oliver Schmidt: &quot;Re: [cc65] Odd problems creating a new target.&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10383.html" title="Oliver Schmidt: &quot;Re: [cc65] Odd problems creating a new target.&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: L. Adamson &lt;<a href="mailto:leaf1dizzydragon.net?Subject=Re:%20[cc65]%20Odd%20problems%20creating%20a%20new%20target.">leaf1dizzydragon.net</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-06-23 10:45:29</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>On Fri, Jun 22, 2012 at 3:32 PM, Oliver Schmidt &lt;ol.sc&#64;web&#46;<!--nospam-->de&gt; wrote:

&gt; I do apologize for spamming the list about something so trivial. :3
&gt;
&gt; Someone actively working on a new cc65 target is certainly entitled to
&gt; send messages to this list - be they trivial or not! At least in my
&gt; opinion...
&gt;
&gt;
Ha!  You may regret saying that. ;)

I've come upon another head-scratcher, which makes me think I have my C
stack set up wrongly somehow.  Any insights would be extremely groovy, as
I'm all out of ideas of what to look for.  Hopefully it's not something as
silly as last time. &lt;_&lt;

The gist of it is, regular local variables seem to just not work, being
unassignable -- always containing zero.  Details of some specifics of the
behavior I'm seeing are in a comment block in test.c .

However, static local variables work just fine.  I tried passing the -Cl
switch to the compiler to make all variables static, but function
parameters still don't work when I do that.  That's what leads me to
believe that I've got my C stack set up wrong.

Whee, I wish I knew what I was doing! :3

Here are some files that may be elucidating.  The POKEs around 0x310 are
just writing characters sequentially into the display memory.  Everything
is built with -t none --cpu 65816 -Osir -g.

test.c (containing main): <a href="http://pastebin.com/1e6809ja">http://pastebin.com/1e6809ja</a>
test.s: <a href="http://pastebin.com/sTw2Nq1R">http://pastebin.com/sTw2Nq1R</a>
test.map: <a href="http://pastebin.com/a2qDtPxB">http://pastebin.com/a2qDtPxB</a>
rpc8e.cfg: <a href="http://pastebin.com/kCrZPQqk">http://pastebin.com/kCrZPQqk</a>
crt0.s: <a href="http://pastebin.com/K8fUgFBk">http://pastebin.com/K8fUgFBk</a>
mmu.s: <a href="http://pastebin.com/BzvhUk8p">http://pastebin.com/BzvhUk8p</a>

Thanks again.  I really appreciate the time y'all take to help!

----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Sat Jun 23 10:45:44 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10383.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] Odd problems creating a new target."</a></li>
<li><dfn>Previous message</dfn>: <a href="10381.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] Odd problems creating a new target."</a></li>
<li><dfn>In reply to</dfn>: <a href="10381.html" title="Message to which this message replies">Oliver Schmidt: "Re: [cc65] Odd problems creating a new target."</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10383.html" title="Next message in this discussion thread">Oliver Schmidt: "Re: [cc65] Odd problems creating a new target."</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10383.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] Odd problems creating a new target."</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10382" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10382" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10382" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-06-23 10:45:48 CEST
</em></small></p>
</body>
</html>
