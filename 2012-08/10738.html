<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Uniform mass storage devic</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] Uniform mass storage device discovery and file locations" />
<meta name="Date" content="2012-08-20" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Uniform mass storage device discovery and file locations</h1>
<!-- received="Mon Aug 20 14:08:53 2012" -->
<!-- isoreceived="20120820120853" -->
<!-- sent="Mon, 20 Aug 2012 14:08:25 +0200" -->
<!-- isosent="20120820120825" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] Uniform mass storage device discovery and file locations" -->
<!-- id="CACT=u70BsLNED+gPjQLJ9qW-Wp3zsodRy_SrMVmavFPMrg0PwQ@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="55EFB532-0A79-439B-B470-E3A9D1A77175&#64;wfmh.org.pl" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10739.html" title="Spiro Trikaliotis: &quot;Re: [cc65] [PATCH 1/3] Allow Bcc from one segment to another.&quot;">Next message</a> ]
[ <a href="10737.html" title="Oliver Schmidt: &quot;Re: [cc65] Uniform mass storage device discovery and file locations&quot;">Previous message</a> ]
[ <a href="10730.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Uniform mass storage device discovery and file locations&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10759.html" title="silverdr1wfmh.org.pl: &quot;Re: [cc65] Uniform mass storage device discovery and file locations&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20Uniform%20mass%20storage%20device%20discovery%20and%20file%20locations">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-08-20 14:08:25</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

Just for the records - here's again the code snipet and my questions -
which the answer below refers to...

lda &lt;device&gt;
jsr $ffb1 ; listen
lda #$00
sta $90   ; necessary ?
lda #$ff  ; or rather #$6f ?
jsr $ff93 ; lstnsa
ldy $90
jsr $ffae ; unlstn
tya
bpl &lt;present&gt;
&lt;not present&gt;

However I have several questions:
- Is it really necessary to initialize $90
- What is the right high nibble for &quot;opening&quot; the cmd channel here $F or $6 ?
- Is it correct to assume that unlstn doesn't trash Y ?
- Is it correct that $90 must be saved before calling unlstn ?

&gt; P. S. Unless someone replies earlier, I would need a few days (travelling now) to check my stuff at home to answer the questions about status ($90) byte. My bet is that answer to both is &quot;yes&quot; but have to double check the reasons, which I sort of only recall now - so don't take them as true and correct. [*]
&gt;
&gt; * - 1) to start afresh, 2) to allow particular bits to be affected without losing previous information from the other ones

As noone else has answered yet I'd for sure appreciate if you would
take the time after your return to re-check !

The code linked to a few posting back
(<a href="http://codebase64.org/doku.php?id=base:detect_drives_on_iec_bus">http://codebase64.org/doku.php?id=base:detect_drives_on_iec_bus</a>) sets
the status to zero before calling LISTEN while mine above does it
after that call. I'm not sure if this is of significance. Could LISTEN
already fail (and set the status ?). Would LSTNSA probably even reset
the status back to zero? ...?

It would be great to know the really correct sequence here!

Regards,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Mon Aug 20 14:08:53 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10739.html" title="Next message in the list">Spiro Trikaliotis: "Re: [cc65] [PATCH 1/3] Allow Bcc from one segment to another."</a></li>
<li><dfn>Previous message</dfn>: <a href="10737.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<li><dfn>In reply to</dfn>: <a href="10730.html" title="Message to which this message replies">silverdr1wfmh.org.pl: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10759.html" title="Next message in this discussion thread">silverdr1wfmh.org.pl: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10759.html" title="Message sent in reply to this message">silverdr1wfmh.org.pl: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<li><dfn>Reply</dfn>:  <a href="10760.html" title="Message sent in reply to this message">Spiro Trikaliotis: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10738" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10738" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10738" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-08-20 14:08:56 CEST
</em></small></p>
</body>
</html>
