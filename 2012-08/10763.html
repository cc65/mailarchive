<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Uniform mass storage devic</title>
<meta name="Author" content="Spiro Trikaliotis (ml-cc651trikaliotis.net)" />
<meta name="Subject" content="Re: [cc65] Uniform mass storage device discovery and file locations" />
<meta name="Date" content="2012-08-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Uniform mass storage device discovery and file locations</h1>
<!-- received="Thu Aug 23 20:29:34 2012" -->
<!-- isoreceived="20120823182934" -->
<!-- sent="Thu, 23 Aug 2012 20:28:41 +0200" -->
<!-- isosent="20120823182841" -->
<!-- name="Spiro Trikaliotis" -->
<!-- email="ml-cc651trikaliotis.net" -->
<!-- subject="Re: [cc65] Uniform mass storage device discovery and file locations" -->
<!-- id="20120823182841.GF2826@trikaliotis.net" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="CACT=u72tBC9CVq1i9=N9ZZ7fKLKSG=wGKUm1FEw5qsfDGXUH_Q&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10764.html" title="Spiro Trikaliotis: &quot;Re: [cc65] [PATCH 2/3] Fix documentation for DiskChangeDevice.&quot;">Next message</a> ]
[ <a href="10762.html" title="Oliver Schmidt: &quot;Re: [cc65] [PATCH 2/3] Fix documentation for DiskChangeDevice.&quot;">Previous message</a> ]
[ <a href="10761.html" title="Oliver Schmidt: &quot;Re: [cc65] Uniform mass storage device discovery and file locations&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10772.html" title="Oliver Schmidt: &quot;Re: [cc65] Uniform mass storage device discovery and file locations&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Spiro Trikaliotis &lt;<a href="mailto:ml-cc651trikaliotis.net?Subject=Re:%20[cc65]%20Uniform%20mass%20storage%20device%20discovery%20and%20file%20locations">ml-cc651trikaliotis.net</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-08-23 20:28:41</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hello Oliver,

* On Thu, Aug 23, 2012 at 03:25:06PM +0200 Oliver Schmidt wrote:

&gt; &gt;&gt; - Is it correct that $90 must be saved before calling unlstn ?
&gt; &gt;
&gt; &gt; No, not really
&gt; &gt;
&gt; &gt; [...]
&gt; 
&gt; I was afraid that unlstn would set $90 to zero because &quot;there wasn't a
&gt; communication channel opened successfully in the first place so
&gt; closing it is a nop and therefore by definition successful&quot;. But if
&gt; this isn't the case i'll just LDA $90 after all operations. Dit I
&gt; understand you right that this is reasonable?

Yes, this is correct. You can just test $90 afterwards.

BTW: JSR $FFB7 (READST) is the &quot;official&quot; way to read the I/O status
word at $90, that would also work on other machines but the C64.

But:

- You cannot clear $90 directly by a KERNAL call (but, you must use
  another function like CLOSE that resets it. You can close an unopened
  file number, thus, this might be an option)

- The LISTEN and UNLISTEN functions are not presnet in a CBM KERNAL
  before C64 (yep, even the VIC20, which is extremely similar to the C64
  did not have them).
  Thus, only the C128 (what about C16, Plus/4?) would be other
  candidates where this might work.

So, using READST and the option above to clear the status word might be
an option for C64 and later machines, but not for machines before that.

Regards,
Spiro.

-- 
Spiro R. Trikaliotis
<a href="http://www.trikaliotis.net/">http://www.trikaliotis.net/</a>
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Aug 23 20:29:34 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10764.html" title="Next message in the list">Spiro Trikaliotis: "Re: [cc65] [PATCH 2/3] Fix documentation for DiskChangeDevice."</a></li>
<li><dfn>Previous message</dfn>: <a href="10762.html" title="Previous message in the list">Oliver Schmidt: "Re: [cc65] [PATCH 2/3] Fix documentation for DiskChangeDevice."</a></li>
<li><dfn>In reply to</dfn>: <a href="10761.html" title="Message to which this message replies">Oliver Schmidt: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10772.html" title="Next message in this discussion thread">Oliver Schmidt: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10772.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] Uniform mass storage device discovery and file locations"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10763" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10763" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10763" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-08-23 20:29:40 CEST
</em></small></p>
</body>
</html>
