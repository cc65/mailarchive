<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] Literal cast to pointer ge</title>
<meta name="Author" content="Brad Smith (rainwarrior1gmail.com)" />
<meta name="Subject" content="Re: [cc65] Literal cast to pointer generating unnecessary code with []." />
<meta name="Date" content="2012-10-17" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] Literal cast to pointer generating unnecessary code with [].</h1>
<!-- received="Wed Oct 17 22:41:54 2012" -->
<!-- isoreceived="20121017204154" -->
<!-- sent="Wed, 17 Oct 2012 16:41:14 -0400" -->
<!-- isosent="20121017204114" -->
<!-- name="Brad Smith" -->
<!-- email="rainwarrior1gmail.com" -->
<!-- subject="Re: [cc65] Literal cast to pointer generating unnecessary code with []." -->
<!-- id="CAOTi9L_NcJC=0PkHDUfUthMkicauwE5FPB180fMOKKCACnes=g@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="20121017202428.GA13320&#64;trixie.musoftware.de" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10925.html" title="Groepaz: &quot;Re: [cc65] Literal cast to pointer generating unnecessary code with [].&quot;">Next message</a> ]
[ <a href="10923.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Literal cast to pointer generating unnecessary code with [].&quot;">Previous message</a> ]
[ <a href="10923.html" title="Ullrich von Bassewitz: &quot;Re: [cc65] Literal cast to pointer generating unnecessary code with [].&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10925.html" title="Groepaz: &quot;Re: [cc65] Literal cast to pointer generating unnecessary code with [].&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Brad Smith &lt;<a href="mailto:rainwarrior1gmail.com?Subject=Re:%20[cc65]%20Literal%20cast%20to%20pointer%20generating%20unnecessary%20code%20with%20[].">rainwarrior1gmail.com</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-10-17 22:41:14</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>&gt; Thanks for the report! There are quite some cases where cc65 does generate bad
&gt; code. These cases are not easy to fix because of the internal structure of the
&gt; compiler. So while I will try to keep it in mind, I cannot promise anything.
&gt; At least you know how to have the compiler generate better code:-)

It is easy to work around this particular case now that I know about
it. I just figured you might want to know in case the same mechanism
that does this is doing it somewhere else more important. Thanks!

By the way, I discovered this because I was trying to use it on the
NES to write to the memory mapped register at 0x2007, which increments
an internal write address on every read or write. Apparently the
6502's STA (zp), Y instruction issues a dummy read before the write, I
was getting quite unexpected results when the address was
double-incremented! There are very few registers on the NES that have
read/write side effects anyway, so it's not really a problem in the
general case. It's a very rare case where replacing an absolute
address with an indirect indexed one isn't functionally the same
(aside from the timing, of course).

-- Brad Smith
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Wed Oct 17 22:41:54 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10925.html" title="Next message in the list">Groepaz: "Re: [cc65] Literal cast to pointer generating unnecessary code with []."</a></li>
<li><dfn>Previous message</dfn>: <a href="10923.html" title="Previous message in the list">Ullrich von Bassewitz: "Re: [cc65] Literal cast to pointer generating unnecessary code with []."</a></li>
<li><dfn>In reply to</dfn>: <a href="10923.html" title="Message to which this message replies">Ullrich von Bassewitz: "Re: [cc65] Literal cast to pointer generating unnecessary code with []."</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10925.html" title="Next message in this discussion thread">Groepaz: "Re: [cc65] Literal cast to pointer generating unnecessary code with []."</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10925.html" title="Message sent in reply to this message">Groepaz: "Re: [cc65] Literal cast to pointer generating unnecessary code with []."</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10924" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10924" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10924" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-10-17 22:41:57 CEST
</em></small></p>
</body>
</html>
