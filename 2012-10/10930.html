<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: Re: [cc65] dio_query_sectcount() on A</title>
<meta name="Author" content="Oliver Schmidt (ol.sc1web.de)" />
<meta name="Subject" content="Re: [cc65] dio_query_sectcount() on Atari ?" />
<meta name="Date" content="2012-10-18" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>Re: [cc65] dio_query_sectcount() on Atari ?</h1>
<!-- received="Thu Oct 18 11:07:46 2012" -->
<!-- isoreceived="20121018090746" -->
<!-- sent="Thu, 18 Oct 2012 11:07:00 +0200" -->
<!-- isosent="20121018090700" -->
<!-- name="Oliver Schmidt" -->
<!-- email="ol.sc1web.de" -->
<!-- subject="Re: [cc65] dio_query_sectcount() on Atari ?" -->
<!-- id="CACT=u72NTG&ndash;&ndash;K6bkWm+ACHmc1w7K7hX1N533nPp0z4D_wTe6xg@mail.gmail.com" -->
<!-- charset="ISO-8859-1" -->
<!-- inreplyto="79242318F7DF461DAEBE5ED75A5BF86B&#64;ORANGE2" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10931.html" title="Marc Rintsch: &quot;Re: [cc65] dio_query_sectcount() on Atari ?&quot;">Next message</a> ]
[ <a href="10929.html" title="Shawn Jefferson: &quot;RE: [cc65] dio_query_sectcount() on Atari ?&quot;">Previous message</a> ]
[ <a href="10929.html" title="Shawn Jefferson: &quot;RE: [cc65] dio_query_sectcount() on Atari ?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10931.html" title="Marc Rintsch: &quot;Re: [cc65] dio_query_sectcount() on Atari ?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Oliver Schmidt &lt;<a href="mailto:ol.sc1web.de?Subject=Re:%20[cc65]%20dio_query_sectcount()%20on%20Atari%20?">ol.sc1web.de</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-10-18 11:07:00</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>Hi,

&gt; I can only think of one way that would work across all DOSes, and all types
&gt; of disks (after all, you may want to have a disk copy routine that copies a
&gt; boot disk, or oddly sized ATR file).  The only way I can think of is to just
&gt; try and read sectors until you find the last one-not the greatest method.

I'd strongly suggest to not implementit that way it's absolutely not
conformant to expectations. Imagine the disc copy scenario basically
reading the whole disk twice.

If there should be no way to do it with a reasonable amount of
overhead then it should rather not be implemented at all. Then a disck
copy program can still just call dio_read() until that returns with an
errror...

In my opinion even better would be to implement it and always return
an error. The DIO interface currently isn't that strictly defined but
it seems reasonable to interpret a sector count of zero as error
condition and use _oserror to hold an error code. At least that's what
my Apple II implementation does in case of a disk read error.

&gt; Perhaps you could try to request the percom block, but I don't think every
&gt; device will provide that, so you can't rely on it necessarily.

Does it probably make sense to define a &quot;&gt; 80% of the drives&quot; and/or a
&quot;&gt; 80% of the DOSes&quot; case in which a simple solution works and just
live with the fact that the 20% left will return an error (aka zero
sectors)?

Just my two cents,
Oliver
----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Thu Oct 18 11:07:46 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10931.html" title="Next message in the list">Marc Rintsch: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10929.html" title="Previous message in the list">Shawn Jefferson: "RE: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><dfn>In reply to</dfn>: <a href="10929.html" title="Message to which this message replies">Shawn Jefferson: "RE: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10931.html" title="Next message in this discussion thread">Marc Rintsch: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10931.html" title="Message sent in reply to this message">Marc Rintsch: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><dfn>Reply</dfn>:  <a href="10933.html" title="Message sent in reply to this message">Shawn Jefferson: "RE: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10930" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10930" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10930" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-10-18 11:07:50 CEST
</em></small></p>
</body>
</html>
