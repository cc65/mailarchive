<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
<meta name="generator" content="hypermail 2.1.8, see http://www.hypermail.org/" />
<title>cc65 mailing list archive: RE: [cc65] dio_query_sectcount() on A</title>
<meta name="Author" content="Shawn Jefferson (sjefferson1shaw.ca)" />
<meta name="Subject" content="RE: [cc65] dio_query_sectcount() on Atari ?" />
<meta name="Date" content="2012-10-23" />
<style type="text/css">
/*<![CDATA[*/
/* To be incorporated in the main stylesheet, don't code it in hypermail! */
body {color: black; background: #ffffff}
dfn {font-weight: bold;}
pre { background-color:inherit;}
.head { border-bottom:1px solid black;}
.foot { border-top:1px solid black;}
th {font-style:italic;}
table { margin-left:2em;}map ul {list-style:none;}
#mid { font-size:0.9em;}
#received { float:right;}
address { font-style:inherit ;}
/*]]>*/
.quotelev1 {color : #990099}
.quotelev2 {color : #ff7700}
.quotelev3 {color : #007799}
.quotelev4 {color : #95c500}
</style>
</head>
<body>
<div class="head">
<h1>RE: [cc65] dio_query_sectcount() on Atari ?</h1>
<!-- received="Tue Oct 23 03:47:43 2012" -->
<!-- isoreceived="20121023014743" -->
<!-- sent="Mon, 22 Oct 2012 18:47:18 -0700" -->
<!-- isosent="20121023014718" -->
<!-- name="Shawn Jefferson" -->
<!-- email="sjefferson1shaw.ca" -->
<!-- subject="RE: [cc65] dio_query_sectcount() on Atari ?" -->
<!-- id="30426D8979DD43A48ECF450174F62632@ORANGE2" -->
<!-- charset="us-ascii" -->
<!-- inreplyto="CACT=u72cDaj63M+hzM=Go875gJNAFFSgeLmCt9Xnp5fEsSwGSg&#64;mail.gmail.com" -->
<!-- expires="-1" -->
<map id="navbar" name="navbar">
<ul class="links">
<li>
<dfn>This message</dfn>:
[ <a href="#start" name="options1" id="options1" tabindex="1">Message body</a> ]
 [ <a href="#options2">More options</a> ]
</li>
<li>
<dfn>Related messages</dfn>:
<!-- unext="start" -->
[ <a href="10967.html" title="Oliver Schmidt: &quot;Re: [cc65] dio_query_sectcount() on Atari ?&quot;">Next message</a> ]
[ <a href="10965.html" title="thefox xofeht: &quot;Re: [cc65] branch inside .repeat?&quot;">Previous message</a> ]
[ <a href="10957.html" title="Oliver Schmidt: &quot;Re: [cc65] dio_query_sectcount() on Atari ?&quot;">In reply to</a> ]
<!-- unextthread="start" -->
 [ <a href="10967.html" title="Oliver Schmidt: &quot;Re: [cc65] dio_query_sectcount() on Atari ?&quot;">Next in thread</a> ]
 [ <a href="#replies">Replies</a> ]
<!-- ureply="end" -->
</li>
</ul>
</map>
</div>
<!-- body="start" -->
<div class="mail">
<address class="headers">
<span id="from">
<dfn>From</dfn>: Shawn Jefferson &lt;<a href="mailto:sjefferson1shaw.ca?Subject=RE:%20[cc65]%20dio_query_sectcount()%20on%20Atari%20?">sjefferson1shaw.ca</a>&gt;
</span><br />
<span id="date"><dfn>Date</dfn>: 2012-10-23 03:47:18</span><br />
</address>
<pre id="body">
<a name="start" accesskey="j" id="start"></a>&gt; From: owner-cc65&#64;musoftware&#46;<!--nospam-->de [mailto:owner-cc65&#64;musoftware&#46;<!--nospam-->de] On Behalf
&gt; Of Oliver Schmidt

&lt;snip&gt;

&gt; &gt; I think is query the percom block, and if it's not present, just
&gt; &gt; return 0. So, it's
&gt; &gt; up to the calling application knowing the best method to access the
&gt; disk.
&gt; 
&gt; How much code would be necessary to additionally detect DOS 2.5 720/1040
&gt; disks?

It can be done (it involves looking for the VTOC in the upper sectors and
then the one in the lower sectors), but that ignores all the &quot;raw&quot; formatted
disks that a programmer may want to query the sector size on.  I don't think
we should make assumptions that all DIO access is going to be on DOS
formatted disks.

What's wrong with the solution of querying for the percom block, and if that
doesn't exist, fall back on the brute force binary read method?  That will
always return you a max sector size for any disk.  I don't like the solution
of returning zero personally... that's so counter-intuitive, more so than
reading the disk to determine the max sector (imo).



----------------------------------------------------------------------
To unsubscribe from the list send mail to majordomo&#64;musoftware&#46;<!--nospam-->de with
the string &quot;unsubscribe cc65&quot; in the body(!) of the mail.
</pre>
<span id="received"><dfn>Received on</dfn> Tue Oct 23 03:47:43 2012</span>
</div>
<!-- body="end" -->
<div class="foot">
<map id="navbarfoot" name="navbarfoot" title="Related messages">
<ul class="links">
<li><dfn>This message</dfn>: [ <a href="#start">Message body</a> ]</li>
<!-- lnext="start" -->
<li><dfn>Next message</dfn>: <a href="10967.html" title="Next message in the list">Oliver Schmidt: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><dfn>Previous message</dfn>: <a href="10965.html" title="Previous message in the list">thefox xofeht: "Re: [cc65] branch inside .repeat?"</a></li>
<li><dfn>In reply to</dfn>: <a href="10957.html" title="Message to which this message replies">Oliver Schmidt: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<!-- lnextthread="start" -->
<li><dfn>Next in thread</dfn>: <a href="10967.html" title="Next message in this discussion thread">Oliver Schmidt: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<li><a name="replies" id="replies"></a><dfn>Reply</dfn>:  <a href="10967.html" title="Message sent in reply to this message">Oliver Schmidt: "Re: [cc65] dio_query_sectcount() on Atari ?"</a></li>
<!-- lreply="end" -->
</ul>
<ul class="links">
<li><a name="options2" id="options2"></a><dfn>Contemporary messages sorted</dfn>: [ <a href="date.html#10966" title="Contemporary messages by date">By Date</a> ] [ <a href="index.html#10966" title="Contemporary discussion threads">By Thread</a> ] [ <a href="subject.html#10966" title="Contemporary messages by subject">By Subject</a> ]</ul>
</map>
</div>
<!-- trailer="footer" -->
<p><small><em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2.1.8</a> 
: 2012-10-23 03:47:46 CEST
</em></small></p>
</body>
</html>
